!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t?String(t):t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=s(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(d&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(g&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v&&d&&m(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n=o(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,n=s(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=(t=(n=e.method||this.method||"GET").toUpperCase(),-1<_.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new a(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,g,v,y,m,b,_,w;(ze="undefined"!=typeof self?self:void 0).fetch||(f="URLSearchParams"in ze,p="Symbol"in ze&&"iterator"in Symbol,d="FileReader"in ze&&"Blob"in ze&&function(){try{return new Blob,!0}catch(t){return!1}}(),g="FormData"in ze,(v="ArrayBuffer"in ze)&&(y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&-1<y.indexOf(Object.prototype.toString.call(t))}),a.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},a.prototype.delete=function(t){delete this.map[r(t)]},a.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},a.prototype.set=function(t,e){this.map[r(t)]=i(e)},a.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},a.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},a.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},p&&(a.prototype[Symbol.iterator]=a.prototype.entries),_=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},w=[301,302,303,307,308],l.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},ze.Headers=a,ze.Request=c,ze.Response=l,ze.fetch=function(n,o){return new Promise(function(r,t){var e=new c(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new a,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":");(t=e.shift().trim())&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new l(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&d&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},ze.fetch.polyfill=!0);var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function T(t){var e={exports:{}};return t(e,e.exports),e.exports}function E(t){try{return!!t()}catch(t){return!0}}function S(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function C(t){return q.call(t).slice(8,-1)}function N(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function k(t){return B(N(t))}function A(t){return"object"==typeof t?null!==t:"function"==typeof t}function R(t,e){if(!A(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!A(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!A(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!A(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function O(t,e){return K.call(t,e)}function P(t){return H?W.createElement(t):{}}function D(t){if(!A(t))throw TypeError(String(t)+" is not an object");return t}function x(e,n){try{J(L,e,n)}catch(t){L[e]=n}return n}var L=(Xe=function(t){return t&&t.Math==Math&&t})("object"==typeof globalThis&&globalThis)||Xe("object"==typeof window&&window)||Xe("object"==typeof self&&self)||Xe("object"==typeof I&&I)||function(){return this}()||Function("return this")(),M=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),F={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,j={f:U&&!F.call({1:2},1)?function(t){return!!(t=U(this,t))&&t.enumerable}:F},q={}.toString,V="".split,B=E(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==C(t)?V.call(t,""):Object(t)}:Object,K={}.hasOwnProperty,W=L.document,H=A(W)&&A(W.createElement),G=!M&&!E(function(){return 7!=Object.defineProperty(P("div"),"a",{get:function(){return 7}}).a}),z=Object.getOwnPropertyDescriptor,Q={f:M?z:function(t,e){if(t=k(t),e=R(e,!0),G)try{return z(t,e)}catch(t){}if(O(t,e))return S(!j.f.call(t,e),t[e])}},Y=Object.defineProperty,X={f:M?Y:function(t,e,n){if(D(t),e=R(e,!0),D(n),G)try{return Y(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},J=M?function(t,e,n){return X.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},$=L[$e="__core-js_shared__"]||x($e,{}),Z=Function.toString;function tt(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++pt+dt).toString(36)}"function"!=typeof $.inspectSource&&($.inspectSource=function(t){return Z.call(t)});var et,nt,rt,it,ot,at,st,ut,ct=$.inspectSource,ht="function"==typeof(Te=L.WeakMap)&&/native code/.test(ct(Te)),lt=!1,ft=T(function(t){(t.exports=function(t,e){return $[t]||($[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),pt=0,dt=Math.random(),gt=ft("keys"),vt=function(t){return gt[t]||(gt[t]=tt(t))},yt={},mt=L.WeakMap;function bt(t){return"function"==typeof t?t:void 0}function _t(t,e){return arguments.length<2?bt(Pt[t])||bt(L[t]):Pt[t]&&Pt[t][e]||L[t]&&L[t][e]}function wt(t){return isNaN(t=+t)?0:(0<t?xt:Dt)(t)}function It(t){return 0<t?Lt(wt(t),9007199254740991):0}function Tt(t,e){var n,r=k(t),i=0,o=[];for(n in r)!O(yt,n)&&O(r,n)&&o.push(n);for(;e.length>i;)O(r,n=e[i++])&&(~Ut(o,n)||o.push(n));return o}function Et(t,e){for(var n=Kt(e),r=X.f,i=Q.f,o=0;o<n.length;o++){var a=n[o];O(t,a)||r(t,a,i(e,a))}}function St(t,e){var n,r,i,o=t.target,a=t.global,s=t.stat,u=a?L:s?L[o]||x(o,{}):(L[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Xt(u,n))&&i.value:u[n],!Yt(a?n:o+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;Et(r,i)}(t.sham||i&&i.sham)&&J(r,"sham",!0),Ot(u,n,r,t)}}function Ct(t){return Object(N(t))}function Nt(){}function kt(t){return"<script>"+t+"<\/script>"}st=ht?(et=$.state||($.state=new mt),nt=et.get,rt=et.has,it=et.set,ot=function(t,e){return e.facade=t,it.call(et,t,e),e},at=function(t){return nt.call(et,t)||{}},function(t){return rt.call(et,t)}):(ut=vt("state"),yt[ut]=!0,ot=function(t,e){return e.facade=t,J(t,ut,e),e},at=function(t){return O(t,ut)?t[ut]:{}},function(t){return O(t,ut)});var At,Rt={set:ot,get:at,has:st,enforce:function(t){return st(t)?at(t):ot(t,{})},getterFor:function(n){return function(t){var e;if(!A(t)||(e=at(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Ot=T(function(t){var e=Rt.get,s=Rt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||O(n,"name")||J(n,"name",e),(r=s(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==L?(i?!a&&t[e]&&(o=!0):delete t[e],o?t[e]=n:J(t,e,n)):o?t[e]=n:x(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||ct(this)})}),Pt=L,Dt=Math.ceil,xt=Math.floor,Lt=Math.min,Mt=Math.max,Ft=Math.min,Ut=((ze=function(s){return function(t,e,n){var r,i=k(t),o=It(i.length),a=(t=o,(n=wt(n=n))<0?Mt(n+t,0):Ft(n,t));if(s&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}})(!0),ze(!1)),jt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qt=jt.concat("length","prototype"),Vt={f:Object.getOwnPropertyNames||function(t){return Tt(t,qt)}},Bt={f:Object.getOwnPropertySymbols},Kt=_t("Reflect","ownKeys")||function(t){var e=Vt.f(D(t)),n=Bt.f;return n?e.concat(n(t)):e},Wt=/#|\.prototype\./,Ht=(Xe=function(t,e){return(t=Gt[Ht(t)])==Qt||t!=zt&&("function"==typeof e?E(e):!!e)}).normalize=function(t){return String(t).replace(Wt,".").toLowerCase()},Gt=Xe.data={},zt=Xe.NATIVE="N",Qt=Xe.POLYFILL="P",Yt=Xe,Xt=Q.f,I=!E(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Jt=vt("IE_PROTO"),$t=Object.prototype,Zt=I?Object.getPrototypeOf:function(t){return O(t=Ct(t),Jt)?t[Jt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?$t:null},te=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return D(t),function(){if(!A(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(),r?n.call(t,e):t.__proto__=e,t}}():void 0),ee=Object.keys||function(t){return Tt(t,jt)},ne=M?Object.defineProperties:function(t,e){D(t);for(var n,r=ee(e),i=r.length,o=0;o<i;)X.f(t,n=r[o++],e[n]);return t},re=_t("document","documentElement"),ie="prototype",oe=vt("IE_PROTO"),ae=function(){try{At=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;ae=At?function(t){t.write(kt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(At):((t=P("iframe")).style.display="none",re.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(kt("document.F=Object")),t.close(),t.F);for(var e=jt.length;e--;)delete ae[ie][jt[e]];return ae()};function se(t){return O(pe,t)||(fe&&O(de,t)?pe[t]=de[t]:pe[t]=ge("Symbol."+t)),pe[t]}function ue(t){return void 0!==t&&(ve.Array===t||me[ye]===t)}function ce(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function he(r,i,t){if(ce(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}yt[oe]=!0;var le=Object.create||function(t,e){var n;return null!==t?(Nt[ie]=D(t),n=new Nt,Nt[ie]=null,n[oe]=t):n=ae(),void 0===e?n:ne(n,e)},fe=!!Object.getOwnPropertySymbols&&!E(function(){return!String(Symbol())}),F=fe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,pe=ft("wks"),de=L.Symbol,ge=F?de:de&&de.withoutSetter||tt,ve={},ye=se("iterator"),me=Array.prototype;function be(t){if(null!=t)return t[Ne]||t["@@iterator"]||ve[Ce(t)]}function _e(t){var e=t.return;return void 0!==e&&D(e.call(t)).value}function we(t,e){this.stopped=t,this.result=e}function Ie(t,e,n){function r(t){return o&&_e(o),new we(!0,t)}function i(t){return f?(D(t),d?g(t[0],t[1],r):g(t[0],t[1])):d?g(t,r):g(t)}var o,a,s,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),g=he(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=be(t)))throw TypeError("Target is not iterable");if(ue(p)){for(a=0,s=It(t.length);a<s;a++)if((u=i(t[a]))&&u instanceof we)return u;return new we(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw _e(o),t}if("object"==typeof u&&u&&u instanceof we)return u}return new we(!1)}($e={})[se("toStringTag")]="z";var Te="[object z]"===String($e),Ee=se("toStringTag"),Se="Arguments"==C(function(){return arguments}()),Ce=Te?C:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ee))?t:Se?C(e):"Object"==(t=C(e))&&"function"==typeof e.callee?"Arguments":t},Ne=se("iterator"),ke=function(t,e){var n=this;return n instanceof ke?(te&&(n=te(new Error(void 0),Zt(n))),void 0!==e&&J(n,"message",String(e)),Ie(t,(e=[]).push,{that:e}),J(n,"errors",e),n):new ke(t,e)};function Ae(t,e,n){for(var r in e)Ot(t,r,e[r],n);return t}function Re(t,e,n){t&&!O(t=n?t:t.prototype,Le)&&xe(t,Le,{configurable:!0,value:e})}function Oe(t){var e=_t(t),t=X.f;M&&e&&!e[Me]&&t(e,Me,{configurable:!0,get:function(){return this}})}function Pe(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}ke.prototype=le(Error.prototype,{constructor:S(5,ke),message:S(5,""),name:S(5,"AggregateError")}),St({global:!0},{AggregateError:ke}),ht=Te?{}.toString:function(){return"[object "+Ce(this)+"]"},Te||Ot(Object.prototype,"toString",ht,{unsafe:!0});var De=L.Promise,xe=X.f,Le=se("toStringTag"),Me=se("species"),Fe=se("iterator"),Ue=!1;try{var je=0,qe={next:function(){return{done:!!je++}},return:function(){Ue=!0}};qe[Fe]=function(){return this},Array.from(qe,function(){throw 2})}catch(za){}function Ve(t,e){if(!e&&!Ue)return!1;var n=!1;try{var r={};r[Fe]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Be(t,e){var n;return void 0===(t=D(t).constructor)||null==(n=D(t)[Ge])?e:ce(n)}function Ke(t){var e;en.hasOwnProperty(t)&&(e=en[t],delete en[t],e())}function We(t){return function(){Ke(t)}}var He,Ge=se("species"),mt=_t("navigator","userAgent")||"",ze=/(iphone|ipod|ipad).*applewebkit/i.test(mt),Qe="process"==C(L.process),Ye=L.location,Xe=L.setImmediate,I=L.clearImmediate,Je=L.process,$e=L.MessageChannel,Ze=L.Dispatch,tn=0,en={},nn="onreadystatechange",Te=function(t){Ke(t.data)},ht=function(t){L.postMessage(t+"",Ye.protocol+"//"+Ye.host)};Xe&&I||(Xe=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return en[++tn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},He(tn),tn},I=function(t){delete en[t]},Qe?He=function(t){Je.nextTick(We(t))}:Ze&&Ze.now?He=function(t){Ze.now(We(t))}:$e&&!ze?(fn=($e=new $e).port2,$e.port1.onmessage=Te,He=he(fn.postMessage,fn,1)):L.addEventListener&&"function"==typeof postMessage&&!L.importScripts&&Ye&&"file:"!==Ye.protocol&&!E(ht)?(He=ht,L.addEventListener("message",Te,!1)):He=nn in P("script")?function(t){re.appendChild(P("script"))[nn]=function(){re.removeChild(this),Ke(t)}}:function(t){setTimeout(We(t),0)});var rn,on,an,sn,un,cn,hn,ln,fn={set:Xe,clear:I},ht=Q.f,pn=fn.set,Te=L.MutationObserver||L.WebKitMutationObserver,Xe=L.document,dn=L.process,I=L.Promise;function gn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=ce(n),this.reject=ce(r)}function vn(t,e){return D(t),A(e)&&e.constructor===t?e:((0,(t=bn.f(t)).resolve)(e),t.promise)}function yn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}(ht=(ht=ht(L,"queueMicrotask"))&&ht.value)||(rn=function(){var t,e;for(Qe&&(t=dn.domain)&&t.exit();on;){e=on.fn,on=on.next;try{e()}catch(t){throw on?sn():an=void 0,t}}an=void 0,t&&t.enter()},sn=!ze&&!Qe&&Te&&Xe?(un=!0,cn=Xe.createTextNode(""),new Te(rn).observe(cn,{characterData:!0}),function(){cn.data=un=!un}):I&&I.resolve?(hn=I.resolve(void 0),ln=hn.then,function(){ln.call(hn,rn)}):Qe?function(){dn.nextTick(rn)}:function(){pn.call(L,rn)});var mn=ht||function(t){t={fn:t,next:void 0},an&&(an.next=t),on||(on=t,sn()),an=t},bn={f:function(t){return new gn(t)}};function _n(t){var e;return!(!A(t)||"function"!=typeof(e=t.then))&&e}function wn(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,mn(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,a=p[n++],s=e?a.ok:a.fail,u=a.resolve,c=a.reject,h=a.domain;try{s?(e||(2===l.rejection&&Yn(l),l.rejection=1),!0===s?r=t:(h&&h.enter(),r=s(t),h&&(h.exit(),o=!0)),r===a.promise?c(Fn("Promise-chain cycle")):(i=_n(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&zn(l)}))}function In(t,e,n){var r,i;Kn?((r=Un.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),L.dispatchEvent(r)):r={promise:e,reason:n},!Wn&&(i=L["on"+t])?i(r):t===Hn&&function(t,e){var n=L.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Tn(e,n,r){return function(t){e(n,t,r)}}function En(t,e,n){t.done||(t.done=!0,(t=n||t).value=e,t.state=2,wn(t,!0))}(ht=(ht=(ht=L.process)&&ht.versions)&&ht.v8)?Wr=(Gn=ht.split("."))[0]+Gn[1]:mt&&(!(Gn=mt.match(/Edge\/(\d+)/))||74<=Gn[1])&&(Gn=mt.match(/Chrome\/(\d+)/))&&(Wr=Gn[1]);var Sn,Cn,Nn,kn,An=Wr&&+Wr,Rn=fn.set,On=se("species"),Pn="Promise",Dn=Rt.get,xn=Rt.set,Ln=Rt.getterFor(Pn),Mn=De,Fn=L.TypeError,Un=L.document,jn=L.process,qn=_t("fetch"),Vn=bn.f,Bn=Vn,Kn=!!(Un&&Un.createEvent&&L.dispatchEvent),Wn="function"==typeof PromiseRejectionEvent,Hn="unhandledrejection",Gn=(mt=Yt(Pn,function(){if(ct(Mn)===String(Mn)){if(66===An)return!0;if(!Qe&&!Wn)return!0}if(51<=An&&/native code/.test(Mn))return!1;function t(t){t(function(){},function(){})}var e=Mn.resolve(1);return(e.constructor={})[On]=t,!(e.then(function(){})instanceof t)}))||!Ve(function(t){Mn.all(t).catch(function(){})}),zn=function(r){Rn.call(L,function(){var t,e=r.facade,n=r.value;if(Qn(r)&&(t=yn(function(){Qe?jn.emit("unhandledRejection",n,e):In(Hn,e,n)}),r.rejection=Qe||Qn(r)?2:1,t.error))throw t.value})},Qn=function(t){return 1!==t.rejection&&!t.parent},Yn=function(e){Rn.call(L,function(){var t=e.facade;Qe?jn.emit("rejectionHandled",t):In("rejectionhandled",t,e.value)})},Xn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw Fn("Promise can't be resolved itself");var r=_n(t);r?mn(function(){var e={done:!1};try{r.call(t,Tn(Xn,e,n),Tn(En,e,n))}catch(t){En(e,t,n)}}):(n.value=t,n.state=1,wn(n,!1))}catch(t){En({done:!1},t,n)}}};mt&&(Mn=function(t){Pe(this,Mn,Pn),ce(t),Sn.call(this);var e=Dn(this);try{t(Tn(Xn,e),Tn(En,e))}catch(t){En(e,t)}},(Sn=function(t){xn(this,{type:Pn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ae(Mn.prototype,{then:function(t,e){var n=Ln(this),r=Vn(Be(this,Mn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Qe?jn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&wn(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Cn=function(){var t=new Sn,e=Dn(t);this.promise=t,this.resolve=Tn(Xn,e),this.reject=Tn(En,e)},bn.f=Vn=function(t){return t===Mn||t===Nn?new Cn:Bn(t)},"function"==typeof De&&(kn=De.prototype.then,Ot(De.prototype,"then",function(t,e){var n=this;return new Mn(function(t,e){kn.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof qn&&St({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return vn(Mn,qn.apply(L,arguments))}}))),St({global:!0,wrap:!0,forced:mt},{Promise:Mn}),Re(Mn,Pn,!1),Oe(Pn),Nn=_t(Pn),St({target:Pn,stat:!0,forced:mt},{reject:function(t){var e=Vn(this);return e.reject.call(void 0,t),e.promise}}),St({target:Pn,stat:!0,forced:mt},{resolve:function(t){return vn(this,t)}}),St({target:Pn,stat:!0,forced:Gn},{all:function(t){var s=this,e=Vn(s),u=e.resolve,c=e.reject,n=yn(function(){var r=ce(s.resolve),i=[],o=0,a=1;Ie(t,function(t){var e=o++,n=!1;i.push(void 0),a++,r.call(s,t).then(function(t){n||(n=!0,i[e]=t,--a||u(i))},c)}),--a||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Vn(n),i=r.reject,e=yn(function(){var e=ce(n.resolve);Ie(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),St({target:"Promise",stat:!0},{allSettled:function(t){var s=this,e=bn.f(s),u=e.resolve,n=e.reject,r=yn(function(){var r=ce(s.resolve),i=[],o=0,a=1;Ie(t,function(t){var e=o++,n=!1;i.push(void 0),a++,r.call(s,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--a||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--a||u(i))})}),--a||u(i)});return r.error&&n(r.value),e.promise}});var Jn="No one promise resolved";function $n(){return this}function Zn(){return this}function tr(t,e,n,r,i,o,a){function s(t){if(t===i&&g)return g;if(!rr&&t in p)return p[t];switch(t){case"keys":case or:case ar:return function(){return new n(this,t)}}return function(){return new n(this)}}var u;l=e,l+=" Iterator",(u=n).prototype=le(er,{next:S(1,r)}),Re(u,l,!1),ve[l]=$n;var c,h,l=e+" Iterator",f=!1,p=t.prototype,d=p[ir]||p["@@iterator"]||i&&p[i],g=!rr&&d||s(i);if((r="Array"==e&&p.entries||d)&&(t=Zt(r.call(new t)),nr!==Object.prototype&&t.next&&(Zt(t)!==nr&&(te?te(t,nr):"function"!=typeof t[ir]&&J(t,ir,Zn)),Re(t,l,!0))),i==or&&d&&d.name!==or&&(f=!0,g=function(){return d.call(this)}),p[ir]!==g&&J(p,ir,g),ve[e]=g,i)if(c={values:s(or),keys:o?g:s("keys"),entries:s(ar)},a)for(h in c)!rr&&!f&&h in p||Ot(p,h,c[h]);else St({target:e,proto:!0,forced:rr||f},c);return c}St({target:"Promise",stat:!0},{any:function(t){var u=this,e=bn.f(u),c=e.resolve,h=e.reject,n=yn(function(){var r=ce(u.resolve),i=[],o=0,a=1,s=!1;Ie(t,function(t){var e=o++,n=!1;i.push(void 0),a++,r.call(u,t).then(function(t){n||s||(s=!0,c(t))},function(t){n||s||(n=!0,i[e]=t,--a||h(new(_t("AggregateError"))(i,Jn)))})}),--a||h(new(_t("AggregateError"))(i,Jn))});return n.error&&h(n.value),e.promise}}),St({target:"Promise",proto:!0,real:!0,forced:Wr=!!De&&E(function(){De.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=Be(this,_t("Promise")),t="function"==typeof e;return this.then(t?function(t){return vn(n,e()).then(function(){return t})}:e,t?function(t){return vn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof De||De.prototype.finally||Ot(De.prototype,"finally",_t("Promise").prototype.finally),mt={codeAt:(fn=function(o){return function(t,e){var n,r=String(N(t)),i=wt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}})(!1),charAt:fn(!0)},Gn=se("iterator"),Wr=!1,[].keys&&("next"in(dr=[].keys())?(Kr=Zt(Zt(dr)))!==Object.prototype&&(Dr=Kr):Wr=!0),O(Dr=null==Dr?{}:Dr,Gn)||J(Dr,Gn,function(){return this});var er=(fn={IteratorPrototype:Dr,BUGGY_SAFARI_ITERATORS:Wr}).IteratorPrototype,nr=fn.IteratorPrototype,rr=fn.BUGGY_SAFARI_ITERATORS,ir=se("iterator"),or="values",ar="entries",sr=mt.charAt,ur="String Iterator",cr=Rt.set,hr=Rt.getterFor(ur);tr(String,"String",function(t){cr(this,{type:ur,string:String(t),index:0})},function(){var t=hr(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=sr(e,n),t.index+=n.length,{value:n,done:!1})});var lr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},fr=se("unscopables"),pr=Array.prototype;null==pr[fr]&&X.f(pr,fr,{configurable:!0,value:le(null)});var dr=function(t){pr[fr][t]=!0},gr="Array Iterator",vr=Rt.set,yr=Rt.getterFor(gr),mr=tr(Array,"Array",function(t,e){vr(this,{type:gr,target:k(t),index:0,kind:e})},function(){var t=yr(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");ve.Arguments=ve.Array,dr("keys"),dr("values"),dr("entries");var br,_r=se("iterator"),wr=se("toStringTag"),Ir=mr.values;for(br in lr){var Tr=L[br],Er=Tr&&Tr.prototype;if(Er){if(Er[_r]!==Ir)try{J(Er,_r,Ir)}catch(za){Er[_r]=Ir}if(Er[wr]||J(Er,wr,br),lr[br])for(var Sr in mr)if(Er[Sr]!==mr[Sr])try{J(Er,Sr,mr[Sr])}catch(za){Er[Sr]=mr[Sr]}}}function Cr(t,e){var n;return new(void 0===(n=kr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||kr(n.prototype))||A(n)&&null===(n=n[Ar]))?void 0:n)?Array:n)(0===e?0:e)}function Nr(t){throw t}Pt.Promise,St({target:"Promise",stat:!0},{try:function(t){var e=bn.f(this);return((t=yn(t)).error?e.reject:e.resolve)(t.value),e.promise}});var kr=Array.isArray||function(t){return"Array"==C(t)},Ar=se("species"),Rr=[].push,Gn={forEach:(Kr=function(f){var p=1==f,d=2==f,g=3==f,v=4==f,y=6==f,m=7==f,b=5==f||y;return function(t,e,n,r){for(var i,o,a=Ct(t),s=B(a),u=he(e,n,3),c=It(s.length),h=0,r=r||Cr,l=p?r(t,c):d||m?r(t,0):void 0;h<c;h++)if((b||h in s)&&(o=u(i=s[h],h,a),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:Rr.call(l,i)}else switch(f){case 4:return!1;case 7:Rr.call(l,i)}return y?-1:g||v?v:l}})(0),map:Kr(1),filter:Kr(2),some:Kr(3),every:Kr(4),find:Kr(5),findIndex:Kr(6),filterOut:Kr(7)},Or=Object.defineProperty,Pr={},Dr=function(t,e){if(O(Pr,t))return Pr[t];var n=[][t],r=!!O(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=O(e,0)?e[0]:Nr,o=O(e,1)?e[1]:void 0;return Pr[t]=!!n&&!E(function(){if(r&&!M)return 1;var t={length:-1};r?Or(t,1,{enumerable:!0,get:Nr}):t[1]=1,n.call(t,i,o)})},xr=Gn.find,Lr=!0,fn=Dr(Wr="find");Wr in[]&&Array(1)[Wr](function(){Lr=!1}),St({target:"Array",proto:!0,forced:Lr||!fn},{find:function(t){return xr(this,t,1<arguments.length?arguments[1]:void 0)}}),dr(Wr);var Mr=Function.call,Fr=((mt=function(t,e,n){return he(Mr,L[t].prototype[e],n)})("Array","find"),Gn.findIndex),Ur=!0,fn=Dr(Kr="findIndex");function jr(t,e,n){(e=R(e))in t?X.f(t,e,S(0,n)):t[e]=n}Kr in[]&&Array(1)[Kr](function(){Ur=!1}),St({target:"Array",proto:!0,forced:Ur||!fn},{findIndex:function(t){return Fr(this,t,1<arguments.length?arguments[1]:void 0)}}),dr(Kr),mt("Array","findIndex"),St({target:"Array",stat:!0,forced:Wr=!Ve(function(t){Array.from(t)})},{from:function(t){var e,n,r,i,o,a=Ct(t),s="function"==typeof this?this:Array,u=arguments.length,c=1<u?arguments[1]:void 0,h=void 0!==c,t=be(a),l=0;if(h&&(c=he(c,2<u?arguments[2]:void 0,2)),null==t||s==Array&&ue(t))for(n=new s(e=It(a.length));l<e;l++)jr(n,l,h?c(a[l],l):a[l]);else for(o=(i=t.call(a)).next,n=new s;!(r=o.call(i)).done;l++)jr(n,l,h?function(t,e,n){try{return e(D(n)[0],n[1])}catch(e){throw _e(t),e}}(i,c,[r.value,l]):r.value);return n.length=l,n}}),Pt.Array.from;var qr,Vr=Gn.some,fn=!!(qr=[].some)&&E(function(){qr.call(null,function(){throw 1},1)}),dr=Dr("some");St({target:"Array",proto:!0,forced:!fn||!dr},{some:function(t){return Vr(this,t,1<arguments.length?arguments[1]:void 0)}}),mt("Array","some");var Br,Kr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Wr=X.f,ht=L.Int8Array,Hr=ht&&ht.prototype,fn=(Dr=L.Uint8ClampedArray)&&Dr.prototype,Gr=ht&&Zt(ht),zr=Hr&&Zt(Hr),Dr=((dr=Object.prototype).isPrototypeOf,se("toStringTag")),Qr=tt("TYPED_ARRAY_TAG"),Yr=Kr&&!!te&&"Opera"!==Ce(L.opera),Kr=!1,Xr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Jr={BigInt64Array:8,BigUint64Array:8};for(Br in Xr)L[Br]||(Yr=!1);if((!Yr||"function"!=typeof Gr||Gr===Function.prototype)&&(Gr=function(){throw TypeError("Incorrect invocation")},Yr))for(Br in Xr)L[Br]&&te(L[Br],Gr);if((!Yr||!zr||zr===dr)&&(zr=Gr.prototype,Yr))for(Br in Xr)L[Br]&&te(L[Br].prototype,zr);if(Yr&&Zt(fn)!==zr&&te(fn,zr),M&&!O(zr,Dr))for(Br in Kr=!0,Wr(zr,Dr,{get:function(){return A(this)?this[Qr]:void 0}}),Xr)L[Br]&&J(L[Br],Qr,Br);var fn=function(t){if(A(e=t)&&(e=Ce(e),O(Xr,e)||O(Jr,e)))return t;var e;throw TypeError("Target is not a typed array")},Wr=function(t,e,n){if(M){if(n)for(var r in Xr)(r=L[r])&&O(r.prototype,t)&&delete r.prototype[t];zr[t]&&!n||Ot(zr,t,!n&&Yr&&Hr[t]||e)}},Dr=se("iterator"),Kr=L.Uint8Array,$r=mr.values,Zr=mr.keys,ti=mr.entries,ei=fn,fn=Wr,Kr=!!(Wr=Kr&&Kr.prototype[Dr])&&("values"==Wr.name||null==Wr.name),Wr=function(){return $r.call(ei(this))};fn("entries",function(){return ti.call(ei(this))}),fn("keys",function(){return Zr.call(ei(this))}),fn("values",Wr,!Kr),fn(Dr,Wr,!Kr);var ni=Object.assign,ri=Object.defineProperty,Wr=!ni||E(function(){if(M&&1!==ni({b:1},ni(ri({},"a",{enumerable:!0,get:function(){ri(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ni({},t)[n]||ee(ni({},e)).join("")!=r})?function(t,e){for(var n=Ct(t),r=arguments.length,i=1,o=Bt.f,a=j.f;i<r;)for(var s,u=B(arguments[i++]),c=o?ee(u).concat(o(u)):ee(u),h=c.length,l=0;l<h;)s=c[l++],M&&!a.call(u,s)||(n[s]=u[s]);return n}:ni;St({target:"Object",stat:!0,forced:Object.assign!==Wr},{assign:Wr}),Pt.Object.assign;var ii=j.f,oi=(Wr={entries:(Kr=function(s){return function(t){for(var e,n=k(t),r=ee(n),i=r.length,o=0,a=[];o<i;)e=r[o++],M&&!ii.call(n,e)||a.push(s?[e,n[e]]:n[e]);return a}})(!0),values:Kr(!1)}).entries;St({target:"Object",stat:!0},{entries:function(t){return oi(t)}}),Pt.Object.entries;var ai=Wr.values;function si(t){if(A(e=t)&&(void 0!==(n=e[ui])?n:"RegExp"==C(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}St({target:"Object",stat:!0},{values:function(t){return ai(t)}}),Pt.Object.values;var ui=se("match"),ci=se("match");St({target:"String",proto:!0,forced:!(Kr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[ci]=!1,"/./"[e](n)}catch(t){}}return!1})("includes")},{includes:function(t){return!!~String(N(this)).indexOf(si(t),1<arguments.length?arguments[1]:void 0)}}),mt("String","includes");var Wr=Q.f,hi="".startsWith,li=Math.min,fi=!((Kr=Kr("startsWith"))||!(fi=Wr(String.prototype,"startsWith"))||fi.writable);St({target:"String",proto:!0,forced:!fi&&!Kr},{startsWith:function(t){var e=String(N(this));si(t);var n=It(li(1<arguments.length?arguments[1]:void 0,e.length)),t=String(t);return hi?hi.call(e,t,n):e.slice(n,n+t.length)===t}}),mt("String","startsWith"),St({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(N(this)),n="",r=wt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),mt("String","repeat");var pi=se("species"),di=se("isConcatSpreadable"),gi=9007199254740991,vi="Maximum allowed index exceeded",Kr=51<=An||!E(function(){var t=[];return t[di]=!1,t.concat()[0]!==t}),mt=51<=An||!E(function(){var t=[];return(t.constructor={})[pi]=function(){return{foo:1}},1!==t.concat(Boolean).foo});function yi(t){var e=Pt.Symbol||(Pt.Symbol={});O(e,t)||Ci(e,t,{value:Si.f(t)})}function mi(t,e){var n=qi[t]=le(xi[Ri]);return Oi(n,{type:Ai,tag:t,description:e}),M||(n.description=e),n}function bi(e,t){D(e);var n=k(t),t=ee(n).concat(wi(n));return Ni(t,function(t){M&&!_i.call(n,t)||zi(e,t,n[t])}),e}St({target:"Array",proto:!0,forced:!Kr||!mt},{concat:function(t){for(var e,n,r,i=Ct(this),o=Cr(i,0),a=0,s=-1,u=arguments.length;s<u;s++)if(function(t){if(A(t)){var e=t[di];return void 0!==e?e:kr(t)}}(r=-1===s?i:arguments[s])){if(n=It(r.length),gi<a+n)throw TypeError(vi);for(e=0;e<n;e++,a++)e in r&&jr(o,a,r[e])}else{if(gi<=a)throw TypeError(vi);jr(o,a++,r)}return o.length=a,o}});function _i(t){var e=R(t,!0),t=ji.call(this,e);return!(this===Di&&O(qi,e)&&!O(Vi,e))&&(!(t||!O(this,e)||!O(qi,e)||O(this,ki)&&this[ki][e])||t)}function wi(t){var e=t===Di,t=Ui(e?Vi:k(t)),n=[];return Ni(t,function(t){!O(qi,t)||e&&!O(Di,t)||n.push(qi[t])}),n}var Ii=Vt.f,Ti={}.toString,Ei="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],mt={f:function(t){return Ei&&"[object Window]"==Ti.call(t)?function(t){try{return Ii(t)}catch(t){return Ei.slice()}}(t):Ii(k(t))}},Si={f:se},Ci=X.f,Ni=Gn.forEach,ki=vt("hidden"),Ai="Symbol",Ri="prototype",Gn=se("toPrimitive"),Oi=Rt.set,Pi=Rt.getterFor(Ai),Di=Object[Ri],xi=L.Symbol,Li=_t("JSON","stringify"),Mi=Q.f,Fi=X.f,Ui=mt.f,ji=j.f,qi=ft("symbols"),Vi=ft("op-symbols"),Bi=ft("string-to-symbol-registry"),Ki=ft("symbol-to-string-registry"),vt=ft("wks"),Wi=!(ft=L.QObject)||!ft[Ri]||!ft[Ri].findChild,Hi=M&&E(function(){return 7!=le(Fi({},"a",{get:function(){return Fi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Mi(Di,e);r&&delete Di[e],Fi(t,e,n),r&&t!==Di&&Fi(Di,e,r)}:Fi,Gi=F?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof xi},zi=function(t,e,n){return t===Di&&zi(Vi,e,n),D(t),e=R(e,!0),D(n),O(qi,e)?(n.enumerable?(O(t,ki)&&t[ki][e]&&(t[ki][e]=!1),n=le(n,{enumerable:S(0,!1)})):(O(t,ki)||Fi(t,ki,S(1,{})),t[ki][e]=!0),Hi(t,e,n)):Fi(t,e,n)},ft=function(t,e){var n=k(t),t=R(e,!0);if(n!==Di||!O(qi,t)||O(Vi,t))return!(e=Mi(n,t))||!O(qi,t)||O(n,ki)&&n[ki][t]||(e.enumerable=!0),e},F=function(t){var t=Ui(k(t)),e=[];return Ni(t,function(t){O(qi,t)||O(yt,t)||e.push(t)}),e};fe||(Ot((xi=function(){if(this instanceof xi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=tt(t),n=function(t){this===Di&&n.call(Vi,t),O(this,ki)&&O(this[ki],e)&&(this[ki][e]=!1),Hi(this,e,S(1,t))};return M&&Wi&&Hi(Di,e,{configurable:!0,set:n}),mi(e,t)})[Ri],"toString",function(){return Pi(this).tag}),Ot(xi,"withoutSetter",function(t){return mi(tt(t),t)}),j.f=_i,X.f=zi,Q.f=ft,Vt.f=mt.f=F,Bt.f=wi,Si.f=function(t){return mi(se(t),t)},M&&(Fi(xi[Ri],"description",{configurable:!0,get:function(){return Pi(this).description}}),Ot(Di,"propertyIsEnumerable",_i,{unsafe:!0}))),St({global:!0,wrap:!0,forced:!fe,sham:!fe},{Symbol:xi}),Ni(ee(vt),function(t){yi(t)}),St({target:Ai,stat:!0,forced:!fe},{for:function(t){var e=String(t);return O(Bi,e)?Bi[e]:(t=xi(e),Bi[e]=t,Ki[t]=e,t)},keyFor:function(t){if(!Gi(t))throw TypeError(t+" is not a symbol");if(O(Ki,t))return Ki[t]},useSetter:function(){Wi=!0},useSimple:function(){Wi=!1}}),St({target:"Object",stat:!0,forced:!fe,sham:!M},{create:function(t,e){return void 0===e?le(t):bi(le(t),e)},defineProperty:zi,defineProperties:bi,getOwnPropertyDescriptor:ft}),St({target:"Object",stat:!0,forced:!fe},{getOwnPropertyNames:F,getOwnPropertySymbols:wi}),St({target:"Object",stat:!0,forced:E(function(){Bt.f(1)})},{getOwnPropertySymbols:function(t){return Bt.f(Ct(t))}}),Li&&St({target:"JSON",stat:!0,forced:ao=!fe||E(function(){var t=xi();return"[null]"!=Li([t])||"{}"!=Li({a:t})||"{}"!=Li(Object(t))})},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((A(r=e)||void 0!==t)&&!Gi(t))return kr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Gi(e))return e}),i[1]=e,Li.apply(null,i)}}),xi[Ri][Gn]||J(xi[Ri],Gn,xi[Ri].valueOf),Re(xi,Ai),yt[ki]=!0,yi("asyncIterator");var Qi,Yi,Xi,Ji,$i,ft=X.f,Zi=L.Symbol;!M||"function"!=typeof Zi||"description"in Zi.prototype&&void 0===Zi().description||(Qi={},Et(Yi=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Yi?new Zi(t):void 0===t?Zi():Zi(t);return""===t&&(Qi[e]=!0),e},Zi),(co=Yi.prototype=Zi.prototype).constructor=Yi,Xi=co.toString,Ji="Symbol(test)"==String(Zi("test")),$i=/^Symbol\((.*)\)[^)]+$/,ft(co,"description",{configurable:!0,get:function(){var t=A(this)?this.valueOf():this,e=Xi.call(t);return O(Qi,t)?"":""===(e=Ji?e.slice(7,-1):e.replace($i,"$1"))?void 0:e}}),St({global:!0,forced:!0},{Symbol:Yi})),yi("hasInstance"),yi("isConcatSpreadable"),yi("iterator"),yi("match"),yi("matchAll"),yi("replace"),yi("search"),yi("species"),yi("split"),yi("toPrimitive"),yi("toStringTag"),yi("unscopables"),Re(L.JSON,"JSON",!0),Re(Math,"Math",!0),St({global:!0},{Reflect:{}}),Re(L.Reflect,"Reflect",!0),Pt.Symbol,yi("asyncDispose"),yi("dispose"),yi("observable"),yi("patternMatch"),yi("replaceAll"),Si.f("iterator");var to=!E(function(){return Object.isExtensible(Object.preventExtensions({}))}),eo=T(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=X.f,r=tt("meta"),i=0,o=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!A(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!O(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!O(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return to&&a.REQUIRED&&o(t)&&!O(t,r)&&n(t),t}};yt[r]=!0}),F=function(a,t,e){function n(t){var n=p[t];Ot(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!A(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!A(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!A(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,s,u,c=-1!==a.indexOf("Map"),h=-1!==a.indexOf("Weak"),l=c?"set":"add",f=L[a],p=f&&f.prototype,d=f,g={};return Yt(a,"function"!=typeof f||!(h||p.forEach&&!E(function(){(new f).entries().next()})))?(d=e.getConstructor(t,a,c,l),eo.REQUIRED=!0):Yt(a,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=E(function(){r.has(1)}),s=Ve(function(t){new f(t)}),u=!h&&E(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),s||(((d=t(function(t,e){Pe(t,d,a);var n,r,i,o=(o=new f,n=t,t=d,te&&"function"==typeof(r=n.constructor)&&r!==t&&A(i=r.prototype)&&i!==t.prototype&&te(o,i),o);return null!=e&&Ie(e,o[l],{that:o,AS_ENTRIES:c}),o})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),St({global:!0,forced:(g[a]=d)!=f},g),Re(d,a),h||e.setStrong(d,a,c),d},no=X.f,ro=eo.fastKey,io=Rt.set,oo=Rt.getterFor,ao={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=u(t),o=a(t,e);return o?o.value=n:(i.last=o={index:r=ro(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),M?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}function a(t,e){var n,r=u(t);if("F"!==(t=ro(e)))return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n}var s=t(function(t,e){Pe(t,s,n),io(t,{type:n,index:le(null),first:void 0,last:void 0,size:0}),M||(t.size=0),null!=e&&Ie(e,t[i],{that:t,AS_ENTRIES:r})}),u=oo(n);return Ae(s.prototype,{clear:function(){for(var t=u(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,M?t.size=0:this.size=0},delete:function(t){var e,n=u(this),r=a(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),M?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=u(this),r=he(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),Ae(s.prototype,r?{get:function(t){return(t=a(this,t))&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),M&&no(s.prototype,"size",{get:function(){return u(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=oo(e),o=oo(r);tr(t,e,function(t,e){io(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),Oe(e)}};function so(){for(var t,e=D(this),n=ce(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function uo(t){return Map.prototype.entries.call(t)}St({target:"Map",stat:!0},{from:Gn=(F("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},ao),Pt.Map,function(t){var e,n,r,i,o=arguments.length,a=1<o?arguments[1]:void 0;return ce(this),(e=void 0!==a)&&ce(a),null==t?new this:(n=[],e?(r=0,i=he(a,2<o?arguments[2]:void 0,2),Ie(t,function(t){n.push(i(t,r++))})):Ie(t,n.push,{that:n}),new this(n))})}),St({target:"Map",stat:!0},{of:ft=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}}),St({target:"Map",proto:!0,real:!0,forced:lt},{deleteAll:function(){return so.apply(this,arguments)}}),St({target:"Map",proto:!0,real:!0,forced:lt},{emplace:function(t,e){var n=D(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}}),St({target:"Map",proto:!0,real:!0,forced:lt},{every:function(t){var r=D(this),e=uo(r),i=he(t,1<arguments.length?arguments[1]:void 0,3);return!Ie(e,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Map",proto:!0,real:!0,forced:lt},{filter:function(t){var n=D(this),e=uo(n),r=he(t,1<arguments.length?arguments[1]:void 0,3),i=new(Be(n,_t("Map"))),o=ce(i.set);return Ie(e,function(t,e){r(e,t,n)&&o.call(i,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),St({target:"Map",proto:!0,real:!0,forced:lt},{find:function(t){var r=D(this),e=uo(r),i=he(t,1<arguments.length?arguments[1]:void 0,3);return Ie(e,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),St({target:"Map",proto:!0,real:!0,forced:lt},{findKey:function(t){var r=D(this),e=uo(r),i=he(t,1<arguments.length?arguments[1]:void 0,3);return Ie(e,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),St({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;ce(n);var i=ce(r.has),o=ce(r.get),a=ce(r.set);return Ie(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):a.call(r,e,[t])}),r}}),St({target:"Map",proto:!0,real:!0,forced:lt},{includes:function(i){return Ie(uo(D(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;ce(e);var r=ce(n.set);return Ie(t,function(t){r.call(n,e(t),t)}),n}}),St({target:"Map",proto:!0,real:!0,forced:lt},{keyOf:function(r){return Ie(uo(D(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),St({target:"Map",proto:!0,real:!0,forced:lt},{mapKeys:function(t){var n=D(this),e=uo(n),r=he(t,1<arguments.length?arguments[1]:void 0,3),i=new(Be(n,_t("Map"))),o=ce(i.set);return Ie(e,function(t,e){o.call(i,r(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),St({target:"Map",proto:!0,real:!0,forced:lt},{mapValues:function(t){var n=D(this),e=uo(n),r=he(t,1<arguments.length?arguments[1]:void 0,3),i=new(Be(n,_t("Map"))),o=ce(i.set);return Ie(e,function(t,e){o.call(i,t,r(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),St({target:"Map",proto:!0,real:!0,forced:lt},{merge:function(t){for(var e=D(this),n=ce(e.set),r=0;r<arguments.length;)Ie(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),St({target:"Map",proto:!0,real:!0,forced:lt},{reduce:function(n){var r=D(this),t=uo(r),i=arguments.length<2,o=i?void 0:arguments[1];if(ce(n),Ie(t,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),St({target:"Map",proto:!0,real:!0,forced:lt},{some:function(t){var r=D(this),e=uo(r),i=he(t,1<arguments.length?arguments[1]:void 0,3);return Ie(e,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Map",proto:!0,real:!0,forced:lt},{update:function(t,e){var n=D(this),r=arguments.length;ce(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");return r=i?n.get(t):ce(2<r?arguments[2]:void 0)(t,n),n.set(t,e(r,t,n)),n}});var co=function(t,e){var n,r=D(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};function ho(t){return Set.prototype.values.call(t)}St({target:"Map",proto:!0,real:!0,forced:lt},{upsert:co}),St({target:"Map",proto:!0,real:!0,forced:lt},{updateOrInsert:co}),F("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},ao),Pt.Set,St({target:"Set",stat:!0},{from:Gn}),St({target:"Set",stat:!0},{of:ft}),St({target:"Set",proto:!0,real:!0,forced:lt},{addAll:function(){return function(){for(var t=D(this),e=ce(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),St({target:"Set",proto:!0,real:!0,forced:lt},{deleteAll:function(){return so.apply(this,arguments)}}),St({target:"Set",proto:!0,real:!0,forced:lt},{every:function(t){var n=D(this),e=ho(n),r=he(t,1<arguments.length?arguments[1]:void 0,3);return!Ie(e,function(t,e){if(!r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{difference:function(t){var e=D(this),n=new(Be(e,_t("Set")))(e),r=ce(n.delete);return Ie(t,function(t){r.call(n,t)}),n}}),St({target:"Set",proto:!0,real:!0,forced:lt},{filter:function(t){var e=D(this),n=ho(e),r=he(t,1<arguments.length?arguments[1]:void 0,3),i=new(Be(e,_t("Set"))),o=ce(i.add);return Ie(n,function(t){r(t,t,e)&&o.call(i,t)},{IS_ITERATOR:!0}),i}}),St({target:"Set",proto:!0,real:!0,forced:lt},{find:function(t){var n=D(this),e=ho(n),r=he(t,1<arguments.length?arguments[1]:void 0,3);return Ie(e,function(t,e){if(r(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),St({target:"Set",proto:!0,real:!0,forced:lt},{intersection:function(t){var e=D(this),n=new(Be(e,_t("Set"))),r=ce(e.has),i=ce(n.add);return Ie(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),St({target:"Set",proto:!0,real:!0,forced:lt},{isDisjointFrom:function(t){var n=D(this),r=ce(n.has);return!Ie(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{isSubsetOf:function(t){var e=function(t){var e=be(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return D(e.call(t))}(this),n=D(t),r=n.has;return"function"!=typeof r&&(n=new(_t("Set"))(t),r=ce(n.has)),!Ie(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{isSupersetOf:function(t){var n=D(this),r=ce(n.has);return!Ie(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{join:function(t){var e=ho(n=D(this)),n=void 0===t?",":String(t);return Ie(e,(t=[]).push,{that:t,IS_ITERATOR:!0}),t.join(n)}}),St({target:"Set",proto:!0,real:!0,forced:lt},{map:function(t){var e=D(this),n=ho(e),r=he(t,1<arguments.length?arguments[1]:void 0,3),i=new(Be(e,_t("Set"))),o=ce(i.add);return Ie(n,function(t){o.call(i,r(t,t,e))},{IS_ITERATOR:!0}),i}}),St({target:"Set",proto:!0,real:!0,forced:lt},{reduce:function(e){var n=D(this),t=ho(n),r=arguments.length<2,i=r?void 0:arguments[1];if(ce(e),Ie(t,function(t){i=r?(r=!1,t):e(i,t,t,n)},{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),St({target:"Set",proto:!0,real:!0,forced:lt},{some:function(t){var n=D(this),e=ho(n),r=he(t,1<arguments.length?arguments[1]:void 0,3);return Ie(e,function(t,e){if(r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{symmetricDifference:function(t){var e=D(this),n=new(Be(e,_t("Set")))(e),r=ce(n.delete),i=ce(n.add);return Ie(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),St({target:"Set",proto:!0,real:!0,forced:lt},{union:function(t){var e=D(this);return Ie(t,ce((e=new(Be(e,_t("Set")))(e)).add),{that:e}),e}});var lo=Math.floor;St({target:"Number",stat:!0},{isInteger:function(t){return!A(t)&&isFinite(t)&&lo(t)===t}}),Pt.Number.isInteger,St({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),Pt.Number.isNaN;var fo=function(t,e){return(fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function po(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}fo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var go=function(){return(go=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function vo(t,a,s,u){return new(s=s||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((u=u.apply(t,a||[])).next())})}function yo(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function mo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _o(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function wo(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Io(t){try{return Co.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var To={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Eo=function(t,e){if(!t)throw So(e)},So=function(t){return new Error("Firebase Database ("+To.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Co={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=o>>2,o=(3&o)<<4|s>>4,s=(15&s)<<2|(h=u?t[i+2]:0)>>6,h=63&h;u||(h=64,a||(s=64)),r.push(n[c],n[o],n[s],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wo(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,a,s=t[n++];s<128?e[r++]=String.fromCharCode(s):191<s&&s<224?(o=t[n++],e[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],a=t[n++],e[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();o=o<<2|a>>4,r.push(o),64!==s&&(a=a<<4&240|s>>2,r.push(a),64!==u&&(u|=s<<6&192,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function No(t){return ko(void 0,t)}function ko(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ko(t[n],e[n]));return t}var Ao=(Ro.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},Ro);function Ro(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Oo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Po(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oo())}function Do(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function xo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Lo(){return!0===To.NODE_ADMIN}function Mo(){return"indexedDB"in self&&null!=indexedDB}function Fo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Uo(){return navigator&&navigator.cookieEnabled}var jo,qo="FirebaseError",Vo=(po(Bo,jo=Error),Bo);function Bo(t,e,n){return(e=jo.call(this,e)||this).code=t,e.customData=n,e.name=qo,Object.setPrototypeOf(e,Bo.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Ko.prototype.create),e}var Ko=(Wo.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=(t=this.errors[t])?(r=i,t.replace(Ho,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new Vo(o,t,i)},Wo);function Wo(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ho=/\{\$([^}]+)}/g;function Go(t){return JSON.parse(t)}function zo(t){return JSON.stringify(t)}function Qo(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Go(Io(o[0])||""),n=Go(Io(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Yo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Jo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $o(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var Zo=(ta.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ta.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],h=this.chain_[4],r=0;r<80;r++)var l=r<40?r<20?(o=c^s&(u^c),1518500249):(o=s^u^c,1859775393):r<60?(o=s&u|c&(s|u),2400959708):(o=s^u^c,3395469782),i=(a<<5|a>>>27)+o+h+l+n[r]&4294967295,h=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},ta.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},ta.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},ta);function ta(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function ea(t,e){return(e=new na(t,e)).subscribe.bind(e)}var na=(ra.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},ra.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},ra.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},ra.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");return void 0===(r=function(t){if("object"==typeof t&&null!==t)for(var e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=ia),void 0===r.error&&(r.error=ia),void 0===r.complete&&(r.complete=ia),n=this.unsubscribeOne.bind(this,this.observers.length),this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},ra.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ra.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},ra.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},ra.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},ra);function ra(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function ia(){}function oa(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function aa(t,e){return t+" failed: "+e+" argument "}function sa(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(aa(t,e)+"must be a valid function.")}function ua(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(aa(t,e)+"must be a valid context object.")}function ca(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var ha=1e3,la=2,fa=144e5,pa=.5;function da(t,e,n){return void 0===n&&(n=la),n=(e=void 0===e?ha:e)*Math.pow(n,t),t=Math.round(pa*n*(Math.random()-.5)*2),Math.min(fa,n+t)}function ga(t){return t&&t._delegate?t._delegate:t}var va=(ya.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},ya.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},ya.prototype.setServiceProps=function(t){return this.serviceProps=t,this},ya.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},ya);function ya(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var ma="[DEFAULT]",ba=(_a.prototype.get=function(t){void 0===t&&(t=ma);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Ao;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},_a.prototype.getImmediate=function(t){var t=(e=go({identifier:ma,optional:!1},t)).identifier,e=e.optional,n=this.normalizeInstanceIdentifier(t);if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(e)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(e)return null;throw t}},_a.prototype.getComponent=function(){return this.component},_a.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ma})}catch(t){}try{for(var r=mo(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=bo(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},_a.prototype.clearInstance=function(t){void 0===t&&(t=ma),this.instancesDeferred.delete(t),this.instances.delete(t)},_a.prototype.delete=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(_o(_o([],bo(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),bo(e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return t.sent(),[2]}})})},_a.prototype.isComponentSet=function(){return null!=this.component},_a.prototype.isInitialized=function(t){return void 0===t&&(t=ma),this.instances.has(t)},_a.prototype.initialize=function(t){var e,n,r=void 0===(r=(t=void 0===t?{}:t).instanceIdentifier)?ma:r,t=void 0===(t=t.options)?{}:t,i=this.normalizeInstanceIdentifier(r);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:t});try{for(var a=mo(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var u=(c=bo(s.value,2))[0],c=c[1];i===this.normalizeInstanceIdentifier(u)&&c.resolve(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o},_a.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,t=void 0===n?{}:n,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===ma?void 0:n,options:t}),this.instances.set(e,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(t){}return r||null},_a.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ma},_a.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},_a);function _a(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var wa=(Ia.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ia.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ia.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ba(t,this);return this.providers.set(t,e),e},Ia.prototype.getProviders=function(){return Array.from(this.providers.values())},Ia);function Ia(t){this.name=t,this.providers=new Map}var Ta,Ea=[];function Sa(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ka[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,_o(["["+i+"]  "+t.name+":"],n))}}(Gn=Ta=Ta||{})[Gn.DEBUG=0]="DEBUG",Gn[Gn.VERBOSE=1]="VERBOSE",Gn[Gn.INFO=2]="INFO",Gn[Gn.WARN=3]="WARN",Gn[Gn.ERROR=4]="ERROR",Gn[Gn.SILENT=5]="SILENT";var Ca={debug:Ta.DEBUG,verbose:Ta.VERBOSE,info:Ta.INFO,warn:Ta.WARN,error:Ta.ERROR,silent:Ta.SILENT},Na=Ta.INFO,ka=((ft={})[Ta.DEBUG]="log",ft[Ta.VERBOSE]="log",ft[Ta.INFO]="info",ft[Ta.WARN]="warn",ft[Ta.ERROR]="error",ft),Aa=(Object.defineProperty(Ra.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ta))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),Ra.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ca[t]:t},Object.defineProperty(Ra.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ra.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),Ra.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_o([this,Ta.DEBUG],t)),this._logHandler.apply(this,_o([this,Ta.DEBUG],t))},Ra.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_o([this,Ta.VERBOSE],t)),this._logHandler.apply(this,_o([this,Ta.VERBOSE],t))},Ra.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_o([this,Ta.INFO],t)),this._logHandler.apply(this,_o([this,Ta.INFO],t))},Ra.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_o([this,Ta.WARN],t)),this._logHandler.apply(this,_o([this,Ta.WARN],t))},Ra.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_o([this,Ta.ERROR],t)),this._logHandler.apply(this,_o([this,Ta.ERROR],t))},Ra);function Ra(t){this.name=t,this._logLevel=Na,this._logHandler=Sa,this._userLogHandler=null,Ea.push(this)}function Oa(e){Ea.forEach(function(t){t.setLogLevel(e)})}var Gn=((lt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",lt["bad-app-name"]="Illegal App name: '{$appName}",lt["duplicate-app"]="Firebase App named '{$appName}' already exists",lt["app-deleted"]="Firebase App named '{$appName}' already deleted",lt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",lt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",lt),Pa=new Ko("app","Firebase",Gn),mt="@firebase/app",Da="[DEFAULT]",xa=((ft={})[mt]="fire-core",ft["@firebase/analytics"]="fire-analytics",ft["@firebase/auth"]="fire-auth",ft["@firebase/database"]="fire-rtdb",ft["@firebase/functions"]="fire-fn",ft["@firebase/installations"]="fire-iid",ft["@firebase/messaging"]="fire-fcm",ft["@firebase/performance"]="fire-perf",ft["@firebase/remote-config"]="fire-rc",ft["@firebase/storage"]="fire-gcs",ft["@firebase/firestore"]="fire-fst",ft["fire-js"]="fire-js",ft["firebase-wrapper"]="fire-js-all",ft),La=new Aa("@firebase/app"),Ma=(Object.defineProperty(Fa.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Fa.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Fa.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Fa.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Fa.prototype._getService=function(t,e){return void 0===e&&(e=Da),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Fa.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Da),this.container.getProvider(t).clearInstance(e)},Fa.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){La.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Fa.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Fa.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Fa.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Pa.create("app-deleted",{appName:this.name_})},Fa);function Fa(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=No(t),this.container=new wa(e.name),this._addComponent(new va("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}Ma.prototype.name&&Ma.prototype.options||Ma.prototype.delete||console.log("dc");function Ua(a){var s={},u=new Map,c={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={}),"object"==typeof e&&null!==e||(e={name:e});var n=e;if(void 0===n.name&&(n.name=Da),"string"!=typeof(e=n.name)||!e)throw Pa.create("bad-app-name",{appName:String(e)});if(Yo(s,e))throw Pa.create("duplicate-app",{appName:e});return n=new a(t,n,c),s[e]=n},app:h,registerVersion:function(t,e,n){var r=null!==(i=xa[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t)return n=['Unable to register library "'+r+'" with version "'+e+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void La.warn(n.join(" "));o(new va(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:Oa,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Pa.create("invalid-log-argument");!function(a,e){for(var t=0,n=Ea;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=Ca[e.level]),t.userLogHandler=null===a?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&a({level:Ta[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}(t,e)},apps:null,SDK_VERSION:"8.4.2",INTERNAL:{registerComponent:o,removeApp:function(t){delete s[t]},components:u,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function h(t){if(!Yo(s,t=t||Da))throw Pa.create("no-app",{appName:t});return s[t]}function o(n){var t,r=n.name;if(u.has(r))return La.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?c[r]:null;u.set(r,n),"PUBLIC"===n.type&&(t=function(t){if("function"!=typeof(t=void 0===t?h():t)[r])throw Pa.create("invalid-app-argument",{appName:r});return t[r]()},void 0!==n.serviceProps&&ko(t,n.serviceProps),c[r]=t,a.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])});for(var e=0,i=Object.keys(s);e<i.length;e++){var o=i[e];s[o]._addComponent(n)}return"PUBLIC"===n.type?c[r]:null}return c.default=c,Object.defineProperty(c,"apps",{get:function(){return Object.keys(s).map(function(t){return s[t]})}}),h.App=a,c}var lt=function t(){var e=Ua(Ma);return e.INTERNAL=go(go({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ko(e,t)},createSubscribe:ea,ErrorFactory:Ko,deepExtend:ko}),e}(),ja=(qa.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){return"VERSION"===(null==(e=(e=t).getComponent())?void 0:e.type)?(t=t.getImmediate()).library+"/"+t.version:null;var e}).filter(function(t){return t}).join(" ")},qa);function qa(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(La.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(nu=self.firebase.SDK_VERSION)&&0<=nu.indexOf("LITE")&&La.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Va=lt.initializeApp;lt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&La.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Va.apply(void 0,t)};var jl=lt;(vt=jl).INTERNAL.registerComponent(new va("platform-logger",function(t){return new ja(t)},"PRIVATE")),vt.registerVersion(mt,"0.6.20",void 0),vt.registerVersion("fire-js",""),jl.registerVersion("firebase","8.4.2","app"),function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}("Promise",function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function s(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.v(t):this.h(t)}},a.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return a.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},a.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new a(function(t,e){r=t,i=e});return this.Qa(n(t,r),n(e,i)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},a.resolve=s,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(i){return new a(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())s(r.value).Qa(t,e)})},a.all=function(t){var e=c(t),o=e.next();return o.done?s([]):new a(function(n,t){for(var r=[],i=0;r.push(void 0),i++,s(o.value).Qa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},a});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,s=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function a(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==p(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:y).apply(null,arguments)}function b(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t){return t}function I(t,e,n){this.code=S+t,this.message=e||C[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(S.length),t.message,t.serverResponse):null}_(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var E,S="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in N)if(N[e].id===t)return t=N[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function R(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,R):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function P(t){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}E=k("__EID__")?"__EID__":void 0,_(R,Error),R.prototype.name="CustomError",_(O,R),O.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var M=new D(function(){return new F},function(t){t.reset()});function F(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,a="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in a&&(n=a[s],e.call(void 0,n,s,t)&&(i[o++]=n));return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=U(t,e)}function W(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&Array.prototype.splice.call(n,e,1).length})}function G(){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,J=/</g,$=/>/g,Z=/"/g,tt=/'/g,et=/\x00/g,nt=/[\x00&<>"']/;function rt(t,e){return-1!=t.indexOf(e)}function it(t,e){return t<e?-1:e<t?1:0}var ot=l.navigator;function at(t){return rt(Q,t)}function st(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}Q=(ot=ot&&ot.userAgent)?ot:"";var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ht.length;i++)e=ht[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument;if((n=(n=n&&(n.defaultView||n.parentWindow))||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(v(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.sa=!0,pt.prototype.ra=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var gt,vt={},yt={};function mt(){if(void 0===gt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:w,createScript:w,createScriptURL:w})}catch(t){l.console&&l.console.error(t.message)}gt=t}else gt=t}return gt}function bt(t,e){this.a=e===Et?t:""}function _t(t){return t instanceof bt&&t.constructor===bt?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function wt(t,n){var e,r=dt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new bt(e=(t=mt())?t.createScriptURL(e):e,Et)}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Et={};function St(t,e){this.a=e===Pt?t:""}function Ct(t){return t instanceof St&&t.constructor===St?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}St.prototype.sa=!0,St.prototype.ra=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,At=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){return t instanceof St?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=At.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(kt))&&Nt.test(e[1])?new St(t,Pt):null);var e}function Ot(t){return t instanceof St?t:(t="object"==typeof t&&t.sa?t.ra():String(t),new St(t=At.test(t)?t:"about:invalid#zClosurez",Pt))}var Pt={},Dt=new St("about:invalid#zClosurez",Pt);function xt(t,e,n){this.a=n===Lt?t:""}xt.prototype.sa=!0,xt.prototype.ra=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Lt={};function Mt(t,e,n,r){return t=t instanceof St?t:Ot(t),e=e||l,n=n instanceof pt?dt(n):n||"",e.open(Ct(t),n,r,void 0)}function Ft(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return nt.test(t)&&-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace(X,"&amp;"):t).indexOf("<")?t.replace(J,"&lt;"):t).indexOf(">")?t.replace($,"&gt;"):t).indexOf('"')?t.replace(Z,"&quot;"):t).indexOf("'")?t.replace(tt,"&#39;"):t).indexOf("\0")&&(t=t.replace(et,"&#0;")),t}function jt(t){return jt[" "](t),t}jt[" "]=a;var qt,Vt=at("Opera"),Bt=at("Trident")||at("MSIE"),Kt=at("Edge"),Wt=Kt||Bt,Ht=at("Gecko")&&!(rt(Q.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Gt=rt(Q.toLowerCase(),"webkit")&&!at("Edge");function zt(){var t=l.document;return t?t.documentMode:void 0}var Qt="",ot=(ot=Q,Ht?/rv:([^\);]+)(\)|;)/.exec(ot):Kt?/Edge\/([\d\.]+)/.exec(ot):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ot):Gt?/WebKit\/(\S+)/.exec(ot):Vt?/(?:Version)[ \/]?(\S+)/.exec(ot):void 0);ot&&(Qt=ot?ot[1]:""),qt=Bt&&null!=(ot=zt())&&ot>parseFloat(Qt)?String(ot):Qt;var Yt={};function Xt(s){return t=s,e=function(){for(var t=0,e=Y(String(qt)).split("."),n=Y(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",a=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(t=it(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||it(0==o[2].length,0==a[2].length)||it(o[2],a[2]),o=o[3],a=a[3],0==t););return 0<=t},n=Yt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var Jt=l.document&&Bt&&(zt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var $t=!Bt||9<=Number(Jt);function Zt(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function te(n,t){st(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:re.hasOwnProperty(e)?n.setAttribute(re[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var ee,ne,re={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ie(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function oe(t){l.setTimeout(function(){throw t},0)}function ae(t,e){var n;ne=ne||(l.Promise&&l.Promise.resolve?(n=l.Promise.resolve(void 0),function(){n.then(ce)}):function(){var t=ce;!g(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ee=ee||function(){var t=l.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")?function(){(r=ie(document,"IFRAME")).style.display="none",document.documentElement.appendChild(r);var t=r.contentWindow;(r=t.document).open(),r.close();var e="callImmediate"+Math.random(),n="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,r=m(function(t){"*"!=n&&t.origin!=n||t.data!=e||this.port1.onmessage()},this);t.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(e,n)}}}:t)||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}),se||(ne(),se=!0),ue.add(t,e)}var se=!1,ue=new L;function ce(){for(var t,e,n;n=e=void 0,n=null,(e=ue).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){oe(t)}x(M,t)}se=!1}function he(t,e){if(this.a=le,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Te(n,fe,t)},function(t){if(!(t instanceof Re))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Te(n,pe,t)})}catch(t){Te(this,pe,t)}}var le=0,fe=2,pe=3;function de(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}de.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ge=new D(function(){return new de},function(t){t.reset()});function ve(t,e,n){var r=ge.get();return r.g=t,r.b=e,r.f=n,r}function ye(t){if(t instanceof he)return t;var e=new he(a);return Te(e,fe,t),e}function me(n){return new he(function(t,e){e(n)})}function be(t,e,n){Ee(t,e,n,null)||ae(b(e,t))}function _e(n){return new he(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Pb:!0,value:n}:{Pb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)be(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function we(t,e){t.b||t.a!=fe&&t.a!=pe||Se(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ie(t,i,o,a){var e=ve(null,null,null);return e.a=new he(function(n,r){e.g=i?function(t){try{var e=i.call(a,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(a,t);void 0===e&&t instanceof Re?r(t):n(e)}catch(t){r(t)}}:r}),we(e.a.c=t,e),e.a}function Te(t,e,n){var r,i;t.a==le&&(t===n&&(e=pe,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ee(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Se(t),e!=pe||n instanceof Re||(i=n,(r=t).g=!0,ae(function(){r.g&&Ae.call(null,i)}))))}function Ee(t,e,n,r){if(t instanceof he)return we(t,ve(e||a,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;return g(i)?(function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1):void 0}catch(t){return n.call(r,t),1}}function Se(t){t.h||(t.h=!0,ae(t.gc,t))}function Ce(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ne(t,e,n,r){if(n==pe&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ke(e,n,r);else try{e.c?e.g.call(e.f):ke(e,n,r)}catch(t){Ae.call(null,t)}x(ge,e)}function ke(t,e,n){e==fe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}he.prototype.then=function(t,e,n){return Ie(this,g(t)?t:null,g(e)?e:null,n)},he.prototype.$goog_Thenable=!0,(t=he.prototype).oa=function(t,e){return(t=ve(t,t,e)).c=!0,we(this,t),this},t.o=function(t,e){return Ie(this,null,t,e)},t.cancel=function(t){var e;this.a==le&&(e=new Re(t),ae(function(){!function t(e,n){if(e.a==le)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,!((o=s.a==e?s:o)&&1<i)));s=s.next)o||(a=s);o&&(r.a==le&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Ce(r),Ne(r,o,pe,n)))}e.c=null}else Te(e,pe,n)}(this,e)},this))},t.$c=function(t){this.a=le,Te(this,fe,t)},t.ad=function(t){this.a=le,Te(this,pe,t)},t.gc=function(){for(var t;t=Ce(this);)Ne(this,t,this.a,this.i);this.h=!1};var Ae=oe;function Re(t){R.call(this,t)}function Oe(){this.xa=this.xa,this.pa=this.pa}_(Re,R);var Pe=0;function De(t){t.xa||(t.xa=!0,t.Da(),0==Pe)||Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r)}Oe.prototype.xa=!(Re.prototype.name="cancel"),Oe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qt=Object.freeze||function(t){return t},xe=!Bt||9<=Number(Jt),Le=Bt&&!Xt("9"),Me=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",a,e),l.removeEventListener("test",a,e)}catch(t){}return t}();function Fe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ue(t,e){if(Fe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{jt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:je[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Fe.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ue,Fe);var je=Qt({2:"touch",3:"pen",4:"mouse"});Ue.prototype.preventDefault=function(){Ue.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Le)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ue.prototype.g=function(){return this.a};var qe="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function Be(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ve,this.va=this.Pa=!1}function Ke(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function We(t){this.src=t,this.a={},this.b=0}function He(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ke(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ge(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}We.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Ge(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new Be(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var ze="closure_lm_"+(1e6*Math.random()|0),Qe={};function Ye(t,e,n,r,i){if(r&&r.once)Je(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else n=sn(n),t&&t[qe]?cn(t,e,n,v(r)?!!r.capture:!!r,i):Xe(t,e,n,!1,r,i)}function Xe(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s,u=v(i)?!!i.capture:!!i,c=on(t);if(c||(t[ze]=c=new We(t)),!(n=c.add(e,n,r,u,o)).proxy)if(a=rn,r=s=xe?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=Me?i:u)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Je(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);else n=sn(n),t&&t[qe]?hn(t,e,n,v(r)?!!r.capture:!!r,i):Xe(t,e,n,!0,r,i)}function $e(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=sn(n),t&&t[qe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=Ge(o=t.a[e],n,r,i))&&(Ke(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&on(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Ge(e,n,r,i):t)?e[t]:null)&&Ze(n))}function Ze(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[qe]?He(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=on(e))?(He(n,t),0==n.b&&(n.src=null,e[ze]=null)):Ke(t)))}function tn(t){return t in Qe?Qe[t]:Qe[t]="on"+t}function en(t,e,n,r){var i=!0;if((t=on(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=nn(o,r),i=i&&!1!==o)}return i}function nn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&Ze(t),n.call(r,e)}function rn(t,e){if(t.va)return!0;if(xe)return nn(t,new Ue(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ue(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=en(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=en(r[i],t,!1,e),n=n&&o}return n}function on(t){return(t=t[ze])instanceof We?t:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function sn(e){return g(e)?e:(e[an]||(e[an]=function(t){return e.handleEvent(t)}),e[an])}function un(){Oe.call(this),this.v=new We(this),(this.ac=this).gb=null}function cn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function hn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function ln(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.va&&u.capture==n&&(a=u.listener,s=u.Va||u.src,u.Pa&&He(t.v,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}function fn(t,e,n){if(g(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function pn(n){var r=null;return new he(function(t,e){-1==(r=fn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function dn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function gn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function vn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof vn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function yn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];mn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)mn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(un,Oe),un.prototype[qe]=!0,un.prototype.addEventListener=function(t,e,n,r){Ye(this,t,e,n,r)},un.prototype.removeEventListener=function(t,e,n,r){$e(this,t,e,n,r)},un.prototype.dispatchEvent=function(t){var e;if(n=this.gb)for(e=[];n;n=n.gb)e.push(n);var n=this.ac,r=t.type||t;if("string"==typeof t?t=new Fe(t,n):t instanceof Fe?t.target=t.target||n:(a=t,lt(t=new Fe(r,n),a)),a=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],a=ln(o,r,!0,t)&&a;if(a=ln(o=t.b=n,r,!0,t)&&a,a=ln(o,r,!1,t)&&a,e)for(i=0;i<e.length;i++)a=ln(o=t.b=e[i],r,!1,t)&&a;return a},un.prototype.Da=function(){if(un.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ke(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=vn.prototype).W=function(){yn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return yn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return mn(this.b,t)?this.b[t]:e},t.set=function(t,e){mn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _n(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof _n?(this.i=void 0!==e?e:t.i,wn(this,t.c),this.l=t.l,this.a=t.a,In(this,t.g),this.f=t.f,Tn(this,Bn(t.b)),this.h=t.h):t&&(n=String(t).match(bn))?(this.i=!!e,wn(this,n[1]||"",!0),this.l=kn(n[2]||""),this.a=kn(n[3]||"",!0),In(this,n[4]),this.f=kn(n[5]||"",!0),Tn(this,n[6]||"",!0),this.h=kn(n[7]||"")):(this.i=!!e,this.b=new Mn(null,this.i))}function wn(t,e,n){t.c=n?kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function In(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Tn(t,e,n){var r,i;e instanceof Mn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(Fn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(jn(this,e),Vn(this,n,t))},r)),r.f=i):(n||(e=An(e,xn)),t.b=new Mn(e,t.i))}function En(t,e,n){t.b.set(e,n)}function Sn(t,e){return t.b.get(e)}function Cn(t){return t instanceof _n?new _n(t):new _n(t,void 0)}function Nn(t,e,n,r){var i=new _n(null,void 0);return t&&wn(i,t),e&&(i.a=e),n&&In(i,n),r&&(i.f=r),i}function kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function An(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Rn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Rn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}_n.prototype.toString=function(){var t=[],e=this.c;e&&t.push(An(e,On,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(An(e,On,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(An(n,"/"==n.charAt(0)?Dn:Pn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",An(n,Ln)),t.join("")},_n.prototype.resolve=function(t){var e=new _n(this),n=!!t.c;n?wn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)In(e,t.g);else if(n=!!t.f)if("/"!=r.charAt(0)&&(this.a&&!this.f?r="/"+r:-1!=(i=e.f.lastIndexOf("/"))&&(r=e.f.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(rt(i,"./")||rt(i,"/.")){for(var r=0==i.lastIndexOf("/",0),i=i.split("/"),o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i;return n?e.f=r:n=""!==t.b.toString(),n?Tn(e,Bn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var On=/[#\/\?@]/g,Pn=/[#\?:]/g,Dn=/[#\?]/g,xn=/[#\?@]/g,Ln=/#/g;function Mn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Fn(o){o.a||(o.a=new vn,o.b=0,o.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],r=n,i=i?decodeURIComponent(i.replace(/\+/g," ")):"",o.add(decodeURIComponent(r.replace(/\+/g," ")),i)}}}(o.c))}function Un(t){var e=gn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Mn(null,void 0);t=dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Vn(n,i,o):n.add(i,o)}return n}function jn(t,e){Fn(t),e=Kn(t,e),mn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,mn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&yn(t)))}function qn(t,e){return Fn(t),e=Kn(t,e),mn(t.a.b,e)}function Vn(t,e,n){jn(t,e),0<n.length&&(t.c=null,t.a.set(Kn(t,e),z(n)),t.b+=n.length)}function Bn(t){var e=new Mn;return e.c=t.c,t.a&&(e.a=new vn(t.a),e.b=t.b),e}function Kn(t,e){return e=String(e),t.f?e.toLowerCase():e}function Wn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return r.push("]"),0}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(a=n[i],"function"!=typeof a&&(r.push(o),Qn(i,r),r.push(":"),t(e,a,r),o=","));return r.push("}"),0}n=n.valueOf()}switch(typeof n){case"string":Qn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Hn,t,e),e.join("")}function Hn(){}(t=Mn.prototype).add=function(t,e){Fn(this),this.c=null,t=Kn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Fn(this),this.a.forEach(function(t,e){j(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){Fn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Fn(this);var e=[];if("string"==typeof t)qn(this,t)&&(e=G(e,this.a.get(Kn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Fn(this),this.c=null,qn(this,t=Kn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.W(r),o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};var Gn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},zn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Qn(t,e){e.push('"',t.replace(zn,function(t){var e=Gn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Gn[t]=e),e}),'"')}function Yn(){var t=dr();return Bt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function Xn(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Jn(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(Rt(t)||Dt)),e.location.href=n}function $n(t){return!!((t=(t||dr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Zn(t){t=t||l.window;try{t.close()}catch(t){}}function tr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=dr().toLowerCase(),r&&(e.target=r,rt(n,"crios/")&&(e.target="_blank")),lr(dr())==cr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:Rt(void 0!==n.href?n.href:String(n))||Dt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(a=ie(document,"A"),"HTMLAnchorElement"),e=e instanceof St?e:Ot(e),a.href=Ct(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Mt("",r,n,a),t=Ct(e),a&&(Wt&&rt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new xt(t=(r=mt())?r.createHTML(t):t,0,Lt),r=a.document)&&(r.write((o=t)instanceof xt&&o.constructor===xt?o.a:(P("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(a=Mt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var er=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nr=/^[^@]+@[^@]+$/;function rr(){var e=null;return new he(function(t){"complete"==l.document.readyState?t():(e=function(){t()},Je(window,"load",e))}).o(function(t){throw $e(window,"load",e),t})}function ir(t){return t=t||dr(),!("file:"!==br()&&"ionic:"!==br()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function or(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function ar(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function sr(){return jl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":jl.INTERNAL.hasOwnProperty("node")?"Node":ar()?"Worker":"Browser"}function ur(){var t=sr();return"ReactNative"===t||"Node"===t}var cr="Firefox",hr="Chrome";function lr(t){var e=t.toLowerCase();return rt(e,"opera/")||rt(e,"opr/")||rt(e,"opios/")?"Opera":rt(e,"iemobile")?"IEMobile":rt(e,"msie")||rt(e,"trident/")?"IE":rt(e,"edge/")?"Edge":rt(e,"firefox/")?cr:rt(e,"silk/")?"Silk":rt(e,"blackberry")?"Blackberry":rt(e,"webos")?"Webos":!rt(e,"safari/")||rt(e,"chrome/")||rt(e,"crios/")||rt(e,"android")?!rt(e,"chrome/")&&!rt(e,"crios/")||rt(e,"edge/")?rt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":hr:"Safari"}var fr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function pr(t,e){e=e||[];var n,r=[],i={};for(n in fr)i[fr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=sr())?r=lr(i=dr()):"Worker"===r&&(r=lr(i=dr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function dr(){return l.navigator&&l.navigator.userAgent||""}function gr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length?void 0:e}function vr(){try{var t=l.localStorage,e=Er();if(t)return t.setItem(e,"1"),t.removeItem(e),!Yn()||!!l.indexedDB}catch(t){return ar()&&!!l.indexedDB}return!1}function yr(){return(mr()||"chrome-extension:"===br()||ir())&&!ur()&&vr()&&!ar()}function mr(){return"http:"===br()||"https:"===br()}function br(){return l.location&&l.location.protocol||null}function _r(t){return!$n(t=t||dr())&&lr(t)!=cr}function wr(t){return void 0===t?null:Wn(t)}function Ir(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Tr(t){if(null!==t)return JSON.parse(t)}function Er(t){return t||Math.floor(1e9*Math.random()).toString()}function Sr(t){return"Safari"!=lr(t=t||dr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Cr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Nr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=dr(),e=sr(),this.b=$n(t)||"ReactNative"===e}function kr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Ar(){var e=l.document,n=null;return kr()||!e?ye():new he(function(t){n=function(){kr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t})}function Rr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Or(){return gr("fireauth.oauthhelper",l)||gr("fireauth.iframe",l)}Nr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!mr()&&"chrome-extension:"!==br()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Pr,Dr={};function xr(t){Dr[t]||(Dr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Lr={};Object.defineProperty(Lr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Lr,"abcd",{configurable:!0,enumerable:!0,value:2}),Pr=2==Lr.abcd}catch(t){Pr=!1}function Mr(t,e,n){Pr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Fr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Mr(t,n,e[n])}function Ur(t){var e={};return Fr(e,t),e}function jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Mr(e,n,jr(t[n]));return e}function qr(t){var e=t&&(t[Hr]?"phone":null);if(!(e&&t&&t[Wr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");Mr(this,"uid",t[Wr]),Mr(this,"displayName",t[Br]||null);var n=null;Mr(this,"enrollmentTime",n=t[Kr]?new Date(t[Kr]).toUTCString():n),Mr(this,"factorId",e)}function Vr(t){try{var e=new Gr(t)}catch(t){e=null}return e}qr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Br="displayName",Kr="enrolledAt",Wr="mfaEnrollmentId",Hr="phoneInfo";function Gr(t){qr.call(this,t),Mr(this,"phoneNumber",t[Hr])}function zr(t){var e={},n=t[Jr],r=t[Zr],i=t[ti];if(t=Vr(t[$r]),!i||i!=Yr&&i!=Xr&&!n||i==Xr&&!r||i==Qr&&!t)throw Error("Invalid checkActionCode response!");i==Xr?(e[ni]=n||null,e[ii]=n||null,e[ei]=r):(e[ni]=r||null,e[ii]=r||null,e[ei]=n||null),e[ri]=t||null,Mr(this,ai,i),Mr(this,oi,jr(e))}_(Gr,qr),Gr.prototype.w=function(){var t=Gr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Qr="REVERT_SECOND_FACTOR_ADDITION",Yr="EMAIL_SIGNIN",Xr="VERIFY_AND_CHANGE_EMAIL",Jr="email",$r="mfaInfo",Zr="newEmail",ti="requestType",ei="email",ni="fromEmail",ri="multiFactorInfo",ii="previousEmail",oi="data",ai="operation";function si(t){var e=Sn(t=Cn(t),ui)||null,n=Sn(t,ci)||null,r=(r=Sn(t,fi)||null)&&di[r]||null;if(!e||!n||!r)throw new I("argument-error",ui+", "+ci+"and "+fi+" are required in a valid action code URL.");Fr(this,{apiKey:e,operation:r,code:n,continueUrl:Sn(t,hi)||null,languageCode:Sn(t,li)||null,tenantId:Sn(t,pi)||null})}var ui="apiKey",ci="oobCode",hi="continueUrl",li="languageCode",fi="mode",pi="tenantId",di={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Qr,signIn:Yr,verifyAndChangeEmail:Xr,verifyEmail:"VERIFY_EMAIL"};function gi(t){try{return new si(t)}catch(t){return null}}function vi(t){if(void 0===(e=t[wi]))throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[yi])&&"object"==typeof r){var e=r[Ei],n=r[Ii],r=r[Ti];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Ii+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ti+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",Ei+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",yi+" property must be a non null object when specified.");if(this.f=null,(e=t[_i])&&"object"==typeof e){if("string"==typeof(e=e[Si])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Si+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",_i+" property must be a non null object when specified.");if(void 0!==(e=t[bi])&&"boolean"!=typeof e)throw new I("argument-error",bi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[mi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",mi+" property must be a non empty string when specified.");this.i=t||null}var yi="android",mi="dynamicLinkDomain",bi="handleCodeInApp",_i="iOS",wi="url",Ii="installApp",Ti="minimumVersion",Ei="packageName",Si="bundleId";function Ci(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Ni=null;function ki(t){var e=Ri(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ai(t){try{return new ki(t)}catch(t){return null}}function Ri(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e,n=(4-(t=t[1]).length%4)%4,r=0;r<n;r++)t+=".";try{var i=(e=[],function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Ni[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Ni){Ni={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ni[o]&&(Ni[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),a=e(64),s=e(64);if(64===s&&-1===n)break;t(n<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(t,function(t){e.push(t)}),e);for(t=[],r=n=0;n<i.length;){var o,a,s,u=i[n++];u<128?t[r++]=String.fromCharCode(u):191<u&&u<224?(o=i[n++],t[r++]=String.fromCharCode((31&u)<<6|63&o)):239<u&&u<365?(s=((7&u)<<18|(63&(o=i[n++]))<<12|(63&(a=i[n++]))<<6|63&i[n++])-65536,t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))):(o=i[n++],a=i[n++],t[r++]=String.fromCharCode((15&u)<<12|(63&o)<<6|63&a))}return JSON.parse(t.join(""))}catch(t){}return null}ki.prototype.T=function(){return this.f},ki.prototype.l=function(){return this.c},ki.prototype.toString=function(){return this.h};var Oi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Pi=["client_id","response_type","scope","redirect_uri","state"],Di={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Pi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Pi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Pi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Oi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function xi(t){for(var e in Di)if(Di[e].fa==t)return Di[e];return null}function Li(t){var e={};e["facebook.com"]=qi,e["google.com"]=Bi,e["github.com"]=Vi,e["twitter.com"]=Ki;var n=t&&t[Fi];try{if(n)return new(e[n]||ji)(t);if(void 0!==t[Mi])return new Ui(t)}catch(t){}return null}var Mi="idToken",Fi="providerId";function Ui(t){var e,n=t[Fi];if(n||!t[Mi]||(e=Ai(t[Mi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Mr(this,"providerId",n),Mr(this,"isNewUser",e)}function ji(t){Ui.call(this,t),Mr(this,"profile",jr((t=Tr(t.rawUserInfo||"{}"))||{}))}function qi(t){if(ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vi(t){if(ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Mr(this,"username",this.profile&&this.profile.login||null)}function Bi(t){if(ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Mr(this,"username",t.screenName||null)}function Wi(t){var e=Sn(r=Cn(t),"link"),n=Sn(Cn(e),"link"),r=Sn(r,"deep_link_id");return Sn(Cn(r),"link")||r||n||e||t}function Hi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Gi:zi}_(ji,Ui),_(qi,ji),_(Vi,ji),_(Bi,ji),_(Ki,ji);var Gi="enroll",zi="signin";function Qi(){}function Yi(t,n){return t.then(function(t){if(t[Fa]){var e=Ai(t[Fa]);if(!e||n!=e.i)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==S+"user-not-found"?new I("user-mismatch"):t})}function Xi(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,Mr(this,"providerId",t),Mr(this,"signInMethod",t)}function Ji(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function $i(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Xi(t.providerId,t.pendingToken)}catch(t){}return null}function Zi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Mr(this,"idToken",e.idToken),e.accessToken&&Mr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Mr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");Mr(this,"accessToken",e.oauthToken),Mr(this,"secret",e.oauthTokenSecret)}Mr(this,"providerId",t),Mr(this,"signInMethod",n)}function to(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Un(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function eo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Zi(t.providerId,e,t.signInMethod)}catch(t){}}return null}function no(t,e){this.Qc=e||[],Fr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(xi(t)||{}).Ja||null,this.ob=null}function ro(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');no.call(this,t,[])}function io(t){no.call(this,t,Pi),this.a=[]}function oo(){io.call(this,"facebook.com")}function ao(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new oo).credential({accessToken:e})}function so(){io.call(this,"github.com")}function uo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new so).credential({accessToken:e})}function co(){io.call(this,"google.com"),this.Ca("profile")}function ho(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new co).credential({idToken:n,accessToken:e})}function lo(){no.call(this,"twitter.com",Oi)}function fo(t,e){var n=t;if(!(n=v(n)?n:{oauthToken:t,oauthTokenSecret:e}).oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Zi("twitter.com",n,"twitter.com")}function po(t,e,n){this.a=t,this.f=e,Mr(this,"providerId","password"),Mr(this,"signInMethod",n===vo.EMAIL_LINK_SIGN_IN_METHOD?vo.EMAIL_LINK_SIGN_IN_METHOD:vo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function go(t){return t&&t.email&&t.password?new po(t.email,t.password,t.signInMethod):null}function vo(){Fr(this,{providerId:"password",isOAuthProvider:!1})}function yo(t,e){if(!(e=mo(e)))throw new I("argument-error","Invalid email link!");return new po(t,e.code,vo.EMAIL_LINK_SIGN_IN_METHOD)}function mo(t){return(t=gi(t=Wi(t)))&&t.operation===Yr?t:null}function bo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new I("internal-error");this.a=t,Mr(this,"providerId","phone"),this.fa="phone",Mr(this,"signInMethod","phone")}function _o(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return j(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new bo(n)}return null}function wo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Io(t){try{this.a=t||jl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Fr(this,{providerId:"phone",isOAuthProvider:!1})}function To(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new bo({eb:t,cb:e})}function Eo(t){if(t.temporaryProof&&t.phoneNumber)return new bo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ho(o,n);case"facebook.com":return ao(n);case"github.com":return uo(n);case"twitter.com":return fo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Xi(e,a):new Zi(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new io(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function So(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function Co(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function No(t){return(t=t||{}).type?new Co(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function ko(){this.b=null,this.a=[]}Hi.prototype.Ha=function(){return this.a?ye(this.a):ye(this.b)},Hi.prototype.w=function(){return this.type==Gi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Qi.prototype.ka=function(){},Qi.prototype.b=function(){},Qi.prototype.c=function(){},Qi.prototype.w=function(){},Xi.prototype.ka=function(t){return is(t,Ji(this))},Xi.prototype.b=function(t,e){var n=Ji(this);return n.idToken=e,os(t,n)},Xi.prototype.c=function(t,e){return Yi(as(t,Ji(this)),e)},Xi.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Zi.prototype.ka=function(t){return is(t,to(this))},Zi.prototype.b=function(t,e){var n=to(this);return n.idToken=e,os(t,n)},Zi.prototype.c=function(t,e){return Yi(as(t,to(this)),e)},Zi.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},no.prototype.Ka=function(t){return this.Ib=ct(t),this},_(ro,no),_(io,no),io.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},io.prototype.Qb=function(){return z(this.a)},io.prototype.credential=function(t,e){if(!(e=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new Zi(this.providerId,e,this.providerId)},_(oo,io),Mr(oo,"PROVIDER_ID","facebook.com"),Mr(oo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(so,io),Mr(so,"PROVIDER_ID","github.com"),Mr(so,"GITHUB_SIGN_IN_METHOD","github.com"),_(co,io),Mr(co,"PROVIDER_ID","google.com"),Mr(co,"GOOGLE_SIGN_IN_METHOD","google.com"),_(lo,no),Mr(lo,"PROVIDER_ID","twitter.com"),Mr(lo,"TWITTER_SIGN_IN_METHOD","twitter.com"),po.prototype.ka=function(t){return this.signInMethod==vo.EMAIL_LINK_SIGN_IN_METHOD?Vs(t,ds,{email:this.a,oobCode:this.f}):Vs(t,Ms,{email:this.a,password:this.f})},po.prototype.b=function(t,e){return this.signInMethod==vo.EMAIL_LINK_SIGN_IN_METHOD?Vs(t,gs,{idToken:e,email:this.a,oobCode:this.f}):Vs(t,ks,{idToken:e,email:this.a,password:this.f})},po.prototype.c=function(t,e){return Yi(this.ka(t),e)},po.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Fr(vo,{PROVIDER_ID:"password"}),Fr(vo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Fr(vo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),bo.prototype.ka=function(t){return t.fb(wo(this))},bo.prototype.b=function(t,e){var n=wo(this);return n.idToken=e,Vs(t,Us,n)},bo.prototype.c=function(t,e){var n=wo(this);return n.operation="REAUTH",Yi(t=Vs(t,js,n),e)},bo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Io.prototype.fb=function(r,i){var o=this.a.a;return ye(i.verify()).then(function(e){if("string"!=typeof e)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=v(r)?r.session:null,n=v(r)?r.phoneNumber:r;return(t=t&&t.type==Gi?t.Ha().then(function(t){return Vs(o,Rs,{idToken:t,phoneEnrollmentInfo:{phoneNumber:n,recaptchaToken:e}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==zi?t.Ha().then(function(t){return t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}},Vs(o,Os,t).then(function(t){return t.phoneResponseInfo.sessionInfo})}):Vs(o,Cs,{phoneNumber:n,recaptchaToken:e})).then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},Fr(Io,{PROVIDER_ID:"phone"}),Fr(Io,{PHONE_SIGN_IN_METHOD:"phone"}),Co.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Co.prototype.T=function(){return this.h},Co.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ao,Ro=null;function Oo(t){var e="unauthorized-domain",n=void 0,r=Cn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Po(t,e,n){I.call(this,t,n),(t=e||{}).Jb&&Mr(this,"email",t.Jb),t.ea&&Mr(this,"phoneNumber",t.ea),t.credential&&Mr(this,"credential",t.credential),t.Zb&&Mr(this,"tenantId",t.Zb)}function Do(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:Eo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Po(e,n,t.message)}return null}function xo(){}function Lo(t){return t.c||(t.c=t.b())}function Mo(){}function Fo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Uo(){}function jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.qc,this),this.a.onerror=m(this.Sb,this),this.a.onprogress=m(this.rc,this),this.a.ontimeout=m(this.vc,this)}function qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Vo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Bo(t){this.f=t,this.b=this.c=this.a=null}function Ko(t,e){this.name=t,this.value=e}_(Oo,I),_(Po,I),Po.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&lt(t,e),t},Po.prototype.toJSON=function(){return this.w()},xo.prototype.c=null,_(Mo,xo),Mo.prototype.a=function(){var t=Fo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Mo.prototype.b=function(){var t={};return Fo(this)&&(t[0]=!0,t[1]=!0),t},Ao=new Mo,_(Uo,xo),Uo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new jo;throw Error("Unsupported browser")},Uo.prototype.b=function(){return{}},(t=jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,qo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",qo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,qo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Vo.prototype.a=null,Vo.prototype.reset=function(t,e,n,r,i){delete this.a},Ko.prototype.toString=function(){return this.name};var Wo=new Ko("SEVERE",1e3),Ho=new Ko("WARNING",900),Go=new Ko("CONFIG",700),zo=new Ko("FINE",500);Bo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(P("Root logger has no level set."),null))}(this).value)for(g(e)&&(e=e()),t=new Vo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Qo,Yo={},Xo=null;function Jo(t){var e,n,r;return Xo||(Xo=new Bo(""),(Yo[""]=Xo).c=Go),(e=Yo[t])||(e=new Bo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=Jo(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Yo[t]=e),e}function $o(t,e){t&&t.log(zo,e,void 0)}function Zo(t){this.f=t}function ta(t){un.call(this),this.u=t,this.h=void 0,this.readyState=ea,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Jo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(Zo,xo),Zo.prototype.a=function(){return new ta(this.f)},Zo.prototype.b=(Qo={},function(){return Qo}),_(ta,un);var ea=0;function na(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ra(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ia(t)}function ia(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function oa(t){un.call(this),this.headers=new vn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=aa,this.u=this.S=!1}(t=ta.prototype).open=function(t,e){if(this.readyState!=ea)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ia(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ra(this)),this.readyState=ea},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ia(this)),this.a&&(this.readyState=3,ia(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,na(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?ra:ia)(this),3==this.readyState&&na(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,ra(this))},t.sc=function(t){this.a&&(this.response=t,ra(this))},t.Ua=function(t){var e=this.i;e&&e.log(Ho,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ra(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Ho,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b)return(t=this.i)&&t.log(Ho,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(oa,un);var aa="";oa.prototype.b=Jo("goog.net.XhrIo");var sa=/^https?$/i,ua=["POST","PUT"];function ca(t){return"content-type"==t.toLowerCase()}function ha(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,la(t),pa(t)}function la(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function fa(t){if(t.c&&void 0!==h)if(t.C[1]&&4==ga(t)&&2==va(t))$o(t.b,ya(t,"Local request error detected and ignored"));else if(t.i&&4==ga(t))fn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==ga(t)){$o(t.b,ya(t,"Request complete")),t.c=!1;try{var e,n,r,i,o=va(t);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}if((e=a)||((n=0===o)&&(!(i=String(t.l).match(bn)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!sa.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<ga(t)?t.a.statusText:""}catch(e){$o(t.b,"Can not get status: "+e.message),s=""}t.h=s+" ["+va(t)+"]",la(t)}}finally{pa(t)}}}function pa(t,e){if(t.a){da(t);var n=t.a,r=t.C[0]?a:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Wo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function da(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ga(t){return t.a?t.a.readyState:0}function va(t){try{return 2<ga(t)?t.a.status:-1}catch(t){return-1}}function ya(t,e){return e+" ["+t.R+" "+t.l+" "+va(t)+"]"}function ma(t){var e=Aa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ba(t,e,n){t.a=!0,t.c=n,t.f=!e,Ta(t)}function _a(t){if(t.a){if(!t.v)throw new Ea;t.v=!1}}function wa(t,e,n,r){t.g.push([e,n,r]),t.a&&Ta(t)}function Ia(t){return B(t.g,function(t){return g(t[1])})}function Ta(t){var e;t.h&&t.a&&Ia(t)&&(n=t.h,(e=Na[n])&&(l.clearTimeout(e.a),delete Na[n]),t.h=0),t.b&&(t.b.l--,delete t.b);for(var n=t.c,r=e=!1;t.g.length&&!t.i;){var i=(a=t.g.shift())[0],o=a[1],a=a[2];if(i=t.f?o:i)try{var s=i.call(a||t.s,n);void 0!==s&&(t.f=t.f&&(s==n||s instanceof Error),t.c=n=s),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(r=!0,t.i=!0)}catch(r){n=r,t.f=!0,Ia(t)||(e=!0)}}t.c=n,r&&(s=m(t.m,t,!0),r=m(t.m,t,!1),n instanceof ma?(wa(n,s,r),n.C=!0):n.then(s,r)),e&&(n=new Ca(n),Na[n.a]=n,t.h=n.a)}function Ea(){R.call(this)}function Sa(){R.call(this)}function Ca(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=oa.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",$o(this.b,ya(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&($o(this.b,ya(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),pa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),pa(this,!0)),oa.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?fa(this):this.Jc())},t.Jc=function(){fa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case aa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Wo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return $o(this.b,"Can not get response: "+t.message),null}},ma.prototype.cancel=function(t){var e;this.a?this.c instanceof ma&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Sa,_a(this),ba(this,!1,t)))},ma.prototype.m=function(t,e){this.i=!1,ba(this,t,e)},ma.prototype.then=function(t,e,n){var r,i,o=new he(function(t,e){r=t,i=e});return wa(this,r,function(t){t instanceof Sa?o.cancel():i(t)}),o.then(t,e,n)},ma.prototype.$goog_Thenable=!0,_(Ea,R),Ea.prototype.message="Deferred has already fired",Ea.prototype.name="AlreadyCalledError",_(Sa,R),Sa.prototype.message="Deferred was canceled",Sa.prototype.name="CanceledError",Ca.prototype.c=function(){throw delete Na[this.a],this.b};var Na={};function ka(t){var e=document,n=_t(t).toString(),r=ie(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new ma(i),a=window.setTimeout(function(){Ra(r,!0);var t=new Da(Pa,"Timeout reached for loading script "+n);_a(o),ba(o,!1,t)},5e3);return i.Ma=a,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ra(r,!1,a),_a(o),ba(o,!0,null))},r.onerror=function(){Ra(r,!0,a);var t=new Da(Oa,"Error while loading script "+n);_a(o),ba(o,!1,t)},lt(i={},{type:"text/javascript",charset:"UTF-8"}),te(r,i),i=t,ft(t=r,"HTMLScriptElement"),t.src=_t(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):s=null===s?f(l.document):s)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Aa(){var t;this&&this.Wb&&(t=this.Wb)&&"SCRIPT"==t.tagName&&Ra(t,!0,this.Ma)}function Ra(t,e,n){null!=n&&l.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Oa=0,Pa=1;function Da(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function xa(t){this.f=t}function La(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ua,this.g=ct(t.secureTokenHeaders||ja),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||qa,this.a=ct(t.firebaseHeaders||Va),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==sr(),!(n=l.XMLHttpRequest||n&&jl.INTERNAL.node&&jl.INTERNAL.node.XMLHttpRequest)&&!ar())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ar()?this.f=new Zo(self):ur()?this.f=new xa(n):this.f=new Uo,this.b=null}_(Da,R),_(xa,xo),xa.prototype.a=function(){return new this.f},xa.prototype.b=function(){return{}};var Ma,Fa="idToken",Ua=new Nr(3e4,6e4),ja={"Content-Type":"application/x-www-form-urlencoded"},qa=new Nr(3e4,6e4),Va={"Content-Type":"application/json"};function Ba(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ka(t,e){e&&(t.l=Wa("https://securetoken.googleapis.com/v1/token",e),t.h=Wa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Wa("https://identitytoolkit.googleapis.com/v2/",e))}function Wa(t,e){return t=Cn(t),e=Cn(e.url),t.f=t.a+t.f,wn(t,e.c),t.a=e.a,In(t,e.g),t.toString()}function Ha(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ga(t,e,n,r,i,o,a){var s;(t=((s=lr(s=dr())==hr&&(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)&&s<30||Bt&&Jt&&!(9<Jt))&&!ar()?(Ma=Ma||new he(function(t,e){var n=t,r=e;((window.gapi||{}).client||{}).request?n():(l[Qa]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},wa(ka(wt(za,{onload:Qa})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),m(t.s,t)):m(t.u,t))(e,n,r,i,o,a)}La.prototype.T=function(){return this.b},La.prototype.u=function(t,n,e,r,i,o){if(ar()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a,s=new oa(this.f);o&&(s.g=Math.max(0,o),a=setTimeout(function(){s.dispatchEvent("timeout")},o)),cn(s,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return $o(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),hn(s,"ready",function(){a&&clearTimeout(a),De(this)}),hn(s,"timeout",function(){a&&clearTimeout(a),De(this),n&&n(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=(t.D||Ao).a(),t.C=t.D?Lo(t.D):Lo(Ao),t.a.onreadystatechange=m(t.Vb,t);try{$o(t.b,ya(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return $o(t.b,ya(t,"Error opening Xhr: "+e.message)),ha(t,e)}e=r||"";var o,a=new vn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)j(t,e,void 0);else for(var n=gn(t),r=dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){a.set(e,t)}),i=function(t){t:{for(var e=ca,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(a.Y()),r=l.FormData&&e instanceof l.FormData,!K(ua,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{da(t),0<t.g&&(t.u=(o=t.a,Bt&&Xt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),$o(t.b,ya(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=m(t.Ma,t)):t.s=fn(t.Ma,t.g,t)),$o(t.b,ya(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){$o(t.b,ya(t,"Send error: "+e.message)),ha(t,e)}}(s,t,e,r,i)};var za=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Qa="__fcb"+Math.floor(1e6*Math.random()).toString();function Ya(t){if("string"!=typeof(t=t.email)||!nr.test(t))throw new I("invalid-email")}function Xa(t){"email"in t&&Ya(t)}function Ja(t){if(!t[Fa]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ct(t));throw new I("internal-error")}}function $a(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}La.prototype.s=function(t,n,r,i,o){var a=this;Ma.then(function(){window.gapi.client.setApiKey(a.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},La.prototype.zb=function(){return Vs(this,As,{})},La.prototype.Bb=function(t,e){return Vs(this,Ns,{idToken:t,email:e})},La.prototype.Cb=function(t,e){return Vs(this,ks,{idToken:t,password:e})};var Za={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ts(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function es(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function ns(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&qn(t=new Mn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function rs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Do(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Do(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Do(t)):t.errorMessage&&(e=Bs(t.errorMessage)),e)throw e;Ja(t)}function is(t,e){return e.returnIdpCredential=!0,Vs(t,Ps,e)}function os(t,e){return e.returnIdpCredential=!0,Vs(t,xs,e)}function as(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Vs(t,Ds,e)}function ss(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=La.prototype).Db=function(t,r){var i={idToken:t},o=[];return st(Za,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Vs(this,Ns,i)},t.vb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Vs(this,Is,t)},t.wb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Vs(this,bs,t)},t.ub=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Vs(this,_s,t)},t.Eb=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Vs(this,ws,t)},t.fb=function(t){return Vs(this,Fs,t)},t.nb=function(t,e){return Vs(this,Ss,{oobCode:t,newPassword:e})},t.Ra=function(t){return Vs(this,cs,{oobCode:t})},t.jb=function(t){return Vs(this,us,{oobCode:t})};var us={endpoint:"setAccountInfo",A:ss,Z:"email",B:!0},cs={endpoint:"resetPassword",A:ss,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},B:!0},hs={endpoint:"signupNewUser",A:function(t){if(Ya(t),!t.password)throw new I("weak-password")},G:Ja,V:!0,B:!0},ls={endpoint:"createAuthUri",B:!0},fs={endpoint:"deleteAccount",N:["idToken"]},ps={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},ds={endpoint:"emailLinkSignin",N:["email","oobCode"],A:Ya,G:Ja,V:!0,B:!0},gs={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:Ya,G:Ja,V:!0},vs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ts,G:Ja,B:!0,Na:!0},ys={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ts,G:Ja,B:!0,Na:!0},ms={endpoint:"getAccountInfo"},bs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");Ya(t)},Z:"email",B:!0},_s={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},ws={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Is={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");Ya(t)},Z:"email",B:!0},Ts={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Es={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Ss={endpoint:"resetPassword",A:ss,Z:"email",B:!0},Cs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ns={endpoint:"setAccountInfo",N:["idToken"],A:Xa,V:!0},ks={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(Xa(t),!t.password)throw new I("weak-password")},G:Ja,V:!0},As={endpoint:"signupNewUser",G:Ja,V:!0,B:!0},Rs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Os={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Ps={endpoint:"verifyAssertion",A:es,Ya:ns,G:rs,V:!0,B:!0},Ds={endpoint:"verifyAssertion",A:es,Ya:ns,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Bs(t.errorMessage);Ja(t)},V:!0,B:!0},xs={endpoint:"verifyAssertion",A:function(t){if(es(t),!t.idToken)throw new I("internal-error")},Ya:ns,G:rs,V:!0},Ls={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new I("invalid-custom-token")},G:Ja,V:!0,B:!0},Ms={endpoint:"verifyPassword",A:function(t){if(Ya(t),!t.password)throw new I("wrong-password")},G:Ja,V:!0,B:!0},Fs={endpoint:"verifyPhoneNumber",A:$a,G:Ja,B:!0},Us={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new I("internal-error");$a(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Do(t);Ja(t)}},js={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:$a,G:Ja,B:!0},qs={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Fa]^!!t.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function Vs(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return me(new I("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return ye(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=Cn(e+n);En(s,"key",t.c),a&&En(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&En(s,c,i[c]);return new he(function(e,n){Ga(t,s.toString(),function(t){t?t.error?n(Ks(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:Wn(Ir(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Bs(t){return Ks({error:{errors:[{message:t}],code:400,message:t}})}function Ks(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",lt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return new I("internal-error",e=!e&&t?wr(t):e)}function Ws(t){var o;this.b=t,this.a=null,this.rb=(o=this,(Qs=Qs||new he(function(t,e){function n(){Cr(),gr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Cr(),e(Error("Network Error"))},timeout:Gs.get()})}var r;gr("gapi.iframes.Iframe")?t():gr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){gr("gapi.load")?n():e(Error("Network Error"))},ye(ka(wt(Hs,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw Qs=null,t})).then(function(){return new he(function(r,i){gr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},zs.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Hs=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),Gs=new Nr(3e4,6e4),zs=new Nr(5e3,15e3),Qs=null;function Ys(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Nn((t=Cn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Nn("https",this.l,null,"/__/auth/iframe"),this.a=t,En(this.a,"apiKey",this.h),En(this.a,"appName",this.i),this.b=null,this.c=[]}function Xs(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Js(t){try{return jl.app(t).auth().Ga()}catch(t){return[]}}function $s(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Zs(t){var s=Xn();return Vs(t,Ts,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Cn(s)).c,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,a=e;if(o=0==i.indexOf("chrome-extension://")?Cn(i).a==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(er.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Oo(Xn())})}function tu(i){return i.m||(i.m=rr().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=Js(i.b),(r=new Ys(i.s,i.g,i.b,i.f)).f=t,r.b=e,r.c=z(n||[]),i.u=r.toString()),i.v=new Ws(i.u),function(r){if(!r.v)throw Error("IfcHandler must be initialized!");var t,e;t=r.v,e=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=No(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",ye(e)}return e.status="ERROR",ye(e)},t.rb.then(function(){t.a.register("authEvent",e,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(i)}),i.m)}function eu(t){return t.l||(t.C=t.c?pr(t.c,Js(t.b)):null,t.l=new La(t.g,k(t.i),t.C),t.f&&Ka(t.l,t.f)),t.l}function nu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new Xs(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=ct(u||null),t.f=c,t.yb(h).toString()}function ru(t){if(this.a=t||jl.INTERNAL.reactNative&&jl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function iu(t){this.b=t,this.a={},this.f=m(this.c,this)}Ys.prototype.toString=function(){return this.f?En(this.a,"v",this.f):jn(this.a.b,"v"),this.b?En(this.a,"eid",this.b):jn(this.a.b,"eid"),this.c.length?En(this.a,"fw",this.c.join(",")):jn(this.a.b,"fw"),this.a.toString()},Xs.prototype.yb=function(t){return this.h=t,this},Xs.prototype.toString=function(){var t;if(En(t=this.v?Nn((t=Cn(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):Nn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),En(t,"appName",this.c),En(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=jl.app(this.c).auth().la()}catch(t){n=null}for(r in e.ob=n,En(t,"providerId",this.a.providerId),e=Ir((n=this.a).Ib))e[r]=e[r].toString();for(var r=n.Qc,e=ct(e),i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),ut(e)||En(t,"customParameters",wr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&En(t,"scopes",n.join(",")),this.l?En(t,"redirectUrl",this.l):jn(t.b,"redirectUrl"),this.g?En(t,"eventId",this.g):jn(t.b,"eventId"),this.i?En(t,"v",this.i):jn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Sn(t,a)&&En(t,a,this.b[a]);return this.h?En(t,"tid",this.h):jn(t.b,"tid"),this.f?En(t,"eid",this.f):jn(t.b,"eid"),(a=Js(this.c)).length&&En(t,"fw",a.join(",")),t.toString()},(t=$s.prototype).Ob=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,a=!1;return this.ma().then(function(){var t,r={type:"webStorageSupport"};tu(t=o).then(function(){return e=t.v,n=r,e.rb.then(function(){return new he(function(t){e.a.send(n.type,n,t,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&Zn(e),n(i),a=!0)})}).o(function(){}).then(function(){if(!a)return n=e,new he(function(e){return function t(){pn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!a)return pn(t).then(function(){n(r)})})},t.Xb=function(){var t=dr();return!_r(t)&&!Sr(t)},t.Tb=function(){return!1},t.Mb=function(e,t,n,r,i,o,a,s){if(!e)return me(new I("popup-blocked"));if(a&&!_r())return this.ma().o(function(t){Zn(e),i(t)}),r(),ye();this.a||(this.a=Zs(eu(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw Zn(e),i(t),t});return r(),t}).then(function(){So(n),a||Jn(nu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=Zs(eu(this)));var i=this;return this.a.then(function(){So(e),Jn(nu(i.s,i.g,i.b,t,e,Xn(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return tu(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new I("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(e){H(this.h,function(t){return t==e})},(t=ru.prototype).get=function(t){return ye(this.a.getItem(t)).then(function(t){return t&&Tr(t)})},t.set=function(t,e){return ye(this.a.setItem(t,wr(e)))},t.U=function(t){return ye(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var ou,au=[];function su(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function uu(t){this.a=t}function cu(t){this.c=t,this.b=!1,this.a=[]}function hu(r,t,e,n){var i,o,a,s,u=e||{},c=null;if(r.b)return me(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new he(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return lu(r,c),t}).o(function(t){throw lu(r,c),t})}function lu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e}))}function fu(){if(!gu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;ar()&&self?(this.v=(n=ar()?self:null,j(au,function(t){t.b==n&&(e=t)}),e||(e=new iu(n),au.push(e)),e),su(this.v,"keyChanged",function(t,n){return _u(r).then(function(e){return 0<e.length&&j(r.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),su(this.v,"ping",function(){return ye(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?ye().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):ye(null)).then(function(t){(r.h=t)&&(r.g=new cu(new uu(t)),hu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function pu(t){return t.i||(t.i=function i(o){return new he(function(e,n){var t=o.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=o,new he(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return i(o)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}(t)),t.i}function du(i,t){var o=0;return new he(function e(n,r){pu(i).then(t).then(n).o(function(t){return 3<++o?void r(t):pu(i).then(function(t){return t.close(),i.i=void 0,e(n,r)}).o(function(t){r(t)})})})}function gu(){try{return l.indexedDB}catch(t){return}}function vu(t){return t.objectStore("firebaseLocalStorage")}function yu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function mu(t){return new he(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function bu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?hu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):ye();var n}function _u(r){return pu(r).then(function(t){var i=vu(yu(t,!1));return i.getAll?mu(i.getAll()):new he(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function wu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Iu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ye().then(function(){if(gu()){var e=Er(),n="__sak"+e;return ou=ou||new fu,(i=ou).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.U(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){j(r.a,function(t){t(e)})}),t})}function Tu(){this.a={},this.type="inMemory"}function Eu(){if(!function(){var t="Node"==sr();if(t=Su()||t&&jl.INTERNAL.node&&jl.INTERNAL.node.localStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==sr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Su()||jl.INTERNAL.node.localStorage,this.type="localStorage"}function Su(){try{var t=l.localStorage,e=Er();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Cu(){this.type="nullStorage"}function Nu(){if(!function(){var t="Node"==sr();if(t=ku()||t&&jl.INTERNAL.node&&jl.INTERNAL.node.sessionStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==sr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=ku()||jl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ku(){try{var t=l.sessionStorage,e=Er();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Au(){var t={};t.Browser=Pu,t.Node=Du,t.ReactNative=xu,t.Worker=Lu,this.a=t[sr()]}iu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],j(t,function(t){e.push(ye().then(function(){return t(n.origin,n.data.data)}))}),_e(e).then(function(t){var e=[];j(t,function(t){e.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),j(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},uu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},cu.prototype.close=function(){for(;0<this.a.length;)lu(this,this.a[0]);this.b=!0},(t=fu.prototype).set=function(r,i){var o=this,a=!1;return du(this,function(t){return mu((t=vu(yu(t,!0))).get(r))}).then(function(n){return du(o,function(t){if(t=vu(yu(t,!0)),n)return n.value=i,mu(t.put(n));o.b++,a=!0;var e={};return e.fbase_key=r,e.value=i,mu(t.add(e))})}).then(function(){return o.c[r]=i,bu(o,r)}).oa(function(){a&&o.b--})},t.get=function(e){return du(this,function(t){return mu(vu(yu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.U=function(e){var n=this,r=!1;return du(this,function(t){return r=!0,n.b++,mu(vu(yu(t,!0)).delete(e))}).then(function(){return delete n.c[e],bu(n,e)}).oa(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(wu(n=this),function e(){n.f=setTimeout(function(){n.l=_u(n).then(function(e){0<e.length&&j(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&wu(this)},(t=Iu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.U=function(e){return this.b.then(function(t){return t.U(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e})},(t=Tu.prototype).get=function(t){return ye(this.a[t])},t.set=function(t,e){return this.a[t]=e,ye()},t.U=function(t){return delete this.a[t],ye()},t.ca=function(){},t.ia=function(){},(t=Eu.prototype).get=function(t){var e=this;return ye().then(function(){return Tr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return ye().then(function(){var t=wr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return ye().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Ye(l.window,"storage",t)},t.ia=function(t){l.window&&$e(l.window,"storage",t)},(t=Cu.prototype).get=function(){return ye(null)},t.set=function(){return ye()},t.U=function(){return ye()},t.ca=function(){},t.ia=function(){},(t=Nu.prototype).get=function(t){var e=this;return ye().then(function(){return Tr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return ye().then(function(){var t=wr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return ye().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Ru,Ou,Pu={F:Eu,bb:Nu},Du={F:Eu,bb:Nu},xu={F:ru,bb:Cu},Lu={F:Eu,bb:Cu},Mu={rd:"local",NONE:"none",td:"session"};function Fu(){var t=!(Sr(dr())||!or()),e=_r(),n=vr();this.m=t,this.h=e,this.l=n,this.a={},t=Ru=Ru||new Au;try{this.g=!Yn()&&Or()||!l.indexedDB?new t.a.F:new Iu(new(ar()?Tu:t.a.F))}catch(t){this.g=new Tu,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Tu}this.v=new Tu,this.f=m(this.Yb,this),this.b={}}function Uu(){return Ou=Ou||new Fu}function ju(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Vu(t,e,n){return n=qu(e,n),"local"==e.F&&(t.b[n]=null),ju(t,e.F).U(n)}function Bu(t){t.c&&(clearInterval(t.c),t.c=null)}function Ku(t){this.a=t,this.b=Uu()}(t=Fu.prototype).get=function(t,e){return ju(this,t.F).get(qu(t,e))},t.set=function(e,t,n){var r=qu(e,n),i=this,o=ju(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=qu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(ju(this,"local").ca(this.f),this.h||(Yn()||!Or())&&l.indexedDB||!this.l||(Bu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Ue({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=qu(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(ju(this,"local").ia(this.f),Bu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?ju(this,"local").ia(this.f):Bu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.mb(e))};Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else j(t,m(this.mb,this))},t.mb=function(t){this.a[t]&&j(this.a[t],function(t){t()})};var Wu,Hu={name:"authEvent",F:"local"};function Gu(){this.a=Uu()}function zu(t,e){this.b=Qu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Wu&&(Wu=l.Int32Array?new Int32Array(ec):ec),this.reset()}_(zu,function(){this.b=-1});for(var Qu=64,Yu=Qu-1,Xu=[],Ju=0;Ju<Yu;Ju++)Xu[Ju]=0;var $u=G(128,Xu);function Zu(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){var i=0|n[e-15],r=0|n[e-2],o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0,a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|Wu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i;i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function tc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Zu(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Zu(t),i=0)}}t.c=i,t.g+=n}zu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):z(this.h)};var ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function nc(){zu.call(this,8,rc)}_(nc,zu);var rc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ic(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new Gu,this.g=new Ku(this.h),this.f=null,this.b=[],this.a=this.c=null}function oc(t){return new I("invalid-cordova-configuration",t)}function ac(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function sc(c){return c.f||(c.f=c.ma().then(function(){return new he(function(n){function e(r){t=!0,a&&a.cancel(),uc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,n=(e=-1!=(n=Wi(r.url)).indexOf("/__/auth/callback")?(e="object"==typeof(e=Tr(Sn(e=Cn(n),"firebaseError")||null))?T(e):null)?new Co(t.c,t.b,null,null,e,null,t.T()):new Co(t.c,t.b,n,t.f,null,null,t.T()):e)||o),ac(i,n)})}var i,o,t,a,r,s,u;c.Ea(function t(e){return n(e),c.Sa(t),!1}),i=c,o=new Co("unknown",null,null,null,new I("no-auth-event")),t=!1,a=pn(500).then(function(){return uc(i).then(function(){t||ac(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(gr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Ro=Ro||new ko,s=e,(u=Ro).a.push(s),u.b||(u.b=function(t){for(var e=0;e<u.a.length;e++)u.a[e](t)},"function"==typeof(s=gr("universalLinks.subscribe",l))&&s(null,u.b))})})),c.f}function uc(e){var t,n=null;return(t=e.g).b.get(Hu,t.a).then(No).then(function(t){return n=t,Vu((t=e.g).b,Hu,t.a)}).then(function(){return n})}function cc(t){this.a=t,this.b=Uu()}(t=ic.prototype).ma=function(){return this.Ia||(this.Ia=(ir(void 0)?rr().then(function(){return new he(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):me(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof gr("universalLinks.subscribe",l))throw oc("cordova-universal-links-plugin-fix is not installed");if(void 0===gr("BuildInfo.packageName",l))throw oc("cordova-plugin-buildinfo is not installed");if("function"!=typeof gr("cordova.plugins.browsertab.openUrl",l))throw oc("cordova-plugin-browsertab is not installed");if("function"!=typeof gr("cordova.InAppBrowser.open",l))throw oc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")}))},t.Ob=function(t,e){return e(new I("operation-not-supported-in-this-environment")),ye()},t.Mb=function(){return me(new I("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return me(new I("redirect-operation-pending"));var i=this,o=l.document,a=null,s=null,u=null,c=null;return this.c=ye().then(function(){return So(e),sc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Co(t,r,null,o,new I("no-auth-event"),null,i),s=gr("BuildInfo.packageName",l);if("string"!=typeof s)throw new I("invalid-cordova-configuration");var u=gr("BuildInfo.displayName",l),c={};if(dr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!dr().toLowerCase().match(/android/))return me(new I("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=function(t){var e=new nc;tc(e,t),t=[];var n=8*e.g;e.c<56?tc(e,$u,56-e.c):tc(e,$u,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Zu(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(o),c.sessionId=o;var h=nu(n.v,n.i,n.l,t,e,null,r,n.m,c,n.u,i,n.s);return n.ma().then(function(){var t=n.h;return n.C.a.set(Hu,a.w(),t)}).then(function(){var t=gr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=gr("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=gr("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=dr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new he(function(e,t){s=function(){var t=gr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),u=function(){a=a||pn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){kr()&&u()},o.addEventListener("resume",u,!1),dr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return uc(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null})},t.Ea=function(e){this.b.push(e),sc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Co("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Sa=function(e){H(this.b,function(t){return t==e})};var hc={name:"pendingRedirect",F:"session"};function lc(t){return Vu(t.b,hc,t.a)}function fc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Nc,this.C=new Pc,this.g=new cc(Sc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=pc(this.D,this.v,this.m,E,this.J)}function pc(t,e,n,r,i){var o=jl.SDK_VERSION||null;return new(ir()?ic:$s)(t,e,n,o,r,i)}function dc(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.ma().o(function(t){throw e.a==n&&e.reset(),t})}function gc(n){n.a.Xb()&&dc(n).o(function(t){var e=new Co("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));wc(t)&&n.s(e)}),n.a.Tb()||kc(n.b)}function vc(n,t){K(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(hc,t.a).then(function(t){return"pending"==t}).then(function(t){t?lc(n.g).then(function(){dc(n).o(function(t){var e=new Co("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));wc(t)&&n.s(e)})}):gc(n)}).o(function(){gc(n)})}function yc(t,e){H(t.h,function(t){return t==e})}fc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=pc(this.D,this.v,this.m,null,this.J),this.i={}},fc.prototype.s=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return kc(this.b),e};var mc=new Nr(2e3,1e4),bc=new Nr(3e4,6e4);function _c(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,a)}function wc(t){return t&&"auth/cordova-not-ready"==t.code}function Ic(e,t,n,r,i){var o,a;return(a=e.g).b.set(hc,"pending",a.a).then(function(){return e.a.Nb(t,n,r,i).o(function(t){if(wc(t))throw new I("operation-not-supported-in-this-environment");return o=t,lc(e.g).then(function(){throw o})}).then(function(){return e.a.$b()?new he(function(){}):lc(e.g).then(function(){return e.qa()}).then(function(){}).o(function(){})})})}function Tc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},mc.get())}fc.prototype.qa=function(){return this.b.qa()};var Ec={};function Sc(t,e,n){return t=t+":"+e,n?t+":"+n.url:t}function Cc(t,e,n,r){var i=Sc(e,n,r);return Ec[i]||(Ec[i]=new fc(t,e,n,r)),Ec[i]}function Nc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function kc(t){t.g||(t.g=!0,Oc(t,!1,null,null))}function Ac(t){t.g&&!t.i&&Oc(t,!1,null,null)}function Rc(t,e){if(t.b=function(){return ye(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Oc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return me(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Rc(t,n):Rc(t,{user:null}),t.f=[],t.c=[]}function Pc(){}function Dc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function xc(t,e){this.a=e,Mr(this,"verificationId",t)}function Lc(t,e,n,r){return new Io(t).fb(e,n).then(function(t){return new xc(t,r)})}function Mc(t){var e=Ri(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Fr(this,{token:t,expirationTime:Rr(1e3*e.exp),authTime:Rr(1e3*e.auth_time),issuedAtTime:Rr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Fc(t,e,n){var r=e&&e[jc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Hi(null,r),this.b=[];var i=this;j(e[Uc]||[],function(t){(t=Vr(t))&&i.b.push(t)}),Mr(this,"auth",this.a),Mr(this,"session",this.c),Mr(this,"hints",this.b)}Nc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Nc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Oc(this,!0,null,t.a),ye()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then(function(t){Oc(e,s,t,null)}).o(function(t){Oc(e,s,null,t)})}(this,t,e):me(new I("invalid-auth-event")):(Oc(this,!1,null,null),ye())):me(new I("invalid-auth-event"))},Nc.prototype.qa=function(){var i=this;return new he(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=pn(bc.get()).then(function(){n.b||(n.g=!0,Oc(n,!0,null,r))}))})},Pc.prototype.h=function(t,e){var n,r,i,o,a;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),ye()):e.Fa(n,r)?(i=e,o=t.b,a=t.c,i.Fa(a,o)(t.g,t.f,t.T(),t.i).then(function(t){i.na(a,t,null,o)}).o(function(t){i.na(a,null,t,o)})):me(new I("invalid-auth-event"))):me(new I("invalid-auth-event"))},xc.prototype.confirm=function(t){return t=To(this.verificationId,t),this.a(t)};var Uc="mfaInfo",jc="mfaPendingCredential";function qc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Fc(t,e,n),Mr(this,"resolver",this.b)}function Vc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Bc(){}function Kc(t){Mr(this,"factorId",t.fa),this.a=t}function Wc(t){if(Kc.call(this,t),this.a.fa!=Io.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Hc(t,e){for(var n in Fe.call(this,t),e)this[n]=e[n]}function Gc(t,e){this.a=t,this.b=[],this.c=m(this.yc,this),Ye(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&j(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Wr]=t.uid),t.displayName&&(n[Br]=t.displayName),t.enrollmentTime&&(n[Kr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Hr]=t.phoneNumber);try{e=new Gr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),zc(this,r)}function zc(t,e){t.b=e,Mr(t,"enrolledFactors",e)}function Qc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Yc(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Xc(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function Jc(t,e){t.b=Ai(e[Fa]||""),t.a=e.refreshToken,Xc(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function $c(t,e){this.a=t||null,this.b=e||null,Fr(this,{lastSignInTime:Rr(e||null),creationTime:Rr(t||null)})}function Zc(t,e,n,r,i,o){Fr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function th(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=jl.SDK_VERSION?pr(jl.SDK_VERSION):null;this.a=new La(this.l,k(E),i),t.emulatorConfig&&Ka(this.a,t.emulatorConfig),this.b=new Yc(this.a),uh(this,e[Fa]),Jc(this.b,e),Mr(this,"refreshToken",this.b.a),lh(this,n||{}),un.call(this),this.R=!1,this.s&&yr()&&(this.i=Cc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new Qc(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0})),this.aa=m(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Ka(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){rh(o,t.f)},this.ba=null,this.O=new Gc(this,n),Mr(this,"multiFactor",this.O)}function eh(t,e){t.ja&&$e(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&Ye(e,"languageCodeChanged",t.Oa)}function nh(t,e){t.X&&$e(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&Ye(e,"emulatorConfigChanged",t.Aa)}function rh(t,e){t.$=e,Ha(t.a,jl.SDK_VERSION?pr(jl.SDK_VERSION,t.$):null)}function ih(t,e){t.ba&&$e(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&Ye(e,"frameworkChanged",t.Ba)}function oh(e){try{return jl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ah(t){t.D||t.u.b||(t.u.start(),$e(t,"tokenChanged",t.aa),Ye(t,"tokenChanged",t.aa))}function sh(t){$e(t,"tokenChanged",t.aa),t.u.stop()}function uh(t,e){t.za=e,Mr(t,"_lat",e)}function ch(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return _e(e).then(function(){return t})}function hh(t){t.i&&!t.R&&(t.R=!0,vc(t.i,t))}function lh(t,e){Fr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new $c(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function fh(){}function ph(t){return ye().then(function(){if(t.D)throw new I("app-deleted")})}function dh(t){return V(t.providerData,function(t){return t.providerId})}function gh(t,e){e&&(vh(t,e.providerId),t.providerData.push(e))}function vh(t,e){H(t.providerData,function(t){return t.providerId==e})}function yh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Mr(t,e,n)}function mh(e,t){var n,r;e!=t&&(Fr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Mr(e,"metadata",new $c((r=t.metadata).a,r.b)):Mr(e,"metadata",new $c),j(t.providerData,function(t){gh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,Mr(e,"refreshToken",e.b.a),zc(e.O,t.O.b))}function bh(r){return r.I().then(function(t){var e,n=r.isAnonymous;return Vs((e=r).a,ms,{idToken:t}).then(m(e.Kc,e)).then(function(){return n||yh(r,"isAnonymous",!1),t})})}function _h(t,e){e[Fa]&&t.za!=e[Fa]&&(Jc(t.b,e),t.dispatchEvent(new Hc("tokenChanged")),uh(t,e[Fa]),yh(t,"refreshToken",t.b.a))}function wh(t,e){return bh(t).then(function(){if(K(dh(t),e))return ch(t).then(function(){throw new I("provider-already-linked")})})}function Ih(t,e,n){return Ur({user:t,credential:Eo(e),additionalUserInfo:e=Li(e),operationType:n})}function Th(t,e){return _h(t,e),t.reload().then(function(){return t})}function Eh(n,r,t,e,i){if(!yr())return me(new I("operation-not-supported-in-this-environment"));if(n.h&&!i)return me(n.h);var o=xi(t.providerId),a=Er(n.uid+":::"),s=null,u=tr(s=(!_r()||or())&&n.s&&t.isOAuthProvider?nu(n.s,n.l,n.m,r,t,null,a,jl.SDK_VERSION||null,null,null,n.tenantId):s,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Ch(n),!i)return n.I().then(function(){})}).then(function(){return _c(n.i,u,r,t,a,!!s,n.tenantId)}).then(function(){return new he(function(t,e){n.na(r,null,new I("cancelled-popup-request"),n.g||null),n.f=t,n.C=e,n.g=a,n.c=Tc(n.i,n,r,u,a)})}).then(function(t){return u&&Zn(u),t?Ur(t):null}).o(function(t){throw u&&Zn(u),t}),Nh(n,e,i)}function Sh(e,t,n,r,i){if(!yr())return me(new I("operation-not-supported-in-this-environment"));if(e.h&&!i)return me(e.h);var o=null,a=Er(e.uid+":::");return r=r().then(function(){if(Ch(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=a,ch(e)}).then(function(t){return e.ha?(t=e.ha).b.set(Rh,e.w(),t.a):t}).then(function(){return Ic(e.i,t,n,a,e.tenantId)}).o(function(t){if(o=t,e.ha)return Oh(e.ha);throw o}).then(function(){if(o)throw o}),Nh(e,r,i)}function Ch(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Nh(n,t,e){var r,i=(r=n).h&&!e?(t.cancel(),me(r.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Hc("userInvalidated")),r.h=t),t});return n.J.push(i),i.oa(function(){W(n.J,i)}),i.o(function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Vc(t.w(),oh(n),m(n.jc,n)):e)||t})}function kh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Fa]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new th(e,n,t);return t.providerData&&j(t.providerData,function(t){t&&gh(i,Ur(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Ah(t){this.a=t,this.b=Uu()}Fc.prototype.Rc=function(t){var n=this;return t.sb(this.a.a,this.c).then(function(t){var e=ct(n.f);return delete e[Uc],delete e[jc],lt(e,t),n.g(e)})},_(qc,I),Bc.prototype.sb=function(t,e,n){return e.type==Gi?(o=this,a=t,s=n,e.Ha().then(function(t){return t={idToken:t},void 0!==s&&(t.displayName=s),lt(t,{phoneVerificationInfo:wo(o.a)}),Vs(a,vs,t)})):(r=this,i=t,e.Ha().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:wo(r.a)}),Vs(i,ys,t)}));var r,i,o,a,s},_(Kc,Bc),_(Wc,Kc),_(Hc,Fe),(t=Gc.prototype).yc=function(t){var e;zc(this,(t=t.hd,e=[],j(t.mfaInfo||[],function(t){(t=Vr(t))&&e.push(t)}),e))},t.Rb=function(){return this.a.I().then(function(t){return new Hi(t,null)})},t.fc=function(e,n){var r=this,i=this.a.a;return this.Rb().then(function(t){return e.sb(i,t,n)}).then(function(t){return _h(r.a,t),r.a.reload()})},t.bd=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Vs(e,qs,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return zc(n,e),_h(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.w()})}}},Qc.prototype.start=function(){this.a=this.c,function e(n,t){var r;n.stop(),n.b=pn((r=n,(t=t)?(r.a=r.c,r.g()):(t=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),t))).then(Ar).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Qc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Yc.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Yc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?me(new I("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?(t={grant_type:"refresh_token",refresh_token:(e=this).a},r=e.f,i=t,new he(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Ga(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ks(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",Un(i).toString(),r.g,r.m.get()):n(new I("internal-error"))}).then(function(t){return e.b=Ai(t.access_token),e.a=t.refresh_token,Xc(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})):ye(null):ye({accessToken:this.b.toString(),refreshToken:this.a});var e,r,i},$c.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(th,un),th.prototype.wa=function(t){this.ya=t,Ba(this.a,t)},th.prototype.la=function(){return this.ya},th.prototype.Ga=function(){return z(this.$)},th.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Mr(th.prototype,"providerId","firebase"),(t=th.prototype).reload=function(){var t=this;return Nh(this,ph(this).then(function(){return bh(t).then(function(){return ch(t)}).then(fh)}))},t.oc=function(t){return this.I(t).then(function(t){return new Mc(t)})},t.I=function(t){var e=this;return Nh(this,ph(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.za&&(uh(e,t.accessToken),e.dispatchEvent(new Hc("tokenChanged"))),yh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");lh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=t.providerUserInfo)&&e.length?V(e,function(t){return new Zc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)gh(this,n[r]);yh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Hc("userReloaded",{hd:t}))},t.Lc=function(t){return xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Nh(this,t.c(this.a,this.uid).then(function(t){return _h(e,t),n=Ih(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(e){var n=this,r=null;return Nh(this,wh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Ih(n,t,"link"),Th(n,t)}).then(function(){return r}))},t.Dc=function(t,e){var n=this;return Nh(this,wh(this,"phone").then(function(){return Lc(oh(n),t,e,m(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Nh(this,ye().then(function(){return Lc(oh(n),t,e,m(n.tb,n))}),!0)},t.Bb=function(e){var n=this;return Nh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return _h(n,t),n.reload()}))},t.ed=function(e){var n=this;return Nh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return _h(n,t),n.reload()}))},t.Cb=function(e){var n=this;return Nh(this,this.I().then(function(t){return n.a.Cb(t,e)}).then(function(t){return _h(n,t),n.reload()}))},t.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return ph(this);var n=this;return Nh(this,this.I().then(function(t){return n.a.Db(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return _h(n,t),yh(n,"displayName",t.displayName||null),yh(n,"photoURL",t.photoUrl||null),j(n.providerData,function(t){"password"===t.providerId&&(Mr(t,"displayName",n.displayName),Mr(t,"photoURL",n.photoURL))}),ch(n)}).then(fh))},t.cd=function(e){var n=this;return Nh(this,bh(this).then(function(t){return K(dh(n),e)?Vs(n.a,ps,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return j(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),j(dh(n),function(t){e[t]||vh(n,t)}),e[Io.PROVIDER_ID]||Mr(n,"phoneNumber",null),ch(n)}):ch(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Nh(this,this.I().then(function(t){return Vs(e.a,fs,{idToken:t})}).then(function(){e.dispatchEvent(new Hc("userDeleted"))})).then(function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");eh(e,null),nh(e,null),ih(e,null),e.J=[],e.D=!0,sh(e),Mr(e,"refreshToken",null),e.i&&yc(e.i,e)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Lb,this):null},t.Ec=function(t){var e=this;return Eh(this,"linkViaPopup",t,function(){return wh(e,t.providerId).then(function(){return ch(e)})},!1)},t.Nc=function(t){return Eh(this,"reauthViaPopup",t,function(){return ye()},!0)},t.Fc=function(t){var e=this;return Sh(this,"linkViaRedirect",t,function(){return wh(e,t.providerId)},!1)},t.Oc=function(t){return Sh(this,"reauthViaRedirect",t,function(){return ye()},!0)},t.Kb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return os(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Ih(i,t,"link"),Th(i,t)}).then(function(){return o}),Nh(this,t)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Nh(this,ye().then(function(){return Yi(as(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ih(i,t,"reauthenticate"),_h(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(e){var n=this,r=null;return Nh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Ci(new vi(e))}).then(function(t){return n.a.ub(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Eb=function(e,n){var r=this,i=null;return Nh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Ci(new vi(n))}).then(function(t){return r.a.Eb(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Nh(this,t=Yi(ye(t),n.uid).then(function(t){return e=Ih(n,t,"reauthenticate"),_h(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&lt(e,this.metadata.w()),j(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.w()),e};var Rh={name:"redirectUser",F:"session"};function Oh(t){return Vu(t.b,Rh,t.a)}function Ph(t){var e,n,r,i,o,a,s,u,c;this.a=t,this.b=Uu(),this.c=null,this.f=(n=Lh("local"),r=Lh("session"),i=Lh("none"),o=(e=this).b,a=n,s=e.a,u=qu(a,s),c=ju(o,a.F),o.get(a,s).then(function(t){var e=null;try{e=Tr(l.localStorage.getItem(u))}catch(t){}if(e&&!t)return l.localStorage.removeItem(u),o.set(a,e,s);e&&t&&"localStorage"!=c.type&&l.localStorage.removeItem(u)}).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(xh,e.a).then(function(t){return t?Lh(t):n})})})}).then(function(t){return e.c=t,Dh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Lh("local"),this.a,m(this.g,this))}function Dh(t,e){var n,s,r=[];for(n in Mu)Mu[n]!==e&&r.push(Vu(t.b,Lh(Mu[n]),t.a));return r.push(Vu(t.b,xh,t.a)),s=r,new he(function(n,e){var r=s.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},a=0;a<s.length;a++)be(s[a],b(t,a),o);else n(i)})}Ph.prototype.g=function(){var e=this,n=Lh("local");jh(this,function(){return ye().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Dh(e,"local").then(function(){e.c=n})})})};var xh={name:"persistence",F:"session"};function Lh(t){return{name:"authUser",F:t}}function Mh(t,e){return jh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Fh(t){return jh(t,function(){return Vu(t.b,t.c,t.a)})}function Uh(t,e,n){return jh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),kh(t||{})})})}function jh(t,e){return t.f=t.f.then(e,e),t.f}function qh(t){if(this.l=!1,Mr(this,"settings",new Dc),Mr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,a,s,u,c;t=jl.SDK_VERSION?pr(jl.SDK_VERSION):null,this.a=new La(this.app.options&&this.app.options.apiKey,k(E),t),this.R=[],this.s=[],this.O=[],this.hb=jl.INTERNAL.createSubscribe(m(this.zc,this)),this.X=void 0,this.bc=jl.INTERNAL.createSubscribe(m(this.Ac,this)),Gh(this,null),this.i=new Ph(this.app.options.apiKey+":"+this.app.name),this.D=new Ah(this.app.options.apiKey+":"+this.app.name),this.$=Jh(this,(e=(n=this).app.options.authDomain,u=(s=n).D,c=s.app.options.authDomain,u=u.b.get(Rh,u.a).then(function(t){return t&&c&&(t.authDomain=c),kh(t||{})}).then(function(t){return(s.m=t)&&(t.ha=s.D),Oh(s.D)}),t=Jh(s,u).then(function(){return Uh(n.i,e,n.P)}).then(function(e){return e?(e.ha=n.D,n.m&&(n.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Mh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Fh(n.i)})):null}).then(function(t){Gh(n,t||null)}),Jh(n,t))),this.h=Jh(this,(r=this).$.then(function(){return Hh(r)}).o(function(){}).then(function(){if(!r.l)return r.ja()}).o(function(){}).then(function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Lh("local"),t.a,r.ja))})),this.ba=!1,this.ja=m(this.Zc,this),this.Ba=m(this.da,this),this.ya=m(this.mc,this),this.za=m(this.wc,this),this.Aa=m(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,a=i.app.options.apiKey,o&&yr()&&(i.Oa=i.$.then(function(){var t;if(!i.l)return i.b=Cc(o,a,i.app.name,i.P),vc(i.b,i),Qh(i)&&hh(Qh(i)),i.m&&(hh(i.m),(t=i.m).wa(i.la()),eh(t,i),rh(t=i.m,i.J),ih(t,i),Ka((t=i.m).a,i.P),nh(t,i),i.m=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Gc,this),this.u=0,un.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return this.P?Ur({protocol:(t=Cn(this.P.url)).c,host:t.a,port:t.g,options:Ur({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function Vh(t){Fe.call(this,"languageCodeChanged"),this.h=t}function Bh(t){Fe.call(this,"emulatorConfigChanged"),this.c=t}function Kh(t){Fe.call(this,"frameworkChanged"),this.f=t}function Wh(t){return t.Oa||me(new I("auth-domain-config-required"))}function Hh(t){if(!yr())return me(new I("operation-not-supported-in-this-environment"));var e=Wh(t).then(function(){return t.b.qa()}).then(function(t){return t?Ur(t):null});return Jh(t,e)}function Gh(t,e){var n,r;Qh(t)&&(n=Qh(t),r=t.Ba,H(n.S,function(t){return t==r}),$e(Qh(t),"tokenChanged",t.ya),$e(Qh(t),"userDeleted",t.za),$e(Qh(t),"userInvalidated",t.Aa),sh(Qh(t))),e&&(e.S.push(t.Ba),Ye(e,"tokenChanged",t.ya),Ye(e,"userDeleted",t.za),Ye(e,"userInvalidated",t.Aa),0<t.u&&ah(e)),Mr(t,"currentUser",e),e&&(e.wa(t.la()),eh(e,t),rh(e,t.J),ih(e,t),Ka(e.a,t.P),nh(e,t))}function zh(n,t){var e=null,r=null;return Jh(n,t.then(function(t){return e=Eo(t),r=Li(t),a=t,(s={}).apiKey=(o=n).app.options.apiKey,s.authDomain=o.app.options.authDomain,s.appName=o.app.name,o.P&&(s.emulatorConfig=o.P),o.$.then(function(){return t=s,e=a,n=o.D,r=o.Ga(),i=new th(t,e),n&&(i.ha=n),r&&rh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return Qh(o)&&t.uid==Qh(o).uid?mh(Qh(o),t):(Gh(o,t),hh(t)),o.da(t)}).then(function(){Xh(o)});var o,a,s},function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Vc(t.w(),n,m(n.kc,n)):e)||t}).then(function(){return Ur({user:Qh(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function Qh(t){return t.currentUser}function Yh(t){return Qh(t)&&Qh(t)._lat||null}function Xh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](Yh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](Yh(t))}}function Jh(t,e){return t.R.push(e),e.oa(function(){W(t.R,e)}),e}function $h(){}function Zh(){this.a={},this.b=1e12}Ph.prototype.xb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Mu)if(Mu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(sr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!gu()&&"none"!==t)throw n;break;default:if(!vr()&&"none"!==t)throw n}}(e),jh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Dh(r,e)}).then(function(){if(r.c=Lh(e),n)return r.b.set(r.c,n,r.a)}):ye()})},_(qh,un),_(Vh,Fe),_(Bh,Fe),_(Kh,Fe),(t=qh.prototype).xb=function(t){return t=this.i.xb(t),Jh(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,Ba(this.a,this.aa),this.dispatchEvent(new Vh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");n=e=!!e&&!!e.disableWarnings,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!n&&rr().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.P={url:t,ec:e},this.settings.ib=!0,Ka(this.a,this.P),this.dispatchEvent(new Bh(this.P))}var n},t.Gc=function(t){this.J.push(t),Ha(this.a,jl.SDK_VERSION?pr(jl.SDK_VERSION,this.J):null),this.dispatchEvent(new Kh(this.J))},t.Ga=function(){return z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:Qh(this)&&Qh(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return zh(i,is(i.a,o))})},t.Xc=function(e){if(!yr())return me(new I("operation-not-supported-in-this-environment"));var n=this,t=xi(e.providerId),r=Er(),i=null,o=tr(i=(!_r()||or())&&this.app.options.authDomain&&e.isOAuthProvider?nu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,jl.SDK_VERSION||null,null,null,this.T(),this.P):i,t&&t.ua,t&&t.ta);return Jh(this,t=Wh(this).then(function(t){return _c(t,o,"signInViaPopup",e,r,!!i,n.T())}).then(function(){return new he(function(t,e){n.na("signInViaPopup",null,new I("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=r,n.c=Tc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&Zn(o),t?Ur(t):null}).o(function(t){throw o&&Zn(o),t}))},t.Yc=function(t){if(!yr())return me(new I("operation-not-supported-in-this-environment"));var e=this;return Jh(this,Wh(this).then(function(){return jh(t=e.i,function(){return t.b.set(xh,t.c.F,t.a)});var t}).then(function(){return Ic(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var e=this;return Hh(this).then(function(t){return e.b&&Ac(e.b.b),t}).o(function(t){throw e.b&&Ac(e.b.b),t})},t.dd=function(t){if(!t)return me(new I("null-user"));if(this.S!=t.tenantId)return me(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,a,s,u=(r=t,i=n,o=e.D,a=e.Ga(),s=r.b,(n={})[Fa]=s.b&&s.b.toString(),n.refreshToken=s.a,i=new th(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),a&&rh(i,a),mh(i,r),i);return Jh(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return Qh(e)&&t.uid==Qh(e).uid?(mh(Qh(e),t),e.da(t)):(Gh(e,u),hh(u),e.da(u))}).then(function(){Xh(e)}))},t.Ab=function(){var t=this,e=this.h.then(function(){return t.b&&Ac(t.b.b),Qh(t)?(Gh(t,null),Fh(t.i).then(function(){Xh(t)})):ye()});return Jh(this,e)},t.Zc=function(){var r=this;return Uh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((e=Qh(r)&&t)&&(e=Qh(r).uid,n=t.uid,e=null!=e&&""!==e&&null!=n&&""!==n&&e==n),e)return mh(Qh(r),t),Qh(r).I();(Qh(r)||t)&&(Gh(r,t),t&&(hh(t),t.ha=r.D),r.b&&vc(r.b,r),Xh(r))}})},t.da=function(t){return Mh(this.i,t)},t.mc=function(){Xh(this),this.da(Qh(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return zh(e,ye(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Qh(e))})},t.Ac=function(t){var e,n=this,r=function(){t.next(Qh(n))};(e=this).O.push(r),Jh(e,e.h.then(function(){!e.l&&K(e.O,r)&&e.X!==e.getUid()&&(e.X=e.getUid(),r(Yh(e)))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(Qh(r)):"function"==typeof t.next&&t.next(Qh(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(Qh(r)):"function"==typeof t.next&&t.next(Qh(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then(function(){return Qh(e)?Qh(e).I(t).then(function(t){return{accessToken:t}}):null});return Jh(this,n)},t.Tc=function(t){var n=this;return this.h.then(function(){return zh(n,Vs(n.a,Ls,{token:t}))}).then(function(t){var e=t.user;return yh(e,"isAnonymous",!1),n.da(e),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return zh(n,Vs(n.a,Ms,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return zh(n,Vs(n.a,hs,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return zh(e,t.ka(e.a))})},t.Sc=function(t){return xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var n=this;return this.h.then(function(){var t=Qh(n);if(t&&t.isAnonymous){var e=Ur({providerId:null,isNewUser:!1});return Ur({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return zh(n,n.a.zb()).then(function(t){var e=t.user;return yh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return Qh(this)&&Qh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Qh(this)&&ah(Qh(this))},t.Pc=function(e){var n=this;j(this.s,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&Qh(this)&&sh(Qh(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Jh(this,this.h.then(function(){e.l||K(e.s,t)&&t(Yh(e))}))},t.removeAuthTokenListener=function(e){H(this.s,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Lh("local"),t.a,this.ja),this.b&&(yc(this.b,this),Ac(this.b.b)),Promise.resolve()},t.hc=function(t){return Jh(this,Vs(this.a,ls,{identifier:t,continueUri:mr()?Xn():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Bc=function(t){return!!mo(t)},t.wb=function(e,n){var r=this;return Jh(this,ye().then(function(){var t=new vi(n);if(!t.c)throw new I("argument-error",bi+" must be true when sending sign in link to email");return Ci(t)}).then(function(t){return r.a.wb(e,t)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return Jh(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return Jh(this,this.a.Ra(t).then(function(t){return new zr(t)}))},t.jb=function(t){return Jh(this,this.a.jb(t).then(function(){}))},t.vb=function(e,t){var n=this;return Jh(this,ye().then(function(){return void 0===t||ut(t)?{}:Ci(new vi(t))}).then(function(t){return n.a.vb(e,t)}).then(function(){}))},t.Wc=function(t,e){return Jh(this,Lc(this,t,e,m(this.$a,this)))},t.Vc=function(n,r){var i=this;return Jh(this,ye().then(function(){var t=r||Xn(),e=yo(n,t);if(!(t=mo(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.T())throw new I("tenant-id-mismatch");return i.$a(e)}))},$h.prototype.render=function(){},$h.prototype.reset=function(){},$h.prototype.getResponse=function(){},$h.prototype.execute=function(){};var tl=null;function el(t,e){return(e=nl(e))&&t.a[e]||null}function nl(t){return(t=void 0===t?1e12:t)?t.toString():null}function rl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Zt(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ye(this.f,"click",this.i)}function il(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function ol(){}function al(){}Zh.prototype.render=function(t,e){return this.a[this.b.toString()]=new rl(t,e),this.b++},Zh.prototype.reset=function(t){var e=el(this,t);t=nl(t),e&&t&&(e.delete(),delete this.a[t])},Zh.prototype.getResponse=function(t){return(t=el(this,t))?t.getResponse():null},Zh.prototype.execute=function(t){(t=el(this,t))&&t.execute()},rl.prototype.getResponse=function(){return il(this),this.b},rl.prototype.execute=function(){il(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},rl.prototype.delete=function(){il(this),this.g=!0,clearTimeout(this.a),this.a=null,$e(this.f,"click",this.i)},Mr(ol,"FACTOR_ID","phone"),al.prototype.g=function(){return ye(tl=tl||new Zh)},al.prototype.c=function(){};var sl=null;function ul(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var cl=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),hl=new Nr(3e4,6e4);ul.prototype.g=function(i){var o=this;return new he(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},hl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},ye(ka(wt(cl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},ul.prototype.c=function(){this.b--};var ll=null;function fl(t,e,n,r,i,o,a){if(Mr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a=a?sl=sl||new al:ll=ll||new ul,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[gl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[vl],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Zt(e)||!this.i&&Zt(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new La(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var u=this.a[pl];this.a[pl]=function(t){var e;yl(s,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=gr(u,l))&&e(t)};var c=this.a[dl];this.a[dl]=function(){var t;yl(s,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=gr(c,l))&&t()}}var pl="callback",dl="expired-callback",gl="sitekey",vl="size";function yl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function ml(t,e){return t.h.push(e),e.oa(function(){W(t.h,e)}),e}function bl(t){if(t.D)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function _l(t,e,n){var r=!1;try{this.b=n||jl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=jl.SDK_VERSION?pr(jl.SDK_VERSION,o):null,fl.call(this,n,t,e,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,k(E),r)}function wl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Il.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Il[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=fl.prototype).Ia=function(){var e=this;return this.f||(this.f=ml(this,ye().then(function(){if(mr()&&!ar())return rr();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,Vs(e.s,Es,{})}).then(function(t){e.a[gl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t})))},t.render=function(){bl(this);var n=this;return ml(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.v,n.i||(t=Zt(e),e=function(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!$t&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),lt(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ie(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):te(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(g(o)){a="function"==typeof o.item;break t}}a=!1}j(a?z(o):o,r)}}}(n,r,e),r}("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){bl(this);var i=this;return ml(this,this.render().then(function(e){return new he(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,H(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){bl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){bl(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=Zt(this.v);t=e.firstChild;)e.removeChild(t)},_(_l,fl);var Il="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Tl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function El(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Sl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Cl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Nl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function kl(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ka||!e)}}}function Al(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function Rl(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Ol(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Pl(t){return v(t)&&"string"==typeof t.uid}function Dl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function xl(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function Ll(t,e){for(var n in e){var r=e[n].name;t[r]=Ul(r,t[n],e[n].j)}}function Ml(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){wl(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Fl(t,e,n,r){t[e]=Ul(e,n,r)}function Ul(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return wl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=t.split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Ll(qh.prototype,{jb:{name:"applyActionCode",j:[Tl("code")]},Ra:{name:"checkActionCode",j:[Tl("code")]},nb:{name:"confirmPasswordReset",j:[Tl("code"),Tl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Tl("email"),Tl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Tl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Tl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[xl(Sl(),Cl(),"nextOrObserver"),Cl("opt_error",!0),Cl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[xl(Sl(),Cl(),"nextOrObserver"),Cl("opt_error",!0),Cl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Tl("email"),xl(Sl("opt_actionCodeSettings",!0),Nl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Tl("email"),Sl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Tl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[kl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[kl()]},Tc:{name:"signInWithCustomToken",j:[Tl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Tl("email"),Tl("password")]},Vc:{name:"signInWithEmailLink",j:[Tl("email"),Tl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Tl("phoneNumber"),Dl()]},Xc:{name:"signInWithPopup",j:[Rl()]},Yc:{name:"signInWithRedirect",j:[Rl()]},dd:{name:"updateCurrentUser",j:[xl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof th)}},Nl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Tl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Tl("url"),Sl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Tl("code")]}}),Ml(qh.prototype,{lc:{name:"languageCode",kb:xl(Tl(),Nl(),"languageCode")},ti:{name:"tenantId",kb:xl(Tl(),Nl(),"tenantId")}}),(qh.Persistence=Mu).LOCAL="local",qh.Persistence.SESSION="session",qh.Persistence.NONE="none",Ll(th.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[El("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[El("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[kl()]},qb:{name:"linkWithCredential",j:[kl()]},Dc:{name:"linkWithPhoneNumber",j:[Tl("phoneNumber"),Dl()]},Ec:{name:"linkWithPopup",j:[Rl()]},Fc:{name:"linkWithRedirect",j:[Rl()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[kl()]},tb:{name:"reauthenticateWithCredential",j:[kl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Tl("phoneNumber"),Dl()]},Nc:{name:"reauthenticateWithPopup",j:[Rl()]},Oc:{name:"reauthenticateWithRedirect",j:[Rl()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[xl(Sl("opt_actionCodeSettings",!0),Nl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Tl(null,!0)]},cd:{name:"unlink",j:[Tl("provider")]},Bb:{name:"updateEmail",j:[Tl("email")]},Cb:{name:"updatePassword",j:[Tl("password")]},ed:{name:"updatePhoneNumber",j:[kl("phone")]},Db:{name:"updateProfile",j:[Sl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Tl("email"),xl(Sl("opt_actionCodeSettings",!0),Nl(null,!0),"opt_actionCodeSettings",!0)]}}),Ll(Zh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ll($h.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ll(he.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Ml(Dc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:El("appVerificationDisabledForTesting")}}),Ll(xc.prototype,{confirm:{name:"confirm",j:[Tl("verificationCode")]}}),Fl(Qi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[eo,go,_o,$i],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[xl(Tl(),Sl(),"json")]),Fl(vo,"credential",function(t,e){return new po(t,e)},[Tl("email"),Tl("password")]),Ll(po.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ll(oo.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Fl(oo,"credential",ao,[xl(Tl(),Sl(),"token")]),Fl(vo,"credentialWithLink",yo,[Tl("email"),Tl("emailLink")]),Ll(so.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Fl(so,"credential",uo,[xl(Tl(),Sl(),"token")]),Ll(co.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Fl(co,"credential",ho,[xl(Tl(),xl(Sl(),Nl()),"idToken"),xl(Tl(),Nl(),"accessToken",!0)]),Ll(lo.prototype,{Ka:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Fl(lo,"credential",fo,[xl(Tl(),Sl(),"token"),Tl("secret",!0)]),Ll(io.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},credential:{name:"credential",j:[xl(Tl(),xl(Sl(),Nl()),"optionsOrIdToken"),xl(Tl(),Nl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Ll(Zi.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ll(Xi.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Fl(Io,"credential",To,[Tl("verificationId"),Tl("verificationCode")]),Ll(Io.prototype,{fb:{name:"verifyPhoneNumber",j:[xl(Tl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Ol(t.session,Gi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Ol(t.session,zi)&&Pl(t.multiFactorHint):t.session&&t.multiFactorUid?Ol(t.session,zi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Dl()]}}),Ll(bo.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ll(I.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ll(Po.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ll(Oo.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ll(qc.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ll(Fc.prototype,{Rc:{name:"resolveSignIn",j:[Al()]}}),Ll(Gc.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Al(),Tl("displayName",!0)]},bd:{name:"unenroll",j:[xl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Pl},Tl(),"multiFactorInfoIdentifier")]}}),Ll(_l.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Fl(si,"parseLink",gi,[Tl("link")]),Fl(ol,"assertion",function(t){return new Wc(t)},[kl("phone")]),function(){if(void 0===jl||!jl.INTERNAL||!jl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Yr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Qr,VERIFY_AND_CHANGE_EMAIL:Xr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:qh,AuthCredential:Qi,Error:I};Fl(t,"EmailAuthProvider",vo,[]),Fl(t,"FacebookAuthProvider",oo,[]),Fl(t,"GithubAuthProvider",so,[]),Fl(t,"GoogleAuthProvider",co,[]),Fl(t,"TwitterAuthProvider",lo,[]),Fl(t,"OAuthProvider",io,[Tl("providerId")]),Fl(t,"SAMLAuthProvider",ro,[Tl("providerId")]),Fl(t,"PhoneAuthProvider",Io,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof qh)}}]),Fl(t,"RecaptchaVerifier",_l,[xl(Tl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Sl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof jl.app.App)}}]),Fl(t,"ActionCodeURL",si,[]),Fl(t,"PhoneMultiFactorGenerator",ol,[]),jl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new qh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),jl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.nc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),jl.registerVersion("@firebase/auth","0.16.5"),jl.INTERNAL.extendNamespace({User:th})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ba=(Ka.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),zo(e))},Ka.prototype.get=function(t){return null==(t=this.domStorage_.getItem(this.prefixedName_(t)))?null:Go(t)},Ka.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Ka.prototype.prefixedName_=function(t){return this.prefix_+t},Ka.prototype.toString=function(){return this.domStorage_.toString()},Ka);function Ka(t){this.domStorage_=t,this.prefix_="firebase:"}var Wa=(Ha.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Ha.prototype.get=function(t){return Yo(this.cache_,t)?this.cache_[t]:null},Ha.prototype.remove=function(t){delete this.cache_[t]},Ha);function Ha(){this.cache_={},this.isInMemoryStorage=!0}function Ga(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Eo(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new Zo).update(e),t=t.digest(),Co.encodeByteArray(t)}function za(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+os.apply(void 0,_o([],bo(t)));rs.error(n)}function Qa(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Ya(t,e){return t===e?0:t<e?-1:1}function Xa(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+zo(e))}function Ja(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}function $a(t,e){Eo(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(rs.logLevel=Ta.VERBOSE,as=rs.log.bind(rs),e&&ns.set("logging_enabled",!0)):"function"==typeof t?as=t:(as=null,ns.remove("logging_enabled"))}function Za(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+os.apply(void 0,_o([],bo(t)));throw rs.error(n),new Error(n)}var ts,es=(Gn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ba(e)}}catch(t){}return new Wa})("localStorage"),ns=Gn("sessionStorage"),rs=new Aa("@firebase/database"),is=(ts=1,function(){return ts++}),os=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=os.apply(null,i):n+="object"==typeof i?zo(i):i,n+=" "}return n},as=null,ss=!0,us=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===ss&&(ss=!1,null===as&&!0===ns.get("logging_enabled")&&$a(!0)),as&&(t=os.apply(null,e),as(t))},cs=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];us.apply(void 0,_o([n],bo(t)))}},hs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+os.apply(void 0,_o([],bo(t)));rs.warn(n)},ls="[MIN_NAME]",fs="[MAX_NAME]",ps=function(t,e){if(t===e)return 0;if(t===ls||e===fs)return-1;if(e===ls||t===fs)return 1;var n=ws(t),r=ws(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},ds=function(t){if("object"!=typeof t||null===t)return zo(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=zo(n[i]),r+=":",r+=ds(t[n[i]]);return r+"}"};function gs(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function vs(t){var e,n,r,i;Eo(!Qa(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],a=52;a;--a)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;--a)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();for(var s=o.join(""),u="",a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function ys(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var ms=new RegExp("^-?(0*)\\d{1,10}$"),bs=-2147483648,_s=2147483647,ws=function(t){return ms.test(t)&&(t=Number(t),bs<=t&&t<=_s)?t:null},Is=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw hs("Exception was thrown by user callback.",t),e},Math.floor(0))}},Ts=(Es.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(us("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Es.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Es.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Es.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(t)},Es);function Es(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}var Ss=(Cs.prototype.getToken=function(t){return Promise.resolve({accessToken:Cs.EMULATOR_AUTH_TOKEN})},Cs.prototype.addTokenChangeListener=function(t){t(Cs.EMULATOR_AUTH_TOKEN)},Cs.prototype.removeTokenChangeListener=function(t){},Cs.prototype.notifyForInvalidToken=function(){},Cs.EMULATOR_AUTH_TOKEN="owner",Cs);function Cs(){}var Ns=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ks="websocket",As="long_polling",Rs=(Os.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Os.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Os.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&es.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Os.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Os.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},Os);function Os(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=es.get("host:"+t)||this._host}function Ps(t,e,n){var r;if(Eo("string"==typeof e,"typeof type must == string"),Eo("object"==typeof n,"typeof params must == object"),e===ks)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==As)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return gs(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var Ds=(xs.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Yo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},xs.prototype.get=function(){return No(this.counters_)},xs);function xs(){this.counters_={}}var Ls={},Ms={};function Fs(t){return t=t.toString(),Ls[t]||(Ls[t]=new Ds),Ls[t]}var Us=(js.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},js.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&Is(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},js);function js(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var qs="pLPCommand",Vs="pRTLPCB",Bs=(Ks.prototype.open=function(t,e){var n,r,i,a=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Us(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){a.log_("Timed out trying to connect."),a.onClosed_(),a.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;a.isClosed_||(a.scriptTagHolder=new Ws(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=bo(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],a.incrementIncomingBytes_(t),a.scriptTagHolder)if(a.connectTimeoutTimer_&&(clearTimeout(a.connectTimeoutTimer_),a.connectTimeoutTimer_=null),a.everConnected_=!0,"start"===r)a.id=i,a.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(a.scriptTagHolder.sendNewPolls=!1,a.myPacketOrderer.closeAfter(i,function(){a.onClosed_()})):a.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(r=bo(t,2))[0],r=r[1];a.incrementIncomingBytes_(t),a.myPacketOrderer.handleResponse(n,r)},function(){a.onClosed_()},a.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),a.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=a.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",a.transportSessionId&&(t.s=a.transportSessionId),a.lastSessionId&&(t.ls=a.lastSessionId),a.applicationId&&(t.p=a.applicationId),"undefined"!=typeof location&&location.hostname&&Ns.test(location.hostname)&&(t.r="f"),t=a.urlFn(t),a.log_("Connecting via long-poll to "+t),a.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Ks.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Ks.forceAllow=function(){Ks.forceAllow_=!0},Ks.forceDisallow=function(){Ks.forceDisallow_=!0},Ks.isAvailable=function(){return!!Ks.forceAllow_||!(Ks.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Ks.prototype.markConnectionHealthy=function(){},Ks.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Ks.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Ks.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Ks.prototype.send=function(t){t=zo(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e,n=Ja(t=(e=wo(e=t),Co.encodeByteArray(e,!0)),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},Ks.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Ks.prototype.incrementIncomingBytes_=function(t){t=zo(t).length,this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Ks);function Ks(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cs(t),this.stats_=Fs(e),this.urlFn=function(t){return Ps(e,As,t)}}var Ws=(Hs.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||us("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Hs.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Hs.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Hs.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++,(t={}).id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+e.length<=1870;){var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},Hs.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Hs.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Hs.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){us("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Hs);function Hs(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=is(),window[qs+this.uniqueCallbackIdentifier]=t,window[Vs+this.uniqueCallbackIdentifier]=e,this.myIFrame=Hs.createIFrame_();var e="",i="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){us("frame writing exception"),t.stack&&us(t.stack),us(t)}}var Gs="";function zs(t){Gs=t}var Qs=null;"undefined"!=typeof MozWebSocket?Qs=MozWebSocket:"undefined"!=typeof WebSocket&&(Qs=WebSocket);var Ys=(Xs.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Ns.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),Ps(t,ks,r)},Xs.prototype.open=function(t,e){var n,r=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,es.set("previous_websocket_failure",!0);try{Lo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Qs(this.connURL,[],n))}catch(e){return this.log_("Error instantiating WebSocket."),(t=e.message||e.data)&&this.log_(t),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection."),(t=t.message||t.data)&&r.log_(t),r.onClosed_()}},Xs.prototype.start=function(){},Xs.forceDisallow=function(){Xs.forceDisallow_=!0},Xs.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==Qs&&!Xs.forceDisallow_},Xs.previouslyFailed=function(){return es.isInMemoryStorage||!0===es.get("previous_websocket_failure")},Xs.prototype.markConnectionHealthy=function(){es.remove("previous_websocket_failure")},Xs.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Go(t),this.onMessage(t))},Xs.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Xs.prototype.extractFrameCount_=function(t){if(Eo(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Xs.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null===this.frames&&null===(t=this.extractFrameCount_(t))||this.appendFrame_(t))},Xs.prototype.send=function(t){this.resetKeepAlive(),t=zo(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=Ja(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},Xs.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Xs.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Xs.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Xs.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Xs.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Xs.responsesRequiredToBeHealthy=2,Xs.healthyTimeout=3e4,Xs);function Xs(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cs(this.connId),this.stats_=Fs(e),this.connURL=Xs.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var Js=(Object.defineProperty($s,"ALL_TRANSPORTS",{get:function(){return[Bs,Ys]},enumerable:!1,configurable:!0}),$s.prototype.initTransports_=function(t){var e,n,r=Ys&&Ys.isAvailable(),i=r&&!Ys.previouslyFailed();if(t.webSocketOnly&&(r||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ys];else{var o=this.transports_=[];try{for(var a=mo($s.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},$s.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},$s.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},$s);function $s(t){this.initTransports_(t)}var Zs=(tu.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0)),0<(e=e.healthyTimeout||0)&&(this.healthyTimeout_=ys(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},tu.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},tu.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},tu.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},tu.prototype.sendRequest=function(t){t={t:"d",d:t},this.sendData_(t)},tu.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},tu.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},tu.prototype.onSecondaryMessageReceived_=function(t){var e=Xa("t",t),t=Xa("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},tu.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},tu.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},tu.prototype.onPrimaryMessageReceived_=function(t){var e=Xa("t",t),t=Xa("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},tu.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},tu.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},tu.prototype.onControl_=function(t){var e=Xa("t",t);if("d"in t)if(t=t.d,"h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?za("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):za("Unknown control packet command: "+e)},tu.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())},tu.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},tu.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),ys(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},tu.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},tu.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ys(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},tu.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},tu.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},tu.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(es.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},tu.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},tu.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},tu.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},tu.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},tu);function tu(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cs("c:"+this.id+":"),this.transportManager_=new Js(e),this.log_("Connection created"),this.start_()}function eu(){}eu.prototype.put=function(t,e,n,r){},eu.prototype.merge=function(t,e,n,r){},eu.prototype.refreshAuthToken=function(t){},eu.prototype.onDisconnectPut=function(t,e,n){},eu.prototype.onDisconnectMerge=function(t,e,n){},eu.prototype.onDisconnectCancel=function(t,e){},eu.prototype.reportStats=function(t){},ft=eu;var nu=(ru.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=_o([],bo(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},ru.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n}),(t=this.getInitialEvent(t))&&e.apply(n,t)},ru.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},ru.prototype.validateEventType_=function(e){Eo(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},ru);function ru(t){this.allowedEvents_=t,this.listeners_={},Eo(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var iu,ou=(po(au,iu=nu),au.getInstance=function(){return new au},au.prototype.getInitialEvent=function(t){return Eo("online"===t,"Unknown event type: "+t),[this.online_]},au.prototype.currentlyOnline=function(){return this.online_},au);function au(){var t=iu.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Po()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var su=(uu.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},uu);function uu(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function cu(){return new su("")}function hu(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function lu(t){return t.pieces_.length-t.pieceNum_}function fu(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new su(t.pieces_,e)}function pu(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function du(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function gu(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new su(e,0)}function vu(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof su)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)0<i[r].length&&n.push(i[r]);return new su(n,0)}function yu(t){return t.pieceNum_>=t.pieces_.length}function mu(t,e){var n=hu(t),r=hu(e);if(null===n)return e;if(n===r)return mu(fu(t),fu(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function bu(t,e){for(var n=du(t,0),r=du(e,0),i=0;i<n.length&&i<r.length;i++){var o=ps(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function _u(t,e){if(lu(t)!==lu(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function wu(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(lu(t)>lu(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}function Iu(t,e){this.errorPrefix_=e,this.parts_=du(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=ca(this.parts_[n]);Tu(this)}function Tu(t){if(768<t.byteLength_)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(32<t.parts_.length)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Eu(t))}function Eu(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Su,Cu=(po(Nu,Su=nu),Nu.getInstance=function(){return new Nu},Nu.prototype.getInitialEvent=function(t){return Eo("visible"===t,"Unknown event type: "+t),[this.visible_]},Nu);function Nu(){var e,t,n=Su.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var ku,Au=1e3,Ru=3e5,Ou=(po(Pu,ku=ft),Pu.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(zo(e)),Eo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},Pu.prototype.get=function(t){var n=this,r=new Ao,i={p:t._path.toString(),q:t._queryObject},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},Pu.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Eo(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Eo(!this.listens.get(o).has(i),"listen() called twice for same path/queryId."),n={onComplete:r,hashFn:e,query:t,tag:n},this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},Pu.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},Pu.prototype.sendListen_=function(r){var i=this,o=r.query,a=o._path.toString(),s=o._queryIdentifier;this.log_("Listen on "+a+" for "+s);var t={p:a};r.tag&&(t.q=o._queryObject,t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Pu.warnOnListenWarnings_(e,o),(i.listens.get(a)&&i.listens.get(a).get(s))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(a,s),r.onComplete&&r.onComplete(n,e))})},Pu.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Yo(t,"w")&&(t=Xo(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',e=e._path.toString(),hs("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},Pu.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Pu.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||"object"==typeof(t=Qo(t=t).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Pu.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=(e=Qo(e=n=this.authToken_).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},Pu.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Eo(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},Pu.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e),t={p:t},r&&(t.q=n,t.t=r),this.sendRequest("n",t)},Pu.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Pu.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Pu.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Pu.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n},this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Pu.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Pu.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Pu.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++,r=this.outstandingPuts_.length-1,this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},Pu.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Pu.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},Pu.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+zo(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Pu.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):za("Unrecognized action received from server: "+zo(t)+"\nAre you using the latest client?")},Pu.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Pu.prototype.scheduleConnect_=function(t){var e=this;Eo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Pu.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Au,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Pu.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Au,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Pu.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Au),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Pu.prototype.establishConnection_=function(){var e,n,r,i,o,a,s,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Pu.nextConnectionId_++,a=(o=this).lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())},this.realtime_={close:c,sendRequest:function(t){Eo(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){s?us("getToken() completed but was canceled"):(us("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Zs(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){hs(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||(h.repoInfo_.nodeAdmin&&hs(t),c())}))},Pu.prototype.interrupt=function(t){us("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Pu.prototype.resume=function(t){us("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Jo(this.interruptReasons_)&&(this.reconnectDelay_=Au,this.realtime_||this.scheduleConnect_(0))},Pu.prototype.handleTimestamp_=function(t){t-=(new Date).getTime(),this.onServerInfoUpdate_({serverTimeOffset:t})},Pu.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Pu.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return ds(t)}).join("$"):"default",(e=this.removeListen_(t,e))&&e.onComplete&&e.onComplete("permission_denied")},Pu.prototype.removeListen_=function(t,e){var n,r=new su(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},Pu.prototype.onAuthRevoked_=function(t,e){us("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Pu.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Pu.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=mo(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,mo(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},Pu.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Gs.replace(/\./g,"-")]=1,Po()?t["framework.cordova"]=1:xo()&&(t["framework.reactnative"]=1),this.reportStats(t)},Pu.prototype.shouldReconnect_=function(){var t=ou.getInstance().currentlyOnline();return Jo(this.interruptReasons_)&&t},Pu.nextPersistentConnectionId_=0,Pu.nextConnectionId_=0,Pu);function Pu(t,e,n,r,i,o,a){var s=ku.call(this)||this;if(s.repoInfo_=t,s.applicationId_=e,s.onDataUpdate_=n,s.onConnectStatus_=r,s.onServerInfoUpdate_=i,s.authTokenProvider_=o,s.authOverride_=a,s.id=Pu.nextPersistentConnectionId_++,s.log_=cs("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingGets_=[],s.outstandingPutCount_=0,s.outstandingGetCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=Au,s.maxReconnectDelay_=Ru,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,a&&!Lo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),Cu.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&ou.getInstance().on("online",s.onOnline_,s),s}var Du=(xu.Wrap=function(t,e){return new xu(t,e)},xu);function xu(t,e){this.name=t,this.node=e}var Lu,Mu,lt=(Fu.prototype.getCompare=function(){return this.compare.bind(this)},Fu.prototype.indexedValueChanged=function(t,e){return t=new Du(ls,t),e=new Du(ls,e),0!==this.compare(t,e)},Fu.prototype.minPost=function(){return Du.MIN},Fu);function Fu(){}function Uu(){return null!==Mu&&Mu.apply(this,arguments)||this}var ju=new(Gn=(po(Uu,Mu=lt),Object.defineProperty(Uu,"__EMPTY_NODE",{get:function(){return Lu},set:function(t){Lu=t},enumerable:!1,configurable:!0}),Uu.prototype.compare=function(t,e){return ps(t.name,e.name)},Uu.prototype.isDefinedOn=function(t){throw So("KeyIndex.isDefinedOn not expected to be called.")},Uu.prototype.indexedValueChanged=function(t,e){return!1},Uu.prototype.minPost=function(){return Du.MIN},Uu.prototype.maxPost=function(){return new Du(fs,Lu)},Uu.prototype.makePost=function(t,e){return Eo("string"==typeof t,"KeyIndex indexValue must always be a string."),new Du(t,Lu)},Uu.prototype.toString=function(){return".key"},Uu)),qu=(Vu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Vu.prototype.hasNext=function(){return 0<this.nodeStack_.length},Vu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Vu);function Vu(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Bu=(Ku.prototype.copy=function(t,e,n,r,i){return new Ku(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Ku.prototype.count=function(){return this.left.count()+1+this.right.count()},Ku.prototype.isEmpty=function(){return!1},Ku.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Ku.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Ku.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Ku.prototype.minKey=function(){return this.min_().key},Ku.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Ku.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Ku.prototype.removeMin_=function(){if(this.left.isEmpty())return Gu.EMPTY_NODE;var t=this;return(t=(t=t.left.isRed_()||t.left.left.isRed_()?t:t.moveRedLeft_()).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Ku.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()?r:r.moveRedLeft_()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()?r:r.moveRedRight_()).key)){if(r.right.isEmpty())return Gu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Ku.prototype.isRed_=function(){return this.color},Ku.prototype.fixUp_=function(){var t=this;return(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},Ku.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},Ku.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},Ku.prototype.rotateLeft_=function(){var t=this.copy(null,null,Ku.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Ku.prototype.rotateRight_=function(){var t=this.copy(null,null,Ku.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Ku.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Ku.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Ku.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Ku.RED=!0,Ku.BLACK=!1,Ku);function Ku(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ku.RED,this.left=null!=r?r:Gu.EMPTY_NODE,this.right=null!=i?i:Gu.EMPTY_NODE}function Wu(){}Wu.prototype.copy=function(t,e,n,r,i){return this},Wu.prototype.insert=function(t,e,n){return new Bu(t,e,null)},Wu.prototype.remove=function(t,e){return this},Wu.prototype.count=function(){return 0},Wu.prototype.isEmpty=function(){return!0},Wu.prototype.inorderTraversal=function(t){return!1},Wu.prototype.reverseTraversal=function(t){return!1},Wu.prototype.minKey=function(){return null},Wu.prototype.maxKey=function(){return null},Wu.prototype.check_=function(){return 0},Wu.prototype.isRed_=function(){return!1},nu=Wu;var Hu,Gu=(zu.prototype.insert=function(t,e){return new zu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Bu.BLACK,null,null))},zu.prototype.remove=function(t){return new zu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Bu.BLACK,null,null))},zu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},zu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},zu.prototype.isEmpty=function(){return this.root_.isEmpty()},zu.prototype.count=function(){return this.root_.count()},zu.prototype.minKey=function(){return this.root_.minKey()},zu.prototype.maxKey=function(){return this.root_.maxKey()},zu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},zu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},zu.prototype.getIterator=function(t){return new qu(this.root_,null,this.comparator_,!1,t)},zu.prototype.getIteratorFrom=function(t,e){return new qu(this.root_,t,this.comparator_,!1,e)},zu.prototype.getReverseIteratorFrom=function(t,e){return new qu(this.root_,t,this.comparator_,!0,e)},zu.prototype.getReverseIterator=function(t){return new qu(this.root_,null,this.comparator_,!0,t)},zu.EMPTY_NODE=new nu,zu);function zu(t,e){void 0===e&&(e=zu.EMPTY_NODE),this.comparator_=t,this.root_=e}function Qu(t,e){return ps(t.name,e.name)}function Yu(t,e){return ps(t,e)}function Xu(t){return"number"==typeof t?"number:"+vs(t):"string:"+t}var Ju,$u,Zu,tc,ec=function(t){var e;t.isLeafNode()?(e=t.val(),Eo("string"==typeof e||"number"==typeof e||"object"==typeof e&&Yo(e,".sv"),"Priority must be a string or number.")):Eo(t===Hu||t.isEmpty(),"priority of unexpected type."),Eo(t===Hu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},nc=(Object.defineProperty(rc,"__childrenNodeConstructor",{get:function(){return Ju},set:function(t){Ju=t},enumerable:!1,configurable:!0}),rc.prototype.isLeafNode=function(){return!0},rc.prototype.getPriority=function(){return this.priorityNode_},rc.prototype.updatePriority=function(t){return new rc(this.value_,t)},rc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:rc.__childrenNodeConstructor.EMPTY_NODE},rc.prototype.getChild=function(t){return yu(t)?this:".priority"===hu(t)?this.priorityNode_:rc.__childrenNodeConstructor.EMPTY_NODE},rc.prototype.hasChild=function(){return!1},rc.prototype.getPredecessorChildName=function(t,e){return null},rc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:rc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},rc.prototype.updateChild=function(t,e){var n=hu(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(Eo(".priority"!==n||1===lu(t),".priority must be the last token in a path"),this.updateImmediateChild(n,rc.__childrenNodeConstructor.EMPTY_NODE.updateChild(fu(t),e)))},rc.prototype.isEmpty=function(){return!1},rc.prototype.numChildren=function(){return 0},rc.prototype.forEachChild=function(t,e){return!1},rc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},rc.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Xu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?vs(this.value_):this.value_,this.lazyHash_=Ga(t)),this.lazyHash_},rc.prototype.getValue=function(){return this.value_},rc.prototype.compareTo=function(t){return t===rc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof rc.__childrenNodeConstructor?-1:(Eo(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},rc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=rc.VALUE_TYPE_ORDER.indexOf(e),i=rc.VALUE_TYPE_ORDER.indexOf(n);return Eo(0<=r,"Unknown leaf type: "+e),Eo(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},rc.prototype.withIndex=function(){return this},rc.prototype.isIndexed=function(){return!0},rc.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},rc.VALUE_TYPE_ORDER=["object","boolean","number","string"],rc);function rc(t,e){void 0===e&&(e=rc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Eo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ec(this.priorityNode_)}function ic(){return null!==tc&&tc.apply(this,arguments)||this}var oc=(po(ic,tc=lt),ic.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority();return 0===(r=n.compareTo(r))?ps(t.name,e.name):r},ic.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},ic.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},ic.prototype.minPost=function(){return Du.MIN},ic.prototype.maxPost=function(){return new Du(fs,new nc("[PRIORITY-POST]",Zu))},ic.prototype.makePost=function(t,e){return t=$u(t),new Du(e,new nc("[PRIORITY-POST]",t))},ic.prototype.toString=function(){return".priority"},new ic),ac=Math.log(2),sc=(uc.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},uc);function uc(t){this.count=(e=t+1,parseInt(Math.log(e)/ac,10)),this.current_=this.count-1;var e=(e=this.count,parseInt(Array(e+1).join("1"),2));this.bits_=t+1&e}var cc,hc,lc=function(c,t,h,e){c.sort(t);var l=function(t,e){if(0==(n=e-t))return null;if(1==n)return r=c[t],i=h?h(r):r,new Bu(i,r.node,Bu.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new Bu(i,r.node,Bu.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t,t=l(1+n,r),r=c[n],n=h?h(r):r,o(new Bu(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},a=0;a<t.count;++a){var s=t.nextBitIsOne(),u=Math.pow(2,t.count-(a+1));s?r(u,Bu.BLACK):(r(u,Bu.BLACK),r(u,Bu.RED))}return n}(new sc(c.length));return new Gu(e||t,n)},fc={},pc=(Object.defineProperty(dc,"Default",{get:function(){return Eo(oc,"ChildrenNode.ts has not been loaded"),cc=cc||new dc({".priority":fc},{".priority":oc})},enumerable:!1,configurable:!0}),dc.prototype.get=function(t){var e=Xo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Gu?e:null},dc.prototype.hasIndex=function(t){return Yo(this.indexSet_,t.toString())},dc.prototype.addIndex=function(t,e){Eo(t!==ju,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=e.getIterator(Du.Wrap),o=i.getNext();o;)r=r||t.isDefinedOn(o.node),n.push(o),o=i.getNext();var a=r?lc(n,t.getCompare()):fc,s=t.toString(),u=go({},this.indexSet_);return u[s]=t,(e=go({},this.indexes_))[s]=a,new dc(e,u)},dc.prototype.addToIndexes=function(a,s){var u=this;return new dc($o(this.indexes_,function(t,e){var n=Xo(u.indexSet_,e);if(Eo(n,"Missing index implementation for "+e),t!==fc)return(t=(n=s.get(a.name))?t.remove(new Du(a.name,n)):t).insert(a,a.node);if(n.isDefinedOn(a.node)){for(var r=[],i=s.getIterator(Du.Wrap),o=i.getNext();o;)o.name!==a.name&&r.push(o),o=i.getNext();return r.push(a),lc(r,n.getCompare())}return fc}),this.indexSet_)},dc.prototype.removeFromIndexes=function(n,r){return new dc($o(this.indexes_,function(t){if(t===fc)return t;var e=r.get(n.name);return e?t.remove(new Du(n.name,e)):t}),this.indexSet_)},dc);function dc(t,e){this.indexes_=t,this.indexSet_=e}var gc,vc=(Object.defineProperty(yc,"EMPTY_NODE",{get:function(){return hc=hc||new yc(new Gu(Yu),null,pc.Default)},enumerable:!1,configurable:!0}),yc.prototype.isLeafNode=function(){return!1},yc.prototype.getPriority=function(){return this.priorityNode_||hc},yc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new yc(this.children_,t,this.indexMap_)},yc.prototype.getImmediateChild=function(t){return".priority"===t?this.getPriority():null===(t=this.children_.get(t))?hc:t},yc.prototype.getChild=function(t){var e=hu(t);return null===e?this:this.getImmediateChild(e).getChild(fu(t))},yc.prototype.hasChild=function(t){return null!==this.children_.get(t)},yc.prototype.updateImmediateChild=function(t,e){if(Eo(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Du(t,e),r=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?hc:this.priorityNode_;return new yc(r,n,i)},yc.prototype.updateChild=function(t,e){var n=hu(t);return null===n?e:(Eo(".priority"!==hu(t)||1===lu(t),".priority must be the last token in a path"),e=this.getImmediateChild(n).updateChild(fu(t),e),this.updateImmediateChild(n,e))},yc.prototype.isEmpty=function(){return this.children_.isEmpty()},yc.prototype.numChildren=function(){return this.children_.count()},yc.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,a=!0;if(this.forEachChild(oc,function(t,e){r[t]=e.val(n),i++,a&&yc.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):a=!1}),!n&&a&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},yc.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+Xu(this.getPriority().val())+":"),this.forEachChild(oc,function(t,e){""!==(e=e.hash())&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":Ga(n)),this.lazyHash_},yc.prototype.getPredecessorChildName=function(t,e,n){return(n=this.resolveIndex_(n))?(e=n.getPredecessorKey(new Du(t,e)))?e.name:null:this.children_.getPredecessorKey(t)},yc.prototype.getFirstChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.minKey())&&t.name:this.children_.minKey()},yc.prototype.getFirstChild=function(t){return(t=this.getFirstChildName(t))?new Du(t,this.children_.get(t)):null},yc.prototype.getLastChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.maxKey())&&t.name:this.children_.maxKey()},yc.prototype.getLastChild=function(t){return(t=this.getLastChildName(t))?new Du(t,this.children_.get(t)):null},yc.prototype.forEachChild=function(t,e){return(t=this.resolveIndex_(t))?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},yc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},yc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Du.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},yc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},yc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Du.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},yc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bc?-1:0},yc.prototype.withIndex=function(t){return t===ju||this.indexMap_.hasIndex(t)?this:(t=this.indexMap_.addIndex(t,this.children_),new yc(this.children_,this.priorityNode_,t))},yc.prototype.isIndexed=function(t){return t===ju||this.indexMap_.hasIndex(t)},yc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(oc),n=t.getIterator(oc),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},yc.prototype.resolveIndex_=function(t){return t===ju?null:this.indexMap_.get(t.toString())},yc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,yc);function yc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ec(this.priorityNode_),this.children_.isEmpty()&&Eo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function mc(){return gc.call(this,new Gu(Yu),vc.EMPTY_NODE,pc.Default)||this}var bc=(po(mc,gc=vc),mc.prototype.compareTo=function(t){return t===this?0:1},mc.prototype.equals=function(t){return t===this},mc.prototype.getPriority=function(){return this},mc.prototype.getImmediateChild=function(t){return vc.EMPTY_NODE},mc.prototype.isEmpty=function(){return!1},new mc);Object.defineProperties(Du,{MIN:{value:new Du(ls,vc.EMPTY_NODE)},MAX:{value:new Du(fs,bc)}}),Gn.__EMPTY_NODE=vc.EMPTY_NODE,nc.__childrenNodeConstructor=vc,Zu=Hu=bc;var _c=!0;function wc(n,t){if(void 0===t&&(t=null),null===n)return vc.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),Eo(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new nc(n,wc(t));if(n instanceof Array||!_c){var r=vc.EMPTY_NODE;return gs(n,function(t,e){Yo(n,t)&&"."!==t.substring(0,1)&&(!(e=wc(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(wc(t))}var i=[],o=!1;if(gs(n,function(t,e){"."!==t.substring(0,1)&&((e=wc(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new Du(t,e))))}),0===i.length)return vc.EMPTY_NODE;var e=lc(i,Qu,function(t){return t.name},Yu);if(o){var a=lc(i,oc.getCompare());return new vc(e,wc(t),new pc({".priority":a},{".priority":oc}))}return new vc(e,wc(t),pc.Default)}$u=wc;var Ic,Tc,Ec=(po(Sc,Ic=lt),Sc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Sc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Sc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node);return 0===(r=n.compareTo(r))?ps(t.name,e.name):r},Sc.prototype.makePost=function(t,e){return t=wc(t),t=vc.EMPTY_NODE.updateChild(this.indexPath_,t),new Du(e,t)},Sc.prototype.maxPost=function(){var t=vc.EMPTY_NODE.updateChild(this.indexPath_,bc);return new Du(fs,t)},Sc.prototype.toString=function(){return du(this.indexPath_,0).join("/")},Sc);function Sc(t){var e=Ic.call(this)||this;return e.indexPath_=t,Eo(!yu(t)&&".priority"!==hu(t),"Can't create PathIndex with empty path or .priority key"),e}function Cc(){return null!==Tc&&Tc.apply(this,arguments)||this}function Nc(t){if(t===""+_s)return"-";var e=ws(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?fs:(e=n[i],e=Pc.charAt(Pc.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function kc(t){if(t===""+bs)return ls;var e=ws(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+_s:(delete n[n.length-1],n.join("")):(n[n.length-1]=Pc.charAt(Pc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var Ac,Rc,Oc=(po(Cc,Tc=lt),Cc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ps(t.name,e.name):n},Cc.prototype.isDefinedOn=function(t){return!0},Cc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Cc.prototype.minPost=function(){return Du.MIN},Cc.prototype.maxPost=function(){return Du.MAX},Cc.prototype.makePost=function(t,e){return t=wc(t),new Du(e,t)},Cc.prototype.toString=function(){return".value"},new Cc),Pc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Dc=(Ac=0,Rc=[],function(t){var e=t===Ac;Ac=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Pc.charAt(t%64),t=Math.floor(t/64);Eo(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Rc[r];r--)Rc[r]=0;Rc[r]++}else for(r=0;r<12;r++)Rc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Pc.charAt(Rc[r]);return Eo(20===i.length,"nextPushId: Length should be 20."),i});function xc(t){return{type:"value",snapshotNode:t}}function Lc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Mc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Fc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Uc=(jc.prototype.updateChild=function(t,e,n,r,i,o){Eo(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Mc(e,a)):Eo(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Lc(e,n)):o.trackChildChange(Fc(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},jc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(oc,function(t,e){n.hasChild(t)||i.trackChildChange(Mc(t,e))}),n.isLeafNode()||n.forEachChild(oc,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Fc(t,e,n)):i.trackChildChange(Lc(t,e))})),n.withIndex(this.index_)},jc.prototype.updatePriority=function(t,e){return t.isEmpty()?vc.EMPTY_NODE:t.updatePriority(e)},jc.prototype.filtersNodes=function(){return!1},jc.prototype.getIndexedFilter=function(){return this},jc.prototype.getIndex=function(){return this.index_},jc);function jc(t){this.index_=t}var qc=(Vc.prototype.getStartPost=function(){return this.startPost_},Vc.prototype.getEndPost=function(){return this.endPost_},Vc.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Vc.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Du(e,n))||(n=vc.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Vc.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=vc.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(vc.EMPTY_NODE),i=this;return e.forEachChild(oc,function(t,e){i.matches(new Du(t,e))||(r=r.updateImmediateChild(t,vc.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Vc.prototype.updatePriority=function(t,e){return t},Vc.prototype.filtersNodes=function(){return!0},Vc.prototype.getIndexedFilter=function(){return this.indexedFilter_},Vc.prototype.getIndex=function(){return this.index_},Vc.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Vc.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Vc);function Vc(t){this.indexedFilter_=new Uc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Vc.getStartPost_(t),this.endPost_=Vc.getEndPost_(t)}var Bc=(Kc.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Du(e,n))||(n=vc.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Kc.prototype.updateFullNode=function(t,e,n){if(e.isLeafNode()||e.isEmpty())r=vc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){var r=vc.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(vc.EMPTY_NODE);for(var s,u=void 0,c=void 0,h=void 0,i=void 0,h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),s=this.index_.getCompare(),function(t,e){return s(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0,l=!1;i.hasNext();)a=i.getNext(),(l=!l&&h(u,a)<=0||l)&&o<this.limit_&&h(a,c)<=0?o++:r=r.updateImmediateChild(a.name,vc.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Kc.prototype.updatePriority=function(t,e){return t},Kc.prototype.filtersNodes=function(){return!0},Kc.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Kc.prototype.getIndex=function(){return this.index_},Kc.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,a=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare(),s=t;Eo(s.numChildren()===this.limit_,"");var u=new Du(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:a(f,u);return h&&!n.isEmpty()&&0<=p?(null!=i&&i.trackChildChange(Fc(e,n,l)),s.updateImmediateChild(e,n)):(null!=i&&i.trackChildChange(Mc(e,l)),l=s.updateImmediateChild(e,vc.EMPTY_NODE),null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Lc(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l)}return!n.isEmpty()&&h&&0<=a(c,u)?(null!=i&&(i.trackChildChange(Mc(c.name,c.node)),i.trackChildChange(Lc(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,vc.EMPTY_NODE)):t},Kc);function Kc(t){this.rangedFilter_=new qc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Wc=(Hc.prototype.hasStart=function(){return this.startSet_},Hc.prototype.hasStartAfter=function(){return this.startAfterSet_},Hc.prototype.hasEndBefore=function(){return this.endBeforeSet_},Hc.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},Hc.prototype.getIndexStartValue=function(){return Eo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Hc.prototype.getIndexStartName=function(){return Eo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ls},Hc.prototype.hasEnd=function(){return this.endSet_},Hc.prototype.getIndexEndValue=function(){return Eo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Hc.prototype.getIndexEndName=function(){return Eo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fs},Hc.prototype.hasLimit=function(){return this.limitSet_},Hc.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Hc.prototype.getLimit=function(){return Eo(this.limitSet_,"Only valid if limit has been set"),this.limit_},Hc.prototype.getIndex=function(){return this.index_},Hc.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Hc.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===oc},Hc.prototype.copy=function(){var t=new Hc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Hc);function Hc(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oc}function Gc(t,e,n){return(t=t.copy()).startSet_=!0,void 0===e&&(e=null),t.indexStartValue_=e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function zc(t,e,n){return(t=t.copy()).endSet_=!0,void 0===e&&(e=null),t.indexEndValue_=e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function Qc(t,e){return(t=t.copy()).index_=e,t}function Yc(t){var e,n={};return t.isDefault()||(e=t.index_===oc?"$priority":t.index_===Oc?"$value":t.index_===ju?"$key":(Eo(t.index_ instanceof Ec,"Unrecognized index type!"),t.index_.toString()),n.orderBy=zo(e),t.startSet_&&(n.startAt=zo(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+zo(t.indexStartName_))),t.endSet_&&(n.endAt=zo(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+zo(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Xc(t){var e,n={};return t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==oc&&(n.i=t.index_.toString()),n}var Jc,$c=(po(Zc,Jc=ft),Zc.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Zc.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Eo(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},Zc.prototype.listen=function(t,e,n,r){var i=this,o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);var a=Zc.getListenId_(t,n),s={};this.listens_[a]=s,t=Yc(t._queryParams),this.restRequest_(o+".json",t,function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),Xo(i.listens_,a)===s&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Zc.prototype.unlisten=function(t,e){e=Zc.getListenId_(t,e),delete this.listens_[e]},Zc.prototype.get=function(t){var n=this,e=Yc(t._queryParams),r=t._path.toString(),i=new Ao;return this.restRequest_(r+".json",e,function(t,e){null===(t=404===t?e=null:t)?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},Zc.prototype.refreshAuthToken=function(t){},Zc.prototype.restRequest_=function(r,i,o){var a=this;(i=void 0===i?{}:i).format="export",this.authTokenProvider_.getToken(!1).then(function(t){(t=t&&t.accessToken)&&(i.auth=t);var e=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+r+"?ns="+a.repoInfo_.namespace+function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}(i);a.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){a.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=Go(n.responseText)}catch(t){hs("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&hs("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},Zc);function Zc(t,e,n){var r=Jc.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=cs("p:rest:"),r.listens_={},r}var th=(eh.prototype.getNode=function(t){return this.rootNode_.getChild(t)},eh.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},eh);function eh(){this.rootNode_=vc.EMPTY_NODE}function nh(){return{value:null,children:new Map}}function rh(t,e,n){var r;yu(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=hu(e),t.children.has(r)||t.children.set(r,nh()),rh(t.children.get(r),e=fu(e),n))}function ih(t,n,r){var i;null!==t.value?r(n,t.value):(i=function(t,e){ih(e,new su(n.toString()+"/"+t),r)},t.children.forEach(function(t,e){i(e,t)}))}var oh=(ah.prototype.get=function(){var t=this.collection_.get(),n=go({},t);return this.last_&&gs(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},ah);function ah(t){this.collection_=t,this.last_=null}var sh,uh=(ch.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;gs(t,function(t,e){0<e&&Yo(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),ys(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},ch);function ch(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new oh(t),t=1e4+2e4*Math.random(),ys(this.reportStats_.bind(this),Math.floor(t))}function hh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}(nu=sh=sh||{})[nu.OVERWRITE=0]="OVERWRITE",nu[nu.MERGE=1]="MERGE",nu[nu.ACK_USER_WRITE=2]="ACK_USER_WRITE",nu[nu.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var ph=(dh.prototype.operationForChild=function(t){if(yu(this.path)){if(null!=this.affectedTree.value)return Eo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new su(t));return new dh(cu(),e,this.revert)}return Eo(hu(this.path)===t,"operationForChild called for unrelated child."),new dh(fu(this.path),this.affectedTree,this.revert)},dh);function dh(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=sh.ACK_USER_WRITE,this.source=hh()}var gh=(vh.prototype.operationForChild=function(t){return yu(this.path)?new vh(this.source,cu()):new vh(this.source,fu(this.path))},vh);function vh(t,e){this.source=t,this.path=e,this.type=sh.LISTEN_COMPLETE}var yh=(mh.prototype.operationForChild=function(t){return yu(this.path)?new mh(this.source,cu(),this.snap.getImmediateChild(t)):new mh(this.source,fu(this.path),this.snap)},mh);function mh(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=sh.OVERWRITE}var bh=(_h.prototype.operationForChild=function(t){if(yu(this.path)){var e=this.children.subtree(new su(t));return e.isEmpty()?null:e.value?new yh(this.source,cu(),e.value):new _h(this.source,cu(),e)}return Eo(hu(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new _h(this.source,fu(this.path),this.children)},_h.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},_h);function _h(t,e,n){this.source=t,this.path=e,this.children=n,this.type=sh.MERGE}var wh=(Ih.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Ih.prototype.isFiltered=function(){return this.filtered_},Ih.prototype.isCompleteForPath=function(t){return yu(t)?this.isFullyInitialized()&&!this.filtered_:(t=hu(t),this.isCompleteForChild(t))},Ih.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Ih.prototype.getNode=function(){return this.node_},Ih);function Ih(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}function Th(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}var Eh;function Sh(r,i,e,t,o,a){(t=t.filter(function(t){return t.type===e})).sort(function(t,e){return function(t,e,n){if(null==e.childName||null==n.childName)throw So("Should only compare child_ events.");return e=new Du(e.childName,e.snapshotNode),n=new Du(n.childName,n.snapshotNode),t.index_.compare(e,n)}(r,t,e)}),t.forEach(function(e){var t,n=("value"===(t=e).type||"child_removed"===t.type||(t.prevName=a.getPredecessorChildName(t.childName,t.snapshotNode,r.index_)),t);o.forEach(function(t){t.respondsTo(e.type)&&i.push(t.createEvent(n,r.query_))})})}function Ch(t,e){return{eventCache:t,serverCache:e}}function Nh(t,e,n,r){return Ch(new wh(e,n,r),t.serverCache)}function kh(t,e,n,r){return Ch(t.eventCache,new wh(e,n,r))}function Ah(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Rh(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Oh=(Ph.fromObject=function(t){var n=new Ph(null);return gs(t,function(t,e){n=n.set(new su(t),e)}),n},Ph.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Ph.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:cu(),value:this.value};if(yu(t))return null;var n=hu(t),r=this.children.get(n);return null===r||null==(e=r.findRootMostMatchingPathAndValue(fu(t),e))?null:{path:vu(new su(n),e.path),value:e.value}},Ph.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Ph.prototype.subtree=function(t){if(yu(t))return this;var e=hu(t);return null!==(e=this.children.get(e))?e.subtree(fu(t)):new Ph(null)},Ph.prototype.set=function(t,e){if(yu(t))return new Ph(e,this.children);var n=hu(t),e=(this.children.get(n)||new Ph(null)).set(fu(t),e),e=this.children.insert(n,e);return new Ph(this.value,e)},Ph.prototype.remove=function(t){if(yu(t))return this.children.isEmpty()?new Ph(null):new Ph(null,this.children);var e=hu(t),n=this.children.get(e);return n?(n=n.remove(fu(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&t.isEmpty()?new Ph(null):new Ph(this.value,t)):this},Ph.prototype.get=function(t){if(yu(t))return this.value;var e=hu(t);return(e=this.children.get(e))?e.get(fu(t)):null},Ph.prototype.setTree=function(t,e){if(yu(t))return e;var n=hu(t),t=(this.children.get(n)||new Ph(null)).setTree(fu(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Ph(this.value,e)},Ph.prototype.fold=function(t){return this.fold_(cu(),t)},Ph.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(vu(n,t),r)}),r(n,this.value,i)},Ph.prototype.findOnPath=function(t,e){return this.findOnPath_(t,cu(),e)},Ph.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(yu(t))return null;var i=hu(t);return(r=this.children.get(i))?r.findOnPath_(fu(t),vu(e,i),n):null},Ph.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,cu(),e)},Ph.prototype.foreachOnPath_=function(t,e,n){if(yu(t))return this;this.value&&n(e,this.value);var r=hu(t),i=this.children.get(r);return i?i.foreachOnPath_(fu(t),vu(e,r),n):new Ph(null)},Ph.prototype.foreach=function(t){this.foreach_(cu(),t)},Ph.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(vu(n,t),r)}),this.value&&r(n,this.value)},Ph.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Ph);function Ph(t,e){void 0===e&&(e=Eh=Eh||new Gu(Ya)),this.value=t,this.children=e}var Dh=(xh.empty=function(){return new xh(new Oh(null))},xh);function xh(t){this.writeTree_=t}function Lh(t,e,n){if(yu(e))return new Dh(new Oh(n));if(null==(o=t.writeTree_.findRootMostValueAndPath(e)))return n=new Oh(n),n=t.writeTree_.setTree(e,n),new Dh(n);var r=o.path,i=o.value,o=mu(r,e),i=i.updateChild(o,n);return new Dh(t.writeTree_.set(r,i))}function Mh(t,n,e){var r=t;return gs(e,function(t,e){r=Lh(r,vu(n,t),e)}),r}function Fh(t,e){return yu(e)?Dh.empty():(e=t.writeTree_.setTree(e,new Oh(null)),new Dh(e))}function Uh(t,e){return null!=jh(t,e)}function jh(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(mu(n.path,e)):null}function qh(t){var n=[],e=t.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(oc,function(t,e){n.push(new Du(t,e))}):t.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new Du(t,e.value))}),n}function Vh(t,e){if(yu(e))return t;var n=jh(t,e);return new Dh(null!=n?new Oh(n):t.writeTree_.subtree(e))}function Bh(t){return t.writeTree_.isEmpty()}function Kh(t,e){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Eo(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(vu(r,t),e,i)}),i=i.getChild(r).isEmpty()||null===o?i:i.updateChild(vu(r,".priority"),o)}(cu(),t.writeTree_,e)}function Wh(t,e){return tl(e,t)}function Hh(t){return t.visible}function Gh(t,e,n){for(var r=Dh.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)wu(n,a)?r=Lh(r,s=mu(n,a),o.snap):wu(a,n)&&(s=mu(a,n),r=Lh(r,cu(),o.snap.getChild(s)));else{if(!o.children)throw So("WriteRecord should have .snap or .children");wu(n,a)?r=Mh(r,s=mu(n,a),o.children):wu(a,n)&&(yu(s=mu(a,n))?r=Mh(r,cu(),o.children):(o=Xo(o.children,hu(s)))&&(s=o.getChild(fu(s)),r=Lh(r,cu(),s)))}}}return r}function zh(t,e,n,r,i){if(r||i){var o=Vh(t.visibleWrites,e);return!i&&Bh(o)?n:i||null!=n||Uh(o,cu())?Kh(Gh(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(wu(t.path,e)||wu(e,t.path))},e),n||vc.EMPTY_NODE):null}return null!=(o=jh(t.visibleWrites,e))?o:Bh(t=Vh(t.visibleWrites,e))?n:null!=n||Uh(t,cu())?Kh(t,n||vc.EMPTY_NODE):null}function Qh(t,e,n,r){return zh(t.writeTree,t.treePath,e,n,r)}function Yh(t,e){return function(t,e,n){var r=vc.EMPTY_NODE,i=jh(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(oc,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=Vh(t.visibleWrites,e);return n.forEachChild(oc,function(t,e){e=Kh(Vh(o,new su(t)),e),r=r.updateImmediateChild(t,e)}),qh(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return qh(Vh(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function Xh(t,e,n,r){return i=t.writeTree,t=t.treePath,Eo(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=vu(t,e),Uh(i.visibleWrites,t)?null:Bh(t=Vh(i.visibleWrites,t))?r.getChild(e):Kh(t,r.getChild(e));var i}function Jh(t,e){return n=t.writeTree,e=vu(t.treePath,e),jh(n.visibleWrites,e);var n}function $h(t,e,n){return r=t.writeTree,i=t.treePath,t=n,e=vu(i,n=e),null!=(i=jh(r.visibleWrites,e))?i:t.isCompleteForChild(n)?Kh(Vh(r.visibleWrites,e),t.getNode().getImmediateChild(n)):null;var r,i}function Zh(t,e){return tl(vu(t.treePath,e),t.writeTree)}function tl(t,e){return{treePath:t,writeTree:e}}var el=(nl.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Eo("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Eo(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Fc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Mc(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Lc(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw So("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Fc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},nl.prototype.getChanges=function(){return Array.from(this.changeMap.values())},nl);function nl(){this.changeMap=new Map}function rl(){}var il=(rl.prototype.getCompleteChild=function(t){return null},rl.prototype.getChildAfterChild=function(t,e,n){return null},new rl),ol=(al.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;return e.isCompleteForChild(t)?e.getNode().getImmediateChild(t):(e=null!=this.optCompleteServerCache_?new wh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache,$h(this.writes_,t,e))},al.prototype.getChildAfterChild=function(t,e,n){var r,i,o,a=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rh(this.viewCache_);return 0===(t=(r=this.writes_,i=a,o=e,a=1,e=n,n=t,function(t,e,n,r,i,o,a){var s;if(null!=(e=jh(t=Vh(t.visibleWrites,e),cu())))s=e;else{if(null==n)return[];s=Kh(t,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=a.getCompare(),h=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),l=h.getNext();l&&u.length<i;)0!==c(l,r)&&u.push(l),l=h.getNext();return u}(r.writeTree,r.treePath,i,o,a,e,n))).length?null:t[0]},al);function al(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function sl(t,e,n,r,i,o){var a=e.eventCache;if(null!=Jh(r,n))return e;var s,u,c,h,l=void 0,f=yu(n)?(Eo(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()?(s=Yh(r,(s=Rh(e))instanceof vc?s:vc.EMPTY_NODE),t.filter.updateFullNode(e.eventCache.getNode(),s,o)):(u=Qh(r,Rh(e)),t.filter.updateFullNode(e.eventCache.getNode(),u,o))):".priority"===(u=hu(n))?(Eo(1===lu(n),"Can't have a priority with additional path components"),null!=(h=Xh(r,n,c=a.getNode(),l=e.serverCache.getNode()))?t.filter.updatePriority(c,h):a.getNode()):(c=fu(n),h=void 0,null!=(h=a.isCompleteForChild(u)?(l=e.serverCache.getNode(),null!=(l=Xh(r,n,a.getNode(),l))?a.getNode().getImmediateChild(u).updateChild(c,l):a.getNode().getImmediateChild(u)):$h(r,u,e.serverCache))?t.filter.updateChild(a.getNode(),u,h,c,i,o):a.getNode());return Nh(e,f,a.isFullyInitialized()||yu(n),t.filter.filtersNodes())}function ul(t,e,n,r,i,o,a,s){var u=e.serverCache,c=a?t.filter:t.filter.getIndexedFilter();if(yu(n))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var h=u.getNode().updateChild(n,r),l=c.updateFullNode(u.getNode(),h,null);else{if(a=hu(n),!u.isCompleteForPath(n)&&1<lu(n))return e;h=fu(n),r=u.getNode().getImmediateChild(a).updateChild(h,r),l=".priority"===a?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),a,r,h,il,null)}return sl(t,c=kh(e,l,u.isFullyInitialized()||yu(n),c.filtersNodes()),n,i,new ol(i,c,o),s)}function cl(t,e,n,r,i,o,a){var s,u,c=e.eventCache,h=new ol(i,e,o);return yu(n)?(u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),Nh(e,u,!0,t.filter.filtersNodes())):".priority"===(s=hu(n))?(u=t.filter.updatePriority(e.eventCache.getNode(),r),Nh(e,u,c.isFullyInitialized(),c.isFiltered())):(i=fu(n),o=c.getNode().getImmediateChild(s),u=void 0,u=yu(i)?r:null!=(n=h.getCompleteChild(s))?".priority"===pu(i)&&n.getChild(gu(i)).isEmpty()?n:n.updateChild(i,r):vc.EMPTY_NODE,o.equals(u)?e:Nh(e,t.filter.updateChild(c.getNode(),s,u,i,h,a),c.isFullyInitialized(),t.filter.filtersNodes()))}function hl(t,e){return t.eventCache.isCompleteForChild(e)}function ll(t,n,e){return e.foreach(function(t,e){n=n.updateChild(t,e)}),n}function fl(r,i,t,e,o,a,s,u){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;var c=i,e=yu(t)?e:new Oh(null).setTree(t,e),h=i.serverCache.getNode();return e.children.inorderTraversal(function(t,e){h.hasChild(t)&&(e=ll(0,i.serverCache.getNode().getImmediateChild(t),e),c=ul(r,c,new su(t),e,o,a,s,u))}),e.children.inorderTraversal(function(t,e){var n=!i.serverCache.isCompleteForChild(t)&&void 0===e.value;h.hasChild(t)||n||(e=ll(0,i.serverCache.getNode().getImmediateChild(t),e),c=ul(r,c,new su(t),e,o,a,s,u))}),c}var pl,dl=(Object.defineProperty(gl.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),gl);function gl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Uc(n.getIndex()),i=(o=n).loadsAllData()?new Uc(o.getIndex()):new(o.hasLimit()?Bc:qc)(o);this.processor_={filter:i};var t=e.serverCache,n=e.eventCache,o=r.updateFullNode(vc.EMPTY_NODE,t.getNode(),null),e=i.updateFullNode(vc.EMPTY_NODE,n.getNode(),null),r=new wh(o,t.isFullyInitialized(),r.filtersNodes()),i=new wh(e,n.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ch(i,r),this.eventGenerator_=new Th(this.query_)}function vl(t){return 0===t.eventRegistrations_.length}function yl(t,e,n){var r,i=[];if(n&&(Eo(null==e,"A cancel should cancel all event registrations."),r=t.query._path,t.eventRegistrations_.forEach(function(t){(t=t.createCancelEvent(n,r))&&i.push(t)})),e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function ml(t,e,n,r){e.type===sh.MERGE&&null!==e.source.queryId&&(Eo(Rh(t.viewCache_),"We should always have a full cache before handling merges"),Eo(Ah(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_,e=function(t,e,n,r,i){var o,a,s,u,c,h,l,f,p=new el;if(n.type===sh.OVERWRITE)var d=n,g=d.source.fromUser?cl(t,e,d.path,d.snap,r,i,p):(Eo(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered()&&!yu(d.path),ul(t,e,d.path,d.snap,r,i,o,p));else if(n.type===sh.MERGE)var v=n,g=v.source.fromUser?(a=t,s=e,u=v.path,d=v.children,c=r,h=i,l=p,f=s,d.foreach(function(t,e){t=vu(u,t),hl(s,hu(t))&&(f=cl(a,f,t,e,c,h,l))}),d.foreach(function(t,e){t=vu(u,t),hl(s,hu(t))||(f=cl(a,f,t,e,c,h,l))}),f):(Eo(v.source.fromServer,"Unknown source."),o=v.source.tagged||e.serverCache.isFiltered(),fl(t,e,v.path,v.children,r,i,o,p));else if(n.type===sh.ACK_USER_WRITE){var y=n;g=y.revert?function(t,e,n,r,i,o){var a;if(null!=Jh(r,n))return e;var s,u,c=new ol(r,e,i),h=e.eventCache.getNode(),i=void 0;return yu(n)||".priority"===hu(n)?(u=void 0,u=e.serverCache.isFullyInitialized()?Qh(r,Rh(e)):(s=e.serverCache.getNode(),Eo(s instanceof vc,"serverChildren would be complete if leaf node"),Yh(r,s)),i=t.filter.updateFullNode(h,u,o)):(null==(u=$h(r,s=hu(n),e.serverCache))&&e.serverCache.isCompleteForChild(s)&&(u=h.getImmediateChild(s)),(i=null!=u?t.filter.updateChild(h,s,u,fu(n),c,o):e.eventCache.getNode().hasChild(s)?t.filter.updateChild(h,s,vc.EMPTY_NODE,fu(n),c,o):h).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Qh(r,Rh(e))).isLeafNode()&&(i=t.filter.updateFullNode(i,a,o))),a=e.serverCache.isFullyInitialized()||null!=Jh(r,cu()),Nh(e,i,a,t.filter.filtersNodes())}(t,e,y.path,r,i,p):function(t,e,r,n,i,o,a){if(null!=Jh(i,r))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=n.value){if(yu(r)&&u.isFullyInitialized()||u.isCompleteForPath(r))return ul(t,e,r,u.getNode().getChild(r),i,o,s,a);if(yu(r)){var c=new Oh(null);return u.getNode().forEachChild(ju,function(t,e){c=c.set(new su(t),e)}),fl(t,e,r,c,i,o,s,a)}return e}var h=new Oh(null);return n.foreach(function(t,e){var n=vu(r,t);u.isCompleteForPath(n)&&(h=h.set(t,u.getNode().getChild(n)))}),fl(t,e,r,h,i,o,s,a)}(t,e,y.path,y.affectedTree,r,i,p)}else{if(n.type!==sh.LISTEN_COMPLETE)throw So("Unknown operation type: "+n.type);o=t,y=e,i=n.path,t=r,n=p,g=sl(o,r=kh(y,(r=y.serverCache).getNode(),r.isFullyInitialized()||yu(i),r.isFiltered()),i,t,il,n)}return p=p.getChanges(),y=e,r=p,(t=(i=g).eventCache).isFullyInitialized()&&(n=t.getNode().isLeafNode()||t.getNode().isEmpty(),e=Ah(y),(0<r.length||!y.eventCache.isFullyInitialized()||n&&!t.getNode().equals(e)||!t.getNode().getPriority().equals(e.getPriority()))&&r.push(xc(Ah(i)))),{viewCache:g,changes:p}}(t.processor_,i,e,n,r);return n=t.processor_,r=e.viewCache,Eo(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Eo(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),Eo(e.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=e.viewCache,bl(t,e.changes,e.viewCache.eventCache.getNode(),null)}function bl(t,e,n,r){return r=r?[r]:t.eventRegistrations_,i=t.eventGenerator_,t=n,n=r,r=[],o=[],(e=e).forEach(function(t){var e;"child_changed"===t.type&&i.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((e=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:e}))}),Sh(i,r,"child_removed",e,n,t),Sh(i,r,"child_added",e,n,t),Sh(i,r,"child_moved",o,n,t),Sh(i,r,"child_changed",e,n,t),Sh(i,r,"value",e,n,t),r;var i,o}var _l,wl=function(){this.views=new Map};function Il(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return Eo(null!=s,"SyncTree gave us an op for an invalid query."),ml(s,e,n,r)}var u=[];try{for(var c=mo(t.views.values()),h=c.next();!h.done;h=c.next())s=h.value,u=u.concat(ml(s,e,n,r))}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function Tl(t,e,n,r,i){var o=e._queryIdentifier;return(t=t.views.get(o))?t:(t=!1,t=!!(o=Qh(n,i?r:null))||(o=r instanceof vc?Yh(n,r):vc.EMPTY_NODE,!1),i=Ch(new wh(o,t,!1),new wh(r,i,!1)),new dl(e,i))}function El(t){var e,n,r=[];try{for(var i=mo(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Sl(t,e){var n,r,i,o,a=null;try{for(var s=mo(t.views.values()),u=s.next();!u.done;u=s.next())var c=u.value,a=a||(i=e,o=void 0,(o=Rh(c.viewCache_))&&(c.query._queryParams.loadsAllData()||!yu(i)&&!o.getImmediateChild(hu(i)).isEmpty())?o.getChild(i):null)}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a}function Cl(t,e){return e._queryParams.loadsAllData()?Al(t):(e=e._queryIdentifier,t.views.get(e))}function Nl(t,e){return null!=Cl(t,e)}function kl(t){return null!=Al(t)}function Al(t){var e,n;try{for(var r=mo(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}function Rl(t){this.listenProvider_=t,this.syncPointTree_=new Oh(null),this.pendingWriteTree_={visibleWrites:Dh.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Ol=1;function Pl(t,e,n,r,i){var o=t.pendingWriteTree_,a=e,s=n,u=i;return Eo(r>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===u&&(u=!0),o.allWrites.push({path:a,snap:s,writeId:r,visible:u}),u&&(o.visibleWrites=Lh(o.visibleWrites,a,s)),o.lastWriteId=r,i?Ul(t,new yh(hh(),e,n)):[]}function Dl(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(e,n){var t=e.allWrites.findIndex(function(t){return t.writeId===n});Eo(0<=t,"removeWrite called with nonexistent writeId.");var r=e.allWrites[t];e.allWrites.splice(t,1);for(var i,o=r.visible,a=!1,s=e.allWrites.length-1;o&&0<=s;){var u=e.allWrites[s];u.visible&&(t<=s&&function(t,e){if(t.snap)return wu(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&wu(vu(t.path,n),e))return 1}(u,r.path)?o=!1:wu(r.path,u.path)&&(a=!0)),s--}return o&&(a?((i=e).visibleWrites=Gh(i.allWrites,Hh,cu()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?e.visibleWrites=Fh(e.visibleWrites,r.path):gs(r.children,function(t){e.visibleWrites=Fh(e.visibleWrites,vu(r.path,t))}),1)}(t.pendingWriteTree_,e)){var i=new Oh(null);return null!=r.snap?i=i.set(cu(),!0):gs(r.children,function(t){i=i.set(new su(t),!0)}),Ul(t,new ph(r.path,i,n))}return[]}function xl(t,e,n){return Ul(t,new yh(lh(),e,n))}function Ll(n,t,e,r){var i=t._path,o=n.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||Nl(o,t))){var s=function(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=kl(t);if("default"===a)try{for(var h=mo(t.views.entries()),l=h.next();!l.done;l=h.next()){var f=bo(l.value,2),p=f[0],d=f[1],u=u.concat(yl(d,n,r));vl(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||s.push(d.query))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=t.views.get(a))&&(u=u.concat(yl(d,n,r)),vl(d)&&(t.views.delete(a),d.query._queryParams.loadsAllData()||s.push(d.query)));return c&&!kl(t)&&s.push((Eo(pl,"Reference.ts has not been loaded"),new pl(e._repo,e._path))),{removed:s,events:u}}(o,t,e,r);if(0===o.views.size&&(n.syncPointTree_=n.syncPointTree_.remove(i)),e=s.removed,a=s.events,o=-1!==e.findIndex(function(t){return t._queryParams.loadsAllData()}),s=n.syncPointTree_.findOnPath(i,function(t,e){return kl(e)}),o&&!s&&!(i=n.syncPointTree_.subtree(i)).isEmpty())for(var u=i.fold(function(t,e,n){if(e&&kl(e))return[Al(e)];var r=[];return e&&(r=El(e)),gs(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var h=(l=u[c]).query,l=ql(n,l);n.listenProvider_.startListening(Gl(h),Vl(n,h),l.hashFn,l.onComplete)}!s&&0<e.length&&!r&&(o?n.listenProvider_.stopListening(Gl(t),null):e.forEach(function(t){var e=n.queryToTagMap.get(Bl(t));n.listenProvider_.stopListening(Gl(t),e)})),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i._queryParams.loadsAllData()||(r=Bl(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(n,e)}return a}function Ml(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){t=mu(t,r),i=i||Sl(e,t),o=o||kl(e)});var a=t.syncPointTree_.get(r);a?(o=o||kl(a),i=i||Sl(a,cu())):(a=new wl,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=i?f=!0:(f=!1,i=vc.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){(e=Sl(e,cu()))&&(i=i.updateImmediateChild(t,e))}));var s=Nl(a,e);s||e._queryParams.loadsAllData()||(h=Bl(e),Eo(!t.queryToTagMap.has(h),"View does not exist, but we have a tag"),c=Ol++,t.queryToTagMap.set(h,c),t.tagToQueryMap.set(c,h));var u,c,h,l,f=(u=a,c=e,h=n,n=Wh(t.pendingWriteTree_,r),n=Tl(u,c,n,i,n=f),u.views.has(c._queryIdentifier)||u.views.set(c._queryIdentifier,n),c=h,n.eventRegistrations_.push(c),c=h,n=(h=n).viewCache_.eventCache,l=[],n.getNode().isLeafNode()||n.getNode().forEachChild(oc,function(t,e){l.push(Lc(t,e))}),n.isFullyInitialized()&&l.push(xc(n.getNode())),bl(h,l,n.getNode(),c));return s||o||(a=Cl(a,e),f=f.concat(function(t,e,n){var r=e._path,i=Vl(t,e),n=ql(t,n),n=t.listenProvider_.startListening(Gl(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r);if(i)Eo(!kl(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold(function(t,e,n){if(!yu(t)&&e&&kl(e))return[Al(e).query];var r=[];return e&&(r=r.concat(El(e).map(function(t){return t.query}))),gs(n,function(t,e){r=r.concat(e)}),r}),a=0;a<o.length;++a){var s=o[a];t.listenProvider_.stopListening(Gl(s),Vl(t,s))}return n}(t,e,a))),f}function Fl(t,n,e){var r=t.pendingWriteTree_,t=t.syncPointTree_.findOnPath(n,function(t,e){if(t=Sl(e,mu(t,n)))return t});return zh(r,n,t,e,!0)}function Ul(t,e){return function t(e,n,r,i){if(yu(e.path))return function i(o,t,a,s){var e=t.get(cu());null==a&&null!=e&&(a=Sl(e,cu()));var u=[];return t.children.inorderTraversal(function(t,e){var n=a?a.getImmediateChild(t):null,r=Zh(s,t),t=o.operationForChild(t);t&&(u=u.concat(i(t,e,n,r)))}),u=e?u.concat(Il(e,o,s,a)):u}(e,n,r,i);var o=n.get(cu());null==r&&null!=o&&(r=Sl(o,cu()));var a=[],s=hu(e.path),u=e.operationForChild(s),c=n.children.get(s);return c&&u&&(n=r?r.getImmediateChild(s):null,s=Zh(i,s),a=a.concat(t(u,c,n,s))),o?a.concat(Il(o,e,i,r)):a}(e,t.syncPointTree_,null,Wh(t.pendingWriteTree_,cu()))}function ql(a,t){var s=t.query,u=Vl(a,s);return{hashFn:function(){return(t.viewCache_.serverCache.getNode()||vc.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return u?(e=a,n=s._path,(i=Kl(e,r=u))?(i=(r=Wl(i)).path,r=r.queryId,n=mu(i,n),Hl(e,i,new gh(fh(r),n))):[]):(o=s._path,Ul(a,new gh(lh(),o)));var e,n,r,i,o=(o="Unknown Error","too_big"===t?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?o="Client doesn't have permission to access the desired data.":"unavailable"===t&&(o="The service is unavailable"),(o=new Error(t+" at "+s._path.toString()+": "+o)).code=t.toUpperCase(),o);return Ll(a,s,null,o)}}}function Vl(t,e){return e=Bl(e),t.queryToTagMap.get(e)}function Bl(t){return t._path.toString()+"$"+t._queryIdentifier}function Kl(t,e){return t.tagToQueryMap.get(e)}function Wl(t){var e=t.indexOf("$");return Eo(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new su(t.substr(0,e))}}function Hl(t,e,n){var r=t.syncPointTree_.get(e);return Eo(r,"Missing sync point for query tag that we're tracking"),Il(r,n,Wh(t.pendingWriteTree_,e),null)}function Gl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?(Eo(_l,"Reference.ts has not been loaded"),new _l(t._repo,t._path)):t}var zl=(Ql.prototype.getImmediateChild=function(t){return new Ql(this.node_.getImmediateChild(t))},Ql.prototype.node=function(){return this.node_},Ql);function Ql(t){this.node_=t}var Yl=(Xl.prototype.getImmediateChild=function(t){return t=vu(this.path_,t),new Xl(this.syncTree_,t)},Xl.prototype.node=function(){return Fl(this.syncTree_,this.path_)},Xl);function Xl(t,e){this.syncTree_=t,this.path_=e}var Jl=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},$l=function(t,e,n){return t&&"object"==typeof t?(Eo(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Zl(t[".sv"],e,n):"object"==typeof t[".sv"]?tf(t[".sv"],e):void Eo(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Zl=function(t,e,n){if("timestamp"===t)return n.timestamp;Eo(!1,"Unexpected server value: "+t)},tf=function(t,e,n){return t.hasOwnProperty("increment")||Eo(!1,"Unexpected server value: "+JSON.stringify(t,null,2)),"number"!=typeof(t=t.increment)&&Eo(!1,"Unexpected increment value: "+t),e=e.node(),Eo(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode()||"number"!=typeof(e=e.getValue())?t:e+t},ef=function(t,e,n,r){return rf(e,new Yl(n,t),r)},nf=function(t,e,n){return rf(t,new zl(e),n)};function rf(t,r,i){var e=t.getPriority().val(),n=$l(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t;return(e=$l(o.getValue(),r,i))!==o.getValue()||n!==o.getPriority().val()?new nc(e,wc(n)):t}var a=t=t;return n!==t.getPriority().val()&&(a=a.updatePriority(new nc(n))),t.forEachChild(oc,function(t,e){var n=rf(e,r.getImmediateChild(t),i);n!==e&&(a=a.updateImmediateChild(t,n))}),a}var of=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function af(t,e){for(var n=e instanceof su?e:new su(e),r=t,i=hu(n);null!==i;)var o=Xo(r.node.children,i)||{children:{},childCount:0},r=new of(i,r,o),i=hu(n=fu(n));return r}function sf(t){return t.node.value}function uf(t,e){t.node.value=e,function t(e){var n,r,i,o;null!==e.parent&&(n=e.parent,r=e.name,o=function(t){return void 0===sf(t)&&!cf(t)}(i=e),e=Yo(n.node.children,r),o&&e?(delete n.node.children[r],n.node.childCount--,t(n)):o||e||(n.node.children[r]=i.node,n.node.childCount++,t(n)))}(t)}function cf(t){return 0<t.node.childCount}function hf(n,r){gs(n.node.children,function(t,e){r(new of(t,n,e))})}function lf(t){return new su(null===t.parent?t.name:lf(t.parent)+"/"+t.name)}function ff(t){return"string"==typeof t&&0!==t.length&&!wf.test(t)}function pf(t){return"string"==typeof t&&0!==t.length&&!If.test(t)}function df(t,e,n,r){if(!r||void 0!==e){var i=aa(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];gs(e,function(t,e){if(t=new su(t),Sf(i,e,vu(n,t)),".priority"===pu(t)&&!Ef(e))throw new Error(i+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(t)}),function(t,e){for(var n=0;n<e.length;n++)for(var r,i=du(r=e[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!ff(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(bu);for(var a=null,n=0;n<e.length;n++){if(r=e[n],null!==a&&wu(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}}function gf(t,e,n){if(!n||void 0!==e){if(Qa(e))throw new Error(aa(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ef(e))throw new Error(aa(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function vf(t,e,n,r){if(!(r&&void 0===n||ff(n)))throw new Error(aa(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function yf(t,e,n,r){r&&void 0===e||Sf(aa(t,"value"),e,n)}function mf(t,e){if(".info"===hu(e))throw new Error(t+" failed = Can't modify data under /.info/")}function bf(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ff(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!pf(n=n&&n.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(aa(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}function _f(){this.eventLists_=[],this.recursionDepth_=0}var wf=/[\[\].#$\/\u0000-\u001F\u007F]/,If=/[\[\].#$\u0000-\u001F\u007F]/,Tf=10485760,Ef=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Qa(t)||t&&"object"==typeof t&&Yo(t,".sv")},Sf=function(r,t,e){var i=e instanceof su?new Iu(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+Eu(i));if("function"==typeof t)throw new Error(r+"contains a function "+Eu(i)+" with contents = "+t.toString());if(Qa(t))throw new Error(r+"contains "+t.toString()+" "+Eu(i));if("string"==typeof t&&t.length>Tf/3&&ca(t)>Tf)throw new Error(r+"contains a string greater than "+Tf+" utf8 bytes "+Eu(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var o=!1,a=!1;if(gs(t,function(t,e){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(a=!0,!ff(t)))throw new Error(r+" contains an invalid key ("+t+") "+Eu(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var n=t;0<(t=i).parts_.length&&(t.byteLength_+=1),t.parts_.push(n),t.byteLength_+=ca(n),Tu(t),Sf(r,e,i),e=(t=i).parts_.pop(),t.byteLength_-=ca(e),0<t.parts_.length&&--t.byteLength_}),o&&a)throw new Error(r+' contains ".value" child '+Eu(i)+" in addition to actual children.")}},Cf=function(t,e,n,r){if(!(r&&void 0===n||pf(n)))throw new Error(aa(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nf=function(t,e,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),Cf(t,e,n,r)};function kf(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||_u(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function Af(t,e,n){kf(t,n),Of(t,function(t){return _u(t,e)})}function Rf(t,e,n){kf(t,n),Of(t,function(t){return wu(t,e)||wu(e,t)})}function Of(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),as&&us("event: "+r.toString()),Is(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}var Pf="repo_interrupt",Df=25,xf=(Lf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Lf);function Lf(t,e,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _f,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nh(),this.transactionQueueTree_=new of,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function Mf(t){return t=t.infoData_.getNode(new su(".info/serverTimeOffset")).val()||0,(new Date).getTime()+t}function Ff(t){return Jl({timestamp:Mf(t)})}function Uf(t,e,n,r,i){t.dataUpdateCount++;var o=new su(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a,s,u,c,h,l,f,p,d,g=o;0<(c=i?r?(a=$o(n,function(t){return wc(t)}),h=t.serverSyncTree_,l=o,f=a,(d=Kl(h,p=i))?(d=(p=Wl(d)).path,p=p.queryId,l=mu(d,l),f=Oh.fromObject(f),Hl(h,d,new bh(fh(p),l,f))):[]):(s=o,u=e=wc(n),null==(i=Kl(a=t.serverSyncTree_,e=i))?[]:(i=(e=Wl(i)).path,e=e.queryId,s=mu(i,s),Hl(a,i,new yh(fh(e),s,u)))):r?(s=$o(n,function(t){return wc(t)}),u=t.serverSyncTree_,r=o,s=Oh.fromObject(s),Ul(u,new bh(lh(),r,s))):(n=wc(n),xl(t.serverSyncTree_,o,n))).length&&(g=Xf(t,o)),Rf(t.eventQueue_,g,c)}function jf(t,e){qf(t,"connected",e),!1===e&&function(n){Gf(n,"onDisconnectEvents");var r=Ff(n),i=nh();ih(n.onDisconnect_,cu(),function(t,e){e=ef(t,e,n.serverSyncTree_,r),rh(i,t,e)});var o=[];ih(i,cu(),function(t,e){o=o.concat(xl(n.serverSyncTree_,t,e)),t=tp(n,t),Xf(n,t)}),n.onDisconnect_=nh(),Rf(n.eventQueue_,cu(),o)}(t)}function qf(t,e,n){e=new su("/.info/"+e),n=wc(n),t.infoData_.updateSnapshot(e,n),n=xl(t.infoSyncTree_,e,n),Rf(t.eventQueue_,e,n)}function Vf(t){return t.nextWriteId_++}function Bf(r,i,t,e,o){Gf(r,"set",{path:i.toString(),value:t,priority:e});var n=Ff(r),t=wc(t,e),e=Fl(r.serverSyncTree_,i),n=nf(t,e,n),a=Vf(r),n=Pl(r.serverSyncTree_,i,n,a,!0);kf(r.eventQueue_,n),r.server_.put(i.toString(),t.val(!0),function(t,e){var n="ok"===t;n||hs("set at "+i+" failed: "+t),n=Dl(r.serverSyncTree_,a,!n),Rf(r.eventQueue_,i,n),zf(0,o,t,e)}),t=tp(r,i),Xf(r,t),Rf(r.eventQueue_,t,[])}function Kf(n,r,t,i){var o=wc(t);n.server_.onDisconnectPut(r.toString(),o.val(!0),function(t,e){"ok"===t&&rh(n.onDisconnect_,r,o),zf(0,i,t,e)})}function Wf(t,e,n){n=".info"===hu(e._path)?Ll(t.infoSyncTree_,e,n):Ll(t.serverSyncTree_,e,n),Af(t.eventQueue_,e._path,n)}function Hf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Pf)}function Gf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),us.apply(void 0,_o([r],bo(e)))}function zf(t,n,r,i){n&&Is(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})}function Qf(t,e,n){return Fl(t.serverSyncTree_,e,n)||vc.EMPTY_NODE}function Yf(e,t){var n;(t=void 0===t?e.transactionQueueTree_:t)||Zf(e,t),sf(t)?(n=$f(e,t),Eo(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(i,o,a){for(var t=a.map(function(t){return t.currentWriteId}),e=u=Qf(i,o,t),t=u.hash(),n=0;n<a.length;n++){var r=a[n];Eo(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;var s=mu(o,r.path),e=e.updateChild(s,r.currentOutputSnapshotRaw)}var u=e.val(!0),c=o;i.server_.put(c.toString(),u,function(t){Gf(i,"transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<a.length;r++)!function(t){a[t].status=2,e=e.concat(Dl(i.serverSyncTree_,a[t].currentWriteId)),a[t].onComplete&&n.push(function(){return a[t].onComplete(null,!0,a[t].currentOutputSnapshotResolved)}),a[t].unwatcher()}(r);for(Zf(i,af(i.transactionQueueTree_,o)),Yf(i,i.transactionQueueTree_),Rf(i.eventQueue_,o,e),r=0;r<n.length;r++)Is(n[r])}else{if("datastale"===t)for(r=0;r<a.length;r++)3===a[r].status?a[r].status=4:a[r].status=0;else for(hs("transaction at "+c.toString()+" failed: "+t),r=0;r<a.length;r++)a[r].status=4,a[r].abortReason=t;Xf(i,o)}},t)}(e,lf(t),n)):cf(t)&&hf(t,function(t){Yf(e,t)})}function Xf(t,e){var n=Jf(t,e),e=lf(n);return function(u,c,h){if(0!==c.length){for(var l=[],f=[],p=c.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),t=0;t<c.length;t++)!function(t){var e,n,r,i,o=c[t],a=mu(h,o.path),s=!1;Eo(null!==a,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status?(s=!0,e=o.abortReason,f=f.concat(Dl(u.serverSyncTree_,o.currentWriteId,!0))):0===o.status&&(f=o.retryCount>=Df?(s=!0,e="maxretry",f.concat(Dl(u.serverSyncTree_,o.currentWriteId,!0))):(n=Qf(u,o.path,p),o.currentInputSnapshot=n,void 0!==(i=c[t].update(n.val()))?(Sf("transaction failed: Data returned ",i,o.path),r=wc(i),"object"==typeof i&&null!=i&&Yo(i,".priority")||(r=r.updatePriority(n.getPriority())),a=o.currentWriteId,i=Ff(u),i=nf(r,n,i),o.currentOutputSnapshotRaw=r,o.currentOutputSnapshotResolved=i,o.currentWriteId=Vf(u),p.splice(p.indexOf(a),1),(f=f.concat(Pl(u.serverSyncTree_,o.path,i,o.currentWriteId,o.applyLocally))).concat(Dl(u.serverSyncTree_,a,!0))):(s=!0,e="nodata",f.concat(Dl(u.serverSyncTree_,o.currentWriteId,!0))))),Rf(u.eventQueue_,h,f),f=[],s&&(c[t].status=2,s=c[t].unwatcher,setTimeout(s,Math.floor(0)),c[t].onComplete&&("nodata"===e?l.push(function(){return c[t].onComplete(null,!1,c[t].currentInputSnapshot)}):l.push(function(){return c[t].onComplete(new Error(e),!1,null)})))}(t);for(Zf(u,u.transactionQueueTree_),t=0;t<l.length;t++)Is(l[t]);Yf(u,u.transactionQueueTree_)}}(t,$f(t,n),e),e}function Jf(t,e){for(var n=t.transactionQueueTree_,r=hu(e);null!==r&&void 0===sf(n);)n=af(n,r),r=hu(e=fu(e));return n}function $f(t,e){var n=[];return function e(n,t,r){var i=sf(t);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);hf(t,function(t){e(n,t,r)})}(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function Zf(e,t){var n=sf(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,uf(t,0<n.length?n:void 0)}hf(t,function(t){Zf(e,t)})}function tp(n,t){var e=lf(Jf(n,t));return function(t){for(var e=t.parent;null!==e;)ep(n,e),e=e.parent}(t=af(n.transactionQueueTree_,t)),ep(n,t),function e(t,n,r,i){r&&!i&&n(t),hf(t,function(t){e(t,n,!0,i)}),r&&i&&n(t)}(t,function(t){ep(n,t)}),e}function ep(t,e){var n=sf(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Eo(o===a-1,"All SENT items should be at beginning of queue."),n[o=a].status=3,n[a].abortReason="set"):(Eo(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Dl(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?uf(e,void 0):n.length=o+1,Rf(t.eventQueue_,lf(e),i),a=0;a<r.length;a++)Is(r[a])}}function np(t,e){var n=rp(t),r=n.namespace;return"firebase.com"===n.domain&&Za(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Za("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new Rs(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new su(n.pathString)}}var rp=function(i){var o,a,t,e="",n="",r="",s="",u="",c=!0,h="https",l=443;return"string"==typeof i&&(0<=(t=i.indexOf("//"))&&(h=i.substring(0,t-1),i=i.substring(t+2)),-1===(o=i.indexOf("/"))&&(o=i.length),-1===(a=i.indexOf("?"))&&(a=i.length),e=i.substring(0,Math.min(o,a)),o<a&&(s=function(){for(var t="",e=i.substring(o,a).split("/"),n=0;n<e.length;n++)if(0<e[n].length){var r=e[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}t+="/"+r}return t}()),a=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=mo(t.split("&")),o=i.next();!o.done;o=i.next()){var a,s=o.value;0!==s.length&&(2===(a=s.split("=")).length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):hs("Invalid query segment '"+s+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(i.substring(Math.min(i.length,a))),0<=(t=e.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(e.substring(t+1),10)):t=e.length,"localhost"===(t=e.slice(0,t)).toLowerCase()?n="localhost":t.split(".").length<=2?n=t:(t=e.indexOf("."),r=e.substring(0,t).toLowerCase(),n=e.substring(t+1),u=r),"ns"in a&&(u=a.ns)),{host:e,port:l,domain:n,subdomain:r,secure:c,scheme:h,pathString:s,namespace:u}},ip=(op.prototype.getPath=function(){var t=this.snapshot.ref;return("value"===this.eventType?t:t.parent)._path},op.prototype.getEventType=function(){return this.eventType},op.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},op.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+zo(this.snapshot.exportVal())},op);function op(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var ap=(sp.prototype.getPath=function(){return this.path},sp.prototype.getEventType=function(){return"cancel"},sp.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},sp.prototype.toString=function(){return this.path.toString()+":cancel"},sp);function sp(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var up=(cp.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},cp.prototype.onCancel=function(t){return Eo(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(cp.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),cp.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},cp);function cp(t,e){this.snapshotCallback=t,this.cancelCallback=e}var hp=(lp.prototype.cancel=function(){var n,r,i,t=new Ao;return n=this._repo,r=this._path,i=t.wrapCallback(function(){}),n.server_.onDisconnectCancel(r.toString(),function(t,e){"ok"===t&&!function t(n,e){if(yu(e))return n.value=null,n.children.clear(),!0;if(null===n.value)return!(0<n.children.size)||(r=hu(e),e=fu(e),n.children.has(r)&&t(n.children.get(r),e)&&n.children.delete(r),0===n.children.size);if(n.value.isLeafNode())return!1;var r=n.value;return n.value=null,r.forEachChild(oc,function(t,e){rh(n,new su(t),e)}),t(n,e)}(n.onDisconnect_,r),zf(0,i,t,e)}),t.promise},lp.prototype.remove=function(){mf("OnDisconnect.remove",this._path);var t=new Ao;return Kf(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},lp.prototype.set=function(t){mf("OnDisconnect.set",this._path),yf("OnDisconnect.set",t,this._path,!1);var e=new Ao;return Kf(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},lp.prototype.setWithPriority=function(t,e){mf("OnDisconnect.setWithPriority",this._path),yf("OnDisconnect.setWithPriority",t,this._path,!1),gf("OnDisconnect.setWithPriority",e,!1);var n=new Ao,r=this._repo,i=this._path,o=n.wrapCallback(function(){}),a=wc(t,e);return r.server_.onDisconnectPut(i.toString(),a.val(!0),function(t,e){"ok"===t&&rh(r.onDisconnect_,i,a),zf(0,o,t,e)}),n.promise},lp.prototype.update=function(t){mf("OnDisconnect.update",this._path),df("OnDisconnect.update",t,this._path,!1);var n,r,i,o,e=new Ao;return n=this._repo,r=this._path,i=t,o=e.wrapCallback(function(){}),Jo(i)?(us("onDisconnect().update() called with empty data.  Don't do anything."),zf(0,o,"ok",void 0)):n.server_.onDisconnectMerge(r.toString(),i,function(t,e){"ok"===t&&gs(i,function(t,e){e=wc(e),rh(n.onDisconnect_,vu(r,t),e)}),zf(0,o,t,e)}),e.promise},lp);function lp(t,e){this._repo=t,this._path=e}var fp=(Object.defineProperty(pp.prototype,"key",{get:function(){return yu(this._path)?null:pu(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(pp.prototype,"ref",{get:function(){return new mp(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(pp.prototype,"_queryIdentifier",{get:function(){var t=Xc(this._queryParams);return"{}"===(t=ds(t))?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(pp.prototype,"_queryObject",{get:function(){return Xc(this._queryParams)},enumerable:!1,configurable:!0}),pp.prototype.isEqual=function(t){if(!((t=ga(t))instanceof pp))return!1;var e=this._repo===t._repo,n=_u(this._path,t._path),t=this._queryIdentifier===t._queryIdentifier;return e&&n&&t},pp.prototype.toJSON=function(){return this.toString()},pp.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},pp);function pp(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}function dp(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function gp(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ju){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ls)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==fs)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===oc){if(null!=e&&!Ef(e)||null!=n&&!Ef(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Eo(t.getIndex()instanceof Ec||t.getIndex()===Oc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function vp(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var yp,mp=(po(bp,yp=fp),Object.defineProperty(bp.prototype,"parent",{get:function(){var t=gu(this._path);return null===t?null:new bp(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(bp.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),bp);function bp(t,e){return yp.call(this,t,e,new Wc,!1)||this}var _p=(Object.defineProperty(wp.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(wp.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(wp.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),wp.prototype.child=function(t){var e=new su(t),t=Ep(this.ref,t);return new wp(this._node.getChild(e),t,oc)},wp.prototype.exists=function(){return!this._node.isEmpty()},wp.prototype.exportVal=function(){return this._node.val(!0)},wp.prototype.forEach=function(n){var r=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(t,e){return n(new wp(e,Ep(r.ref,t),oc))})},wp.prototype.hasChild=function(t){return t=new su(t),!this._node.getChild(t).isEmpty()},wp.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},wp.prototype.toJSON=function(){return this.exportVal()},wp.prototype.val=function(){return this._node.val()},wp);function wp(t,e,n){this._node=t,this.ref=e,this._index=n}function Ip(t,e){return(t=ga(t))._checkNotDeleted("ref"),void 0!==e?Ep(t._root,e):t._root}function Tp(t,e){(t=ga(t))._checkNotDeleted("refFromURL");var n=np(e,t._repo.repoInfo_.nodeAdmin);return bf("refFromURL",n),e=n.repoInfo,t._repo.repoInfo_.isCustomHost()||e.host===t._repo.repoInfo_.host||Za("refFromURL: Host name does not match the current database: (found "+e.host+" but expected "+t._repo.repoInfo_.host+")"),Ip(t,n.path.toString())}function Ep(t,e){return(null===hu((t=ga(t))._path)?Nf:Cf)("child","path",e,!1),new mp(t._repo,vu(t._path,e))}function Sp(t,e){t=ga(t),mf("set",t._path),yf("set",e,t._path,!1);var n=new Ao;return Bf(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Cp(t,e){df("update",e,t._path,!1);var n=new Ao;return function(i,o,t,a){Gf(i,"update",{path:o.toString(),value:t});var s,e,n,r,u,c,h,l,f=!0,p=Ff(i),d={};gs(t,function(t,e){f=!1,d[t]=ef(vu(o,t),wc(e),i.serverSyncTree_,p)}),f?(us("update() called with empty data.  Don't do anything."),zf(0,a,"ok",void 0)):(s=Vf(i),e=i.serverSyncTree_,n=o,r=d,u=s,c=e.pendingWriteTree_,h=n,l=r,Eo(u>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:h,children:l,writeId:u,visible:!0}),c.visibleWrites=Mh(c.visibleWrites,h,l),c.lastWriteId=u,r=Oh.fromObject(r),r=Ul(e,new bh(hh(),n,r)),kf(i.eventQueue_,r),i.server_.merge(o.toString(),t,function(t,e){(r="ok"===t)||hs("update at "+o+" failed: "+t);var n=Dl(i.serverSyncTree_,s,!r),r=0<n.length?Xf(i,o):o;Rf(i.eventQueue_,r,n),zf(0,a,t,e)}),gs(t,function(t){t=tp(i,vu(o,t)),Xf(i,t)}),Rf(i.eventQueue_,o,[]))}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}function Np(e){return e=ga(e),n=e._repo,r=e,(null!=(t=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){t=mu(t,n),r=r||Sl(e,t)});var i=t.syncPointTree_.get(n);i?r=r||Sl(i,cu()):(i=new wl,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new wh(r,!0,!1):null;return Ah((o=Tl(i,e,Wh(t.pendingWriteTree_,e._path),o?a.getNode():vc.EMPTY_NODE,o)).viewCache_)}(n.serverSyncTree_,r))?Promise.resolve(t):n.server_.get(r).then(function(t){var e=wc(t),t=xl(n.serverSyncTree_,r._path,e);return Af(n.eventQueue_,r._path,t),Promise.resolve(e)},function(t){return Gf(n,"get for query "+zo(r)+" failed: "+t),Promise.reject(new Error(t))})).then(function(t){return new _p(t,new mp(e._repo,e._path),e._queryParams.getIndex())});var n,r,t}var kp=(Ap.prototype.respondsTo=function(t){return"value"===t},Ap.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ip("value",this,new _p(t.snapshotNode,new mp(e._repo,e._path),n))},Ap.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},Ap.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ap(this,t,e):null},Ap.prototype.matches=function(t){return t instanceof Ap&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},Ap.prototype.hasAnyCallback=function(){return null!==this.callbackContext},Ap);function Ap(t){this.callbackContext=t}var Rp=(Op.prototype.respondsTo=function(t){return t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t,Yo(this.callbacks,t)},Op.prototype.createCancelEvent=function(t,e){return this.callbacks.cancel.hasCancelCallback?new ap(this,t,e):null},Op.prototype.createEvent=function(t,e){Eo(null!=t.childName,"Child events should have a childName.");var n=Ep(new mp(e._repo,e._path),t.childName),e=e._queryParams.getIndex();return new ip(t.type,this,new _p(t.snapshotNode,n,e),t.prevName)},Op.prototype.getEventRunner=function(t){if("cancel"===t.getEventType()){var e=this.callbacks.cancel;return function(){return e.onCancel(t.error)}}var n=this.callbacks[t.eventType];return function(){return n.onValue(t.snapshot,t.prevName)}},Op.prototype.matches=function(e){var n=this;if(e instanceof Op){if(!this.callbacks||!e.callbacks)return!0;var t=Object.keys(e.callbacks),r=Object.keys(this.callbacks),i=t.length;if(i===r.length)return 1!==i?r.every(function(t){return e.callbacks[t].matches(n.callbacks[t])}):(t=t[0],(r=r[0])===t&&(!e.callbacks[t]||!this.callbacks[r]||e.callbacks[t].matches(this.callbacks[r])))}return!1},Op.prototype.hasAnyCallback=function(){return null!==this.callbacks},Op);function Op(t){this.callbacks=t}function Pp(n,t,e,r,i){var o;"object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce&&((i=function(t,e){o(t,e),Wf(n._repo,n,u)}).userCallback=(o=e).userCallback,i.context=e.context,e=i);var a,s=new up(e,s||void 0),u="value"===t?new kp(s):new Rp(((a={})[t]=s,a));return t=n._repo,s=u,s=".info"===hu((a=n)._path)?Ml(t.infoSyncTree_,a,s):Ml(t.serverSyncTree_,a,s),Af(t.eventQueue_,a._path,s),function(){return Wf(n._repo,n,u)}}function Dp(t,e,n,r){return Pp(t,"value",e,n,r)}function xp(t,e,n,r){return Pp(t,"child_added",e,n,r)}function Lp(t,e,n,r){return Pp(t,"child_changed",e,n,r)}function Mp(t,e,n,r){return Pp(t,"child_moved",e,n,r)}function Fp(t,e,n,r){return Pp(t,"child_removed",e,n,r)}function Up(t,e,n){var r=null,i=null,o=n?new up(n):null;"value"===e?r=new kp(o):e&&(n&&((i={})[e]=o),r=new Rp(i)),Wf(t._repo,t,r)}var jp,qp=(po(Vp,jp=Gn=function(){}),Vp.prototype._apply=function(t){yf("endAt",this._value,t._path,!0);var e=zc(t._queryParams,this._value,this._key);if(vp(e),gp(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fp(t._repo,t._path,e,t._orderByCalled)},Vp);function Vp(t,e){var n=jp.call(this)||this;return n._value=t,n._key=e,n}var Bp,Kp=(po(Wp,Bp=Gn),Wp.prototype._apply=function(t){yf("endBefore",this._value,t._path,!1);var e,n,r=(e=t._queryParams,n=this._value,r=this._key,(r=e.index_===ju?zc(e,n="string"==typeof n?kc(n):n,r):zc(e,n,null==r?ls:kc(r))).endBeforeSet_=!0,r);if(vp(r),gp(r),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fp(t._repo,t._path,r,t._orderByCalled)},Wp);function Wp(t,e){var n=Bp.call(this)||this;return n._value=t,n._key=e,n}var Hp,Gp=(po(zp,Hp=Gn),zp.prototype._apply=function(t){yf("startAt",this._value,t._path,!0);var e=Gc(t._queryParams,this._value,this._key);if(vp(e),gp(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fp(t._repo,t._path,e,t._orderByCalled)},zp);function zp(t,e){var n=Hp.call(this)||this;return n._value=t,n._key=e,n}var Qp,Yp=(po(Xp,Qp=Gn),Xp.prototype._apply=function(t){yf("startAfter",this._value,t._path,!1);var e,n,r=(e=t._queryParams,n=this._value,r=this._key,(r=e.index_===ju?Gc(e,n="string"==typeof n?Nc(n):n,r):Gc(e,n,null==r?fs:Nc(r))).startAfterSet_=!0,r);if(vp(r),gp(r),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fp(t._repo,t._path,r,t._orderByCalled)},Xp);function Xp(t,e){var n=Qp.call(this)||this;return n._value=t,n._key=e,n}var Jp,$p=(po(Zp,Jp=Gn),Zp.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fp(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="l",e),t._orderByCalled);var e,n},Zp);function Zp(t){var e=Jp.call(this)||this;return e._limit=t,e}var td,ed=(po(nd,td=Gn),nd.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fp(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="r",e),t._orderByCalled);var e,n},nd);function nd(t){var e=td.call(this)||this;return e._limit=t,e}var rd,id=(po(od,rd=Gn),od.prototype._apply=function(t){dp(t,"orderByChild");var e=new su(this._path);if(yu(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");return e=new Ec(e),gp(e=Qc(t._queryParams,e)),new fp(t._repo,t._path,e,!0)},od);function od(t){var e=rd.call(this)||this;return e._path=t,e}var ad,sd=(po(ud,ad=Gn),ud.prototype._apply=function(t){dp(t,"orderByKey");var e=Qc(t._queryParams,ju);return gp(e),new fp(t._repo,t._path,e,!0)},ud);function ud(){return null!==ad&&ad.apply(this,arguments)||this}var cd,hd=(po(ld,cd=Gn),ld.prototype._apply=function(t){dp(t,"orderByPriority");var e=Qc(t._queryParams,oc);return gp(e),new fp(t._repo,t._path,e,!0)},ld);function ld(){return null!==cd&&cd.apply(this,arguments)||this}var fd,pd=(po(dd,fd=Gn),dd.prototype._apply=function(t){dp(t,"orderByValue");var e=Qc(t._queryParams,Oc);return gp(e),new fp(t._repo,t._path,e,!0)},dd);function dd(){return null!==fd&&fd.apply(this,arguments)||this}var gd,vd=(po(yd,gd=Gn),yd.prototype._apply=function(t){if(yf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qp(this._value,this._key)._apply(new Gp(this._value,this._key)._apply(t))},yd);function yd(t,e){var n=gd.call(this)||this;return n._value=t,n._key=e,n}function md(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=ga(t);try{for(var a=mo(r),s=a.next();!s.done;s=a.next())o=s.value._apply(o)}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}co=mp,Eo(!pl,"__referenceConstructor has already been defined"),pl=co,F=mp,Eo(!_l,"__referenceConstructor has already been defined"),_l=F;var bd={},_d=!1;function wd(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Za("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),us("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,a=np(i,r),s=a.repoInfo,n=void 0;return(n="undefined"!=typeof process?process.env.FIREBASE_DATABASE_EMULATOR_HOST:n)?(o=!0,i="http://"+n+"?ns="+s.namespace,s=(a=np(i,r)).repoInfo):o=!a.repoInfo.secure,e=r&&o?new Ss:new Ts(t.name,t.options,e),bf("Invalid Firebase Database URL",a),yu(a.path)||Za("Database URL must point to the root of a Firebase Database (not including a child path)."),r=s,o=e,(s=bd[(a=t).name])||(s={},bd[a.name]=s),(a=s[r.toURLString()])&&Za("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new xf(r,_d,o),e=s[r.toURLString()]=a,new Id(e,t)}var Id=(Object.defineProperty(Td.prototype,"_repo",{get:function(){return this._instanceStarted||(function(a,t,e){if(a.stats_=Fs(a.repoInfo_),a.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))a.server_=new $c(a.repoInfo_,function(t,e,n,r){Uf(a,t,e,n,r)},a.authTokenProvider_),setTimeout(function(){return jf(a,!0)},0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zo(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}a.persistentConnection_=new Ou(a.repoInfo_,t,function(t,e,n,r){Uf(a,t,e,n,r)},function(t){jf(a,t)},function(t){var n=a;gs(t,function(t,e){qf(n,t,e)})},a.authTokenProvider_,e),a.server_=a.persistentConnection_}var n;a.authTokenProvider_.addTokenChangeListener(function(t){a.server_.refreshAuthToken(t)}),a.statsReporter_=(t=function(){return new uh(a.stats_,a.server_)},n=(n=a.repoInfo_).toString(),Ms[n]||(Ms[n]=t()),Ms[n]),a.infoData_=new th,a.infoSyncTree_=new Rl({startListening:function(t,e,n,r){var i=[],o=a.infoData_.getNode(t._path);return o.isEmpty()||(i=xl(a.infoSyncTree_,t._path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),qf(a,"connected",!1),a.serverSyncTree_=new Rl({startListening:function(n,t,e,r){return a.server_.listen(n,e,t,function(t,e){e=r(t,e),Rf(a.eventQueue_,n._path,e)}),[]},stopListening:function(t,e){a.server_.unlisten(t,e)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(Td.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new mp(this._repo,cu())),this._rootInternal},enumerable:!1,configurable:!0}),Td.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,e=this.app.name,(n=bd[e])&&n[t.key]===t||Za("Database "+e+"("+t.repoInfo_+") has already been deleted."),Hf(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},Td.prototype._checkNotDeleted=function(t){null===this._rootInternal&&Za("Cannot call "+t+" on a deleted database.")},Td);function Td(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}var Ed=(Sd.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},Sd);function Sd(t,e){this.committed=t,this.snapshot=e}var Cd=(Nd.prototype.cancel=function(e){oa("OnDisconnect.cancel",0,1,arguments.length),sa("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Nd.prototype.remove=function(e){oa("OnDisconnect.remove",0,1,arguments.length),sa("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Nd.prototype.set=function(t,e){return oa("OnDisconnect.set",1,2,arguments.length),sa("OnDisconnect.set","onComplete",e,!0),t=this._delegate.set(t),e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Nd.prototype.setWithPriority=function(t,e,n){return oa("OnDisconnect.setWithPriority",2,3,arguments.length),sa("OnDisconnect.setWithPriority","onComplete",n,!0),e=this._delegate.setWithPriority(t,e),n&&e.then(function(){return n(null)},function(t){return n(t)}),e},Nd.prototype.update=function(t,e){if(oa("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,hs("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}sa("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},Nd);function Nd(t){this._delegate=t}var kd=(Ad.prototype.toJSON=function(){return oa("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Ad);function Ad(t,e){this.committed=t,this.snapshot=e}var Rd=(Od.prototype.val=function(){return oa("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},Od.prototype.exportVal=function(){return oa("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},Od.prototype.toJSON=function(){return oa("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},Od.prototype.exists=function(){return oa("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},Od.prototype.child=function(t){return oa("DataSnapshot.child",0,1,arguments.length),t=String(t),Cf("DataSnapshot.child","path",t,!1),new Od(this._database,this._delegate.child(t))},Od.prototype.hasChild=function(t){return oa("DataSnapshot.hasChild",1,1,arguments.length),Cf("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},Od.prototype.getPriority=function(){return oa("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},Od.prototype.forEach=function(e){var n=this;return oa("DataSnapshot.forEach",1,1,arguments.length),sa("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(t){return e(new Od(n._database,t))})},Od.prototype.hasChildren=function(){return oa("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(Od.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),Od.prototype.numChildren=function(){return oa("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},Od.prototype.getRef=function(){return oa("DataSnapshot.ref",0,0,arguments.length),new xd(this._database,this._delegate.ref)},Object.defineProperty(Od.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Od);function Od(t,e){this._database=t,this._delegate=e}Pd.prototype.on=function(t,n,e,r){var i=this;function o(t,e){n.call(a.context,new Rd(i.database,t),e)}oa("Query.on",2,4,arguments.length),sa("Query.on","callback",n,!1);var a=Pd.getCancelAndContextArgs_("Query.on",e,r);o.userCallback=n,o.context=a.context;r=null===(r=a.cancel)||void 0===r?void 0:r.bind(a.context);switch(t){case"value":return Dp(this._delegate,o,r),n;case"child_added":return xp(this._delegate,o,r),n;case"child_removed":return Fp(this._delegate,o,r),n;case"child_changed":return Lp(this._delegate,o,r),n;case"child_moved":return Mp(this._delegate,o,r),n;default:throw new Error(aa("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Pd.prototype.off=function(t,e,n){var r;oa("Query.off",0,3,arguments.length),function(){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(aa("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(),sa("Query.off","callback",e,!0),ua("Query.off","context",n,!0),e?((r=function(){}).userCallback=e,r.context=n,Up(this._delegate,t,r)):Up(this._delegate,t)},Pd.prototype.get=function(){var e=this;return Np(this._delegate).then(function(t){return new Rd(e.database,t)})},Pd.prototype.once=function(t,n,e,r){var i=this;function o(t,e){t=new Rd(i.database,t),n&&n.call(a.context,t,e),s.resolve(t)}oa("Query.once",1,4,arguments.length),sa("Query.once","callback",n,!0);var a=Pd.getCancelAndContextArgs_("Query.on",e,r),s=new Ao;function u(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)}switch(o.userCallback=n,o.context=a.context,t){case"value":Dp(this._delegate,o,u,{onlyOnce:!0});break;case"child_added":xp(this._delegate,o,u,{onlyOnce:!0});break;case"child_removed":Fp(this._delegate,o,u,{onlyOnce:!0});break;case"child_changed":Lp(this._delegate,o,u,{onlyOnce:!0});break;case"child_moved":Mp(this._delegate,o,u,{onlyOnce:!0});break;default:throw new Error(aa("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},Pd.prototype.limitToFirst=function(t){return oa("Query.limitToFirst",1,1,arguments.length),new Pd(this.database,md(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $p(t)}(t)))},Pd.prototype.limitToLast=function(t){return oa("Query.limitToLast",1,1,arguments.length),new Pd(this.database,md(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ed(t)}(t)))},Pd.prototype.orderByChild=function(t){return oa("Query.orderByChild",1,1,arguments.length),new Pd(this.database,md(this._delegate,function(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Cf("orderByChild","path",t,!1),new id(t)}(t)))},Pd.prototype.orderByKey=function(){return oa("Query.orderByKey",0,0,arguments.length),new Pd(this.database,md(this._delegate,new sd))},Pd.prototype.orderByPriority=function(){return oa("Query.orderByPriority",0,0,arguments.length),new Pd(this.database,md(this._delegate,new hd))},Pd.prototype.orderByValue=function(){return oa("Query.orderByValue",0,0,arguments.length),new Pd(this.database,md(this._delegate,new pd))},Pd.prototype.startAt=function(t,e){return void 0===t&&(t=null),oa("Query.startAt",0,2,arguments.length),new Pd(this.database,md(this._delegate,(void 0===t&&(t=null),vf("startAt","key",e,!0),new Gp(t,e))))},Pd.prototype.startAfter=function(t,e){return void 0===t&&(t=null),oa("Query.startAfter",0,2,arguments.length),new Pd(this.database,md(this._delegate,(vf("startAfter","key",e,!0),new Yp(t,e))))},Pd.prototype.endAt=function(t,e){return void 0===t&&(t=null),oa("Query.endAt",0,2,arguments.length),new Pd(this.database,md(this._delegate,(vf("endAt","key",e,!0),new qp(t,e))))},Pd.prototype.endBefore=function(t,e){return void 0===t&&(t=null),oa("Query.endBefore",0,2,arguments.length),new Pd(this.database,md(this._delegate,(vf("endBefore","key",e,!0),new Kp(t,e))))},Pd.prototype.equalTo=function(t,e){return oa("Query.equalTo",1,2,arguments.length),new Pd(this.database,md(this._delegate,(vf("equalTo","key",e,!0),new vd(t,e))))},Pd.prototype.toString=function(){return oa("Query.toString",0,0,arguments.length),this._delegate.toString()},Pd.prototype.toJSON=function(){return oa("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},Pd.prototype.isEqual=function(t){if(oa("Query.isEqual",1,1,arguments.length),t instanceof Pd)return this._delegate.isEqual(t._delegate);throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")},Pd.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,sa(t,"cancel",r.cancel,!0),r.context=n,ua(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(aa(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Pd.prototype,"ref",{get:function(){return new xd(this.database,new mp(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),ao=Pd;function Pd(t,e){this.database=t,this._delegate=e}var Dd,xd=(po(Ld,Dd=ao),Ld.prototype.getKey=function(){return oa("Reference.key",0,0,arguments.length),this._delegate.key},Ld.prototype.child=function(t){return oa("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Ld(this.database,Ep(this._delegate,t))},Ld.prototype.getParent=function(){oa("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new Ld(this.database,t):null},Ld.prototype.getRoot=function(){return oa("Reference.root",0,0,arguments.length),new Ld(this.database,this._delegate.root)},Ld.prototype.set=function(t,e){return oa("Reference.set",1,2,arguments.length),sa("Reference.set","onComplete",e,!0),t=Sp(this._delegate,t),e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Ld.prototype.update=function(t,e){if(oa("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,hs("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mf("Reference.update",this._delegate._path),sa("Reference.update","onComplete",e,!0);var i=Cp(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},Ld.prototype.setWithPriority=function(t,e,n){return oa("Reference.setWithPriority",2,3,arguments.length),sa("Reference.setWithPriority","onComplete",n,!0),e=function(t,e,n){if(mf("setWithPriority",t._path),yf("setWithPriority",e,t._path,!1),gf("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new Ao;return Bf(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}(this._delegate,t,e),n&&e.then(function(){return n(null)},function(t){return n(t)}),e},Ld.prototype.remove=function(e){oa("Reference.remove",0,1,arguments.length),sa("Reference.remove","onComplete",e,!0);var t=(t=this._delegate,mf("remove",t._path),Sp(t,null));return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Ld.prototype.transaction=function(t,e,n){var r=this;return oa("Reference.transaction",1,3,arguments.length),sa("Reference.transaction","transactionUpdate",t,!1),sa("Reference.transaction","onComplete",e,!0),function(){if(void 0!==n&&"boolean"!=typeof n)throw new Error(aa("Reference.transaction","applyLocally")+"must be a boolean.")}(),n=function(r,t,e){if(r=ga(r),mf("Reference.transaction",r._path),".length"===r.key||".keys"===r.key)throw"Reference.transaction failed: "+r.key+" is a read-only object.";var e=null===(n=null==e?void 0:e.applyLocally)||void 0===n||n,i=new Ao,n=Dp(r,function(){});return function(t,e,n,r,i,o){Gf(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:is(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},n=Qf(t,e,void 0);a.currentInputSnapshot=n,void 0===(r=a.update(n.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot)):(Sf("transaction failed: Data returned ",r,a.path),a.status=0,(i=sf(o=af(t.transactionQueueTree_,e))||[]).push(a),uf(o,i),o=void 0,"object"==typeof r&&null!==r&&Yo(r,".priority")?(o=Xo(r,".priority"),Eo(Ef(o),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):o=(Fl(t.serverSyncTree_,e)||vc.EMPTY_NODE).getPriority().val(),i=Ff(t),o=wc(r,o),i=nf(o,n,i),a.currentOutputSnapshotRaw=o,a.currentOutputSnapshotResolved=i,a.currentWriteId=Vf(t),a=Pl(t.serverSyncTree_,e,i,a.currentWriteId,a.applyLocally),Rf(t.eventQueue_,e,a),Yf(t,t.transactionQueueTree_))}(r._repo,r._path,t,function(t,e,n){t?i.reject(t):(n=new _p(n,new mp(r._repo,r._path),oc),i.resolve(new Ed(e,n)))},n,e),i.promise}(this._delegate,t,{applyLocally:n}).then(function(t){return new kd(t.committed,new Rd(r.database,t.snapshot))}),e&&n.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),n},Ld.prototype.setPriority=function(t,e){return oa("Reference.setPriority",1,2,arguments.length),sa("Reference.setPriority","onComplete",e,!0),t=function(t,e){t=ga(t),mf("setPriority",t._path),gf("setPriority",e,!1);var n=new Ao;return Bf(t._repo,vu(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}(this._delegate,t),e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Ld.prototype.push=function(t,e){var n=this;oa("Reference.push",0,2,arguments.length),sa("Reference.push","onComplete",e,!0);var r=function(t,e){t=ga(t),mf("push",t._path),yf("push",e,t._path,!0);var n=Mf(t._repo),r=Dc(n),n=Ep(t,r),i=Ep(t,r),e=null!=e?Sp(i,e).then(function(){return i}):Promise.resolve(i);return n.then=e.then.bind(e),n.catch=e.then.bind(e,void 0),n}(this._delegate,t),t=r.then(function(t){return new Ld(n.database,t)});return e&&t.then(function(){return e(null)},function(t){return e(t)}),(r=new Ld(this.database,r)).then=t.then.bind(t),r.catch=t.catch.bind(t,void 0),r},Ld.prototype.onDisconnect=function(){return mf("Reference.onDisconnect",this._delegate._path),new Cd(new hp(this._delegate._repo,this._delegate._path))},Object.defineProperty(Ld.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Ld.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Ld.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Ld);function Ld(t,e){var n=Dd.call(this,t,new fp(e._repo,e._path,new Wc,!1))||this;return n.database=t,n._delegate=e,n}var Md=(Fd.prototype.useEmulator=function(t,e){var n;n=this._delegate,t=t,e=e,(n=ga(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Za("Cannot call useEmulator() after instance has already been initialized."),(n=n._repo).repoInfo_=new Rs(t+":"+e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),n.repoInfo_.nodeAdmin&&(n.authTokenProvider_=new Ss)},Fd.prototype.ref=function(t){if(oa("database.ref",0,1,arguments.length),t instanceof xd){var e=Tp(this._delegate,t.toString());return new xd(this,e)}return e=Ip(this._delegate,t),new xd(this,e)},Fd.prototype.refFromURL=function(t){return oa("database.refFromURL",1,1,arguments.length),t=Tp(this._delegate,t),new xd(this,t)},Fd.prototype.goOffline=function(){var t;oa("database.goOffline",0,0,arguments.length),(t=ga(t=this._delegate))._checkNotDeleted("goOffline"),Hf(t._repo)},Fd.prototype.goOnline=function(){return oa("database.goOnline",0,0,arguments.length),(t=ga(t=this._delegate))._checkNotDeleted("goOnline"),void((t=t._repo).persistentConnection_&&t.persistentConnection_.resume(Pf));var t},Fd.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Fd);function Fd(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}mt=Object.freeze({__proto__:null,forceLongPolling:function(){Ys.forceDisallow(),Bs.forceAllow()},forceWebSockets:function(){Bs.forceDisallow()},isWebSocketsAvailable:function(){return Ys.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var i;t=t._delegate._repo,void 0===e&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new oh(t.stats_)),t.statsListener_.get()):t.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),gs(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},statsIncrementCounter:function(t,e){(t=t._delegate._repo).stats_.incrementCounter(e),(t=t.statsReporter_).statsToReport_[e]=!0},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){(t=t._delegate._repo).interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return zs(r),(r=new ba("auth-internal",new wa("database-standalone"))).setComponent(new va("auth-internal",function(){return i},"PRIVATE")),{instance:new Md(wd(e,r,n,t),e),namespace:o}}}),lt=Ou;Ou.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ou.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};vt=Object.freeze({__proto__:null,DataConnection:lt,RealTimeConnection:Zs,hijackHash:function(i){var o=Ou.prototype.put;return Ou.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Ou.prototype.put=o}},ConnectionTarget:Rs,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){_d=t}}),co=Md.ServerValue;zs((F=jl).SDK_VERSION),F.INTERNAL.registerComponent(new va("database",function(t,e){var n=e.instanceIdentifier,e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new Md(wd(e,t,n),e)},"PUBLIC").setServiceProps({Reference:xd,Query:ao,Database:Md,DataSnapshot:Rd,enableLogging:function(t,e){$a(t,e)},INTERNAL:mt,ServerValue:co,TEST_ACCESS:vt}).setMultipleInstances(!0)),F.registerVersion("@firebase/database","0.9.11");var Ud=function(t,e){return(Ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function jd(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qd=ft||self;function Vd(){}function Bd(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Kd(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Wd="closure_uid_"+(1e9*Math.random()>>>0),Hd=0;function Gd(t,e,n){return t.call.apply(t.bind,arguments)}function zd(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function Qd(t,e,n){return(Qd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gd:zd).apply(null,arguments)}function Yd(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xd(){return Date.now()}function Jd(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function $d(){this.j=this.j,this.i=this.i}$d.prototype.j=!1,$d.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&(Object.prototype.hasOwnProperty.call(this,Wd)&&this[Wd]||(this[Wd]=++Hd))},$d.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Zd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},tg=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function eg(){return Array.prototype.concat.apply([],arguments)}function ng(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function rg(t){return/^[\s\xa0]*$/.test(t)}var ig=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function og(t,e){return-1!=t.indexOf(e)}function ag(t,e){return t<e?-1:e<t?1:0}mt=qd.navigator;function sg(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ug(t){var e,n={};for(e in t)n[e]=t[e];return n}yg=(mt=mt&&mt.userAgent)?mt:"";var cg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hg(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<cg.length;i++)e=cg[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function lg(t){return lg[" "](t),t}lg[" "]=Vd;var fg,co=og(yg,"Opera"),pg=og(yg,"Trident")||og(yg,"MSIE"),vt=og(yg,"Edge"),dg=vt||pg,gg=og(yg,"Gecko")&&!(og(yg.toLowerCase(),"webkit")&&!og(yg,"Edge"))&&!(og(yg,"Trident")||og(yg,"MSIE"))&&!og(yg,"Edge"),F=og(yg.toLowerCase(),"webkit")&&!og(yg,"Edge");function vg(){var t=qd.document;return t?t.documentMode:void 0}var mt="",yg=(yg=yg,gg?/rv:([^\);]+)(\)|;)/.exec(yg):vt?/Edge\/([\d\.]+)/.exec(yg):pg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(yg):F?/WebKit\/(\S+)/.exec(yg):co?/(?:Version)[ \/]?(\S+)/.exec(yg):void 0);yg&&(mt=yg?yg[1]:""),fg=pg&&null!=(yg=vg())&&yg>parseFloat(mt)?String(yg):mt;var mg={};function bg(s){return t=s,e=function(){for(var t=0,e=ig(String(fg)).split("."),n=ig(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",a=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(t=ag(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||ag(0==o[2].length,0==a[2].length)||ag(o[2],a[2]),o=o[3],a=a[3],0==t););return 0<=t},n=mg,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var _g=qd.document&&pg&&(vg()||parseInt(fg,10))||void 0,wg=!pg||9<=Number(_g),Ig=pg&&!bg("9"),Tg=function(){if(!qd.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qd.addEventListener("test",Vd,e),qd.removeEventListener("test",Vd,e)}catch(t){}return t}();function Eg(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Sg(t,e){if(Eg.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(gg){t:{try{lg(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Cg[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Eg.prototype.b=function(){this.defaultPrevented=!0},Jd(Sg,Eg);var Cg={2:"touch",3:"pen",4:"mouse"};Sg.prototype.b=function(){Sg.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ig)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Ng="closure_listenable_"+(1e6*Math.random()|0),kg=0;function Ag(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++kg,this.Y=this.Z=!1}function Rg(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Og(t){this.src=t,this.a={},this.b=0}function Pg(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=Zd(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Rg(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Dg(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Og.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Dg(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Ag(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var xg="closure_lm_"+(1e6*Math.random()|0),Lg={};function Mg(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Wg(r),e&&e[Ng]?e.wa(n,r,Kd(i)?!!i.capture:!!i,o):Fg(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mg(t,e[o],n,r,i);return null}return n=Wg(n),t&&t[Ng]?t.va(e,n,Kd(r)?!!r.capture:!!r,i):Fg(t,e,n,!1,r,i)}function Fg(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Kd(i)?!!i.capture:!!i;if(a&&!wg)return null;var s,u,c=Bg(t);if(c||(t[xg]=c=new Og(t)),(n=c.add(e,n,r,a,o)).proxy)return n;if(s=Vg,r=u=wg?function(t){return s.call(u.src,u.listener,t)}:function(t){if(!(t=s.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=Tg?i:a)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(jg(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ug(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Ng]?Pg(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(jg(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Bg(e))?(Pg(n,t),0==n.b&&(n.src=null,e[xg]=null)):Rg(t)))}function jg(t){return t in Lg?Lg[t]:Lg[t]="on"+t}function qg(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ug(t),n.call(r,e)}function Vg(t,e){if(t.Y)return!0;if(wg)return qg(t,new Sg(e,this));if(!e)t:{e=["window","event"];for(var n=qd,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return qg(t,e=new Sg(e,this))}function Bg(t){return(t=t[xg])instanceof Og?t:null}var Kg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wg(e){return"function"==typeof e?e:(e[Kg]||(e[Kg]=function(t){return e.handleEvent(t)}),e[Kg])}function Hg(){$d.call(this),this.c=new Og(this),(this.J=this).C=null}function Gg(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new Eg(e,t):e instanceof Eg?e.target=e.target||t:(a=e,hg(e=new Eg(r,t),a)),a=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],a=zg(o,r,!0,e)&&a;if(a=zg(o=e.a=t,r,!0,e)&&a,a=zg(o,r,!1,e)&&a,n)for(i=0;i<n.length;i++)a=zg(o=e.a=n[i],r,!1,e)&&a}function zg(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.Y&&u.capture==n&&(a=u.listener,s=u.ca||u.src,u.Z&&Pg(t.c,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}Jd(Hg,$d),Hg.prototype[Ng]=!0,(nu=Hg.prototype).addEventListener=function(t,e,n,r){Mg(this,t,e,n,r)},nu.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=Kd(i)?!!i.capture:!!i,r=Wg(r),e&&e[Ng]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Dg(a=e.a[n],r,i,o))&&(Rg(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):(e=e&&Bg(e))&&(n=e.a[n.toString()],(r=(e=-1)<(e=n?Dg(n,r,i,o):e)?n[e]:null)&&Ug(r))}(this,t,e,n,r)},nu.G=function(){if(Hg.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Rg(n[r]);delete e.a[t],e.b--}}this.C=null},nu.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},nu.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Qg=qd.JSON.stringify;function Yg(){this.b=this.a=null}var Xg,Jg=($g.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new $g(function(){return new Zg},function(t){t.reset()}));function $g(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Zg(){this.next=this.b=this.a=null}function tv(t,e){var n;Xg||(n=qd.Promise.resolve(void 0),Xg=function(){n.then(rv)}),ev||(Xg(),ev=!0),nv.add(t,e)}Yg.prototype.add=function(t,e){var n=Jg.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Zg.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var ev=!(Zg.prototype.reset=function(){this.next=this.b=this.a=null}),nv=new Yg;function rv(){for(var t,e;n=e=void 0,n=null,(e=nv).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){qd.setTimeout(function(){throw t},0)}(t)}var n=Jg;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}ev=!1}function iv(t,e){Hg.call(this),this.b=t||1,this.a=e||qd,this.f=Qd(this.Za,this),this.g=Xd()}function ov(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function av(t,e,n){if("function"==typeof t)n&&(t=Qd(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Qd(t.handleEvent,t)}return 2147483647<Number(e)?-1:qd.setTimeout(t,e||0)}Jd(iv,Hg),(nu=iv.prototype).aa=!1,nu.M=null,nu.Za=function(){var t;this.aa&&(0<(t=Xd()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Gg(this,"tick"),this.aa&&(ov(this),this.start())))},nu.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Xd())},nu.G=function(){iv.X.G.call(this),ov(this),delete this.a};var sv,uv,cv=(Ud(uv=lv,mt=sv=$d),uv.prototype=null===mt?Object.create(mt):(hv.prototype=mt.prototype,new hv),lv.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=av(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},lv.prototype.G=function(){sv.prototype.G.call(this),this.a&&(qd.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},lv);function hv(){this.constructor=uv}function lv(t,e){var n=sv.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function fv(t){$d.call(this),this.b=t,this.a={}}Jd(fv,$d);var pv=[];function dv(t,e,n,r){Array.isArray(n)||(n&&(pv[0]=n.toString()),n=pv);for(var i=0;i<n.length;i++){var o=Mg(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function gv(t){sg(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ug(t)},t),t.a={}}function vv(){this.a=!0}function yv(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)&&"noop"!=(r=i[0])&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}return Qg(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}fv.prototype.G=function(){fv.X.G.call(this),gv(this)},fv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vv.prototype.info=function(){};var mv={},bv=null;function _v(){return bv=bv||new Hg}function wv(t){Eg.call(this,mv.Fa,t)}function Iv(){var t=_v();Gg(t,new wv(t))}function Tv(t,e){Eg.call(this,mv.STAT_EVENT,t),this.stat=e}function Ev(t){var e=_v();Gg(e,new Tv(e,t))}function Sv(t){Eg.call(this,mv.Ga,t)}function Cv(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return qd.setTimeout(function(){t()},e)}function Nv(){}function kv(t){var e;return(e=t.a)?e:t.a={}}function Av(){}function Rv(){Eg.call(this,"d")}function Ov(){Eg.call(this,"c")}function Pv(){}function Dv(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new fv(this),this.P=Lv,t=dg?125:void 0,this.R=new iv(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}mv.Fa="serverreachability",Jd(wv,Eg),mv.STAT_EVENT="statevent",Jd(Tv,Eg),mv.Ga="timingevent",Jd(Sv,Eg),Gn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},lt={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"},Nv.prototype.a=null,ft={OPEN:"a",eb:"b",Ea:"c",qb:"d"},Jd(Rv,Eg),Jd(Ov,Eg),Jd(Pv,Nv);var xv=new Pv,Lv=45e3,Mv={},Fv={};function Uv(t,e,n){t.H=1,t.i=oy(Zv(e)),t.j=n,t.I=!0,jv(t,null)}function jv(t,e){t.u=Xd(),Vv(t),t.l=Zv(t.i);var a,s,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),my(n.b,"t",r),t.D=0,t.a=lm(t.g,t.g.C?e:null),0<t.O&&(t.F=new cv(Qd(t.Ca,t,t.a),t.O)),dv(t.J,t.a,"readystatechange",t.Xa),e=t.B?ug(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Iv(),a=t.c,s=t.m,u=t.l,c=t.f,h=t.S,l=t.j,a.info(function(){if(a.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+s+"\n"+u+"\n"+t})}function qv(t,e,n){for(var r,i,o,a=!0;!t.A&&t.D<n.length;){var s=(s=n,o=void 0,i=(r=t).D,-1==(o=s.indexOf("\n",i))?Fv:(i=Number(s.substring(i,o)),isNaN(i)?Mv:(o+=1)+i>s.length?Fv:(s=s.substr(o,i),r.D=o+i,s)));if(s==Fv){4==e&&(t.h=4,Ev(14),a=!1),yv(t.c,t.f,null,"[Incomplete Response]");break}if(s==Mv){t.h=4,Ev(15),yv(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}yv(t.c,t.f,s,null),Gv(t,s)}4==e&&0==n.length&&(t.h=1,Ev(16),a=!1),t.b=t.b&&a,a?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),rm(e),e.F=!0,Ev(11))):(yv(t.c,t.f,n,"[Invalid Chunked Response]"),Hv(t),Wv(t))}function Vv(t){t.T=Xd()+t.P,Bv(t,t.P)}function Bv(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Cv(Qd(t.Va,t),e)}function Kv(t){t.o&&(qd.clearTimeout(t.o),t.o=null)}function Wv(t){0==t.g.v||t.A||am(t.g,t)}function Hv(t){Kv(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ov(t.R),gv(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Gv(t,e){try{var n,r,i,o,a,s=t.g;if(0!=s.v&&(s.a==t||Sy(s.b,t)))if(s.I=t.N,!t.C&&Sy(s.b,t)&&3==s.v){try{var u=s.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!s.j){if(s.a){if(!(s.a.u+3e3<t.u))break t;om(s),Qy(s)}nm(s),Ev(18)}}else s.oa=c[1],0<s.oa-s.P&&c[2]<37500&&s.H&&0==s.o&&!s.m&&(s.m=Cv(Qd(s.Sa,s),6e3));if(Ey(s.b)<=1&&s.ea){try{s.ea()}catch(t){}s.ea=void 0}}else um(s,11)}else if(!t.C&&s.a!=t||om(s),!rg(e))for(e=u=s.ka.a.parse(e),u=0;u<e.length;u++)c=e[u],s.P=c[0],c=c[1],2==s.v?"c"==c[0]?(s.J=c[1],s.ga=c[2],null!=(r=c[3])&&(s.ha=r,s.c.info("VER="+s.ha)),null!=(o=c[4])&&(s.pa=o,s.c.info("SVER="+s.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,s.D=n,s.c.info("backChannelRequestTimeoutMs_="+n)),n=s,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(og(r,"spdy")||og(r,"quic")||og(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(Cy(i,i.b),i.b=null)),!n.A||(a=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=a,iy(n.B,n.A,a))),s.v=3,s.f&&s.f.ta(),s.U&&(s.N=Xd()-t.u,s.c.info("Handshake RTT: "+s.N+"ms")),i=t,(n=s).la=hm(n,n.C?n.ga:null,n.fa),i.C?(Ny(n.b,i),o=i,(a=n.D)&&o.setTimeout(a),o.o&&(Kv(o),Vv(o)),n.a=i):em(n),0<s.g.length&&Jy(s)):"stop"!=c[0]&&"close"!=c[0]||um(s,7):3==s.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?um(s,7):zy(s):"noop"!=c[0]&&s.f&&s.f.sa(c),s.o=0);Iv()}catch(t){}}function zv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Bd(t)||"string"==typeof t)tg(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Bd(t)||"string"==typeof t)for(var n=[],r=t.length,i=0;i<r;i++)n.push(i);else for(i in n=[],r=0,t)n[r++]=i;for(var i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Bd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Qv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Yv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Xv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Xv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Xv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(nu=Dv.prototype).setTimeout=function(t){this.P=t},nu.Xa=function(t){t=t.target;var e=this.F;e&&3==Ky(t)?e.f():this.Ca(t)},nu.Ca=function(t){try{if(t==this.a)t:{var e=Ky(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!dg&&!this.a.$())){this.A||4!=e||7==n||Iv(),Kv(this);var i=this.a.W();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,s=this.m,u=this.l,c=this.f,h=this.S,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+s+"\n"+u+"\n"+l+" "+f}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rg(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.h=3,Ev(12),Hv(this),Wv(this);break t}yv(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Gv(this,a)}this.I?(qv(this,e,n),dg&&this.b&&3==e&&(dv(this.J,this.R,"tick",this.Wa),this.R.start())):(yv(this.c,this.f,n,null),Gv(this,n)),4==e&&Hv(this),this.b&&!this.A&&(4==e?am(this.g,this):(this.b=!1,Vv(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,Ev(12)):(this.h=0,Ev(13)),Hv(this),Wv(this)}}}catch(t){}var s,u,c,h,l,f},nu.Wa=function(){var t,e;this.a&&(t=Ky(this.a),e=this.a.$(),this.D<e.length&&(Kv(this),qv(this,t,e),this.b&&4!=t&&Vv(this)))},nu.cancel=function(){this.A=!0,Hv(this)},nu.Va=function(){this.o=null;var t,e,n=Xd();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(Iv(),Ev(17)),Hv(this),this.h=2,Wv(this)):Bv(this,this.T-n)},(nu=Qv.prototype).K=function(){Yv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},nu.L=function(){return Yv(this),this.a.concat()},nu.get=function(t,e){return Xv(this.b,t)?this.b[t]:e},nu.set=function(t,e){Xv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},nu.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Jv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $v(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof $v?(this.a=void 0!==e?e:t.a,ty(this,t.f),this.j=t.j,ey(this,t.c),ny(this,t.h),this.g=t.g,e=t.b,(n=new dy).c=e.c,e.a&&(n.a=new Qv(e.a),n.b=e.b),ry(this,n),this.i=t.i):t&&(n=String(t).match(Jv))?(this.a=!!e,ty(this,n[1]||"",!0),this.j=ay(n[2]||""),ey(this,n[3]||"",!0),ny(this,n[4]),this.g=ay(n[5]||"",!0),ry(this,n[6]||"",!0),this.i=ay(n[7]||"")):(this.a=!!e,this.b=new dy(null,this.a))}function Zv(t){return new $v(t)}function ty(t,e,n){t.f=n?ay(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ey(t,e,n){t.c=n?ay(e,!0):e}function ny(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ry(t,e,n){var r,i;e instanceof dy?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(gy(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(vy(this,e),my(this,n,t))},r)),r.f=i):(n||(e=sy(e,fy)),t.b=new dy(e,t.a))}function iy(t,e,n){t.b.set(e,n)}function oy(t){return iy(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Xd()).toString(36)),t}function ay(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sy(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,uy),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function uy(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$v.prototype.toString=function(){var t=[],e=this.f;e&&t.push(sy(e,cy,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(sy(e,cy,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(sy(n,"/"==n.charAt(0)?ly:hy,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",sy(n,py)),t.join("")};var cy=/[#\/\?@]/g,hy=/[#\?:]/g,ly=/[#\?]/g,fy=/[#\?@]/g,py=/#/g;function dy(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function gy(o){o.a||(o.a=new Qv,o.b=0,o.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],r=n,i=i?decodeURIComponent(i.replace(/\+/g," ")):"",o.add(decodeURIComponent(r.replace(/\+/g," ")),i)}}}(o.c))}function vy(t,e){gy(t),e=by(t,e),Xv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Xv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Yv(t)))}function yy(t,e){return gy(t),e=by(t,e),Xv(t.a.b,e)}function my(t,e,n){vy(t,e),0<n.length&&(t.c=null,t.a.set(by(t,e),ng(n)),t.b+=n.length)}function by(t,e){return e=String(e),t.f?e.toLowerCase():e}(nu=dy.prototype).add=function(t,e){gy(this),this.c=null,t=by(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},nu.forEach=function(n,r){gy(this),this.a.forEach(function(t,e){tg(t,function(t){n.call(r,t,e,this)},this)},this)},nu.L=function(){gy(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},nu.K=function(t){gy(this);var e=[];if("string"==typeof t)yy(this,t)&&(e=eg(e,this.a.get(by(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=eg(e,t[n])}return e},nu.set=function(t,e){return gy(this),this.c=null,yy(this,t=by(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},nu.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},nu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};function _y(t,e){this.b=t,this.a=e}function wy(t){this.g=t||Iy,t=qd.PerformanceNavigationTiming?0<(t=qd.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(qd.ia&&qd.ia.ya&&qd.ia.ya()&&qd.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Iy=10;function Ty(t){return t.b||t.a&&t.a.size>=t.f}function Ey(t){return t.b?1:t.a?t.a.size:0}function Sy(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Cy(t,e){t.a?t.a.add(e):t.b=e}function Ny(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ky(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return ng(t.c);var r=t.c;try{for(var i=jd(t.a.values()),o=i.next();!o.done;o=i.next())var a=o.value,r=r.concat(a.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ay(){}function Ry(){this.a=new Ay}function Oy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}wy.prototype.cancel=function(){var t,e;if(this.c=ky(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=jd(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ay.prototype.stringify=function(t){return qd.JSON.stringify(t,void 0)},Ay.prototype.parse=function(t){return qd.JSON.parse(t,void 0)};var Py=qd.JSON.parse;function Dy(t){Hg.call(this),this.headers=new Qv,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=xy,this.D=this.F=!1}Jd(Dy,Hg);var xy="",Ly=/^https?$/i,My=["POST","PUT"];function Fy(t){return"content-type"==t.toLowerCase()}function Uy(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,jy(t),Vy(t)}function jy(t){t.u||(t.u=!0,Gg(t,"complete"),Gg(t,"error"))}function qy(t){if(t.b&&(!t.s[1]||4!=Ky(t)||2!=t.W()))if(t.l&&4==Ky(t))av(t.za,0,t);else if(Gg(t,"readystatechange"),4==Ky(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}if((e=a)||((n=0===o)&&(!(i=String(t.B).match(Jv)[1]||null)&&qd.self&&qd.self.location&&(i=(r=qd.self.location.protocol).substr(0,r.length-1)),n=!Ly.test(i?i.toLowerCase():"")),e=n),e)Gg(t,"complete"),Gg(t,"success");else{t.h=6;try{var s=2<Ky(t)?t.a.statusText:""}catch(o){s=""}t.f=s+" ["+t.W()+"]",jy(t)}}finally{Vy(t)}}}function Vy(t,e){if(t.a){By(t);var n=t.a,r=t.s[0]?Vd:null;t.a=null,t.s=null,e||Gg(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function By(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(qd.clearTimeout(t.m),t.m=null)}function Ky(t){return t.a?t.a.readyState:0}function Wy(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",sg(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):iy(t,e,n))}function Hy(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Gy(t){this.pa=0,this.g=[],this.c=new vv,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Hy("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Hy("baseRetryDelayMs",5e3,t),this.Ra=Hy("retryDelaySeedMs",1e4,t),this.Ma=Hy("forwardChannelMaxRetries",2,t),this.ma=Hy("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new wy(t&&t.concurrentRequestLimit),this.ka=new Ry,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function zy(t){var e,n;Yy(t),3==t.v&&(e=t.R++,iy(n=Zv(t.B),"SID",t.J),iy(n,"RID",e),iy(n,"TYPE","terminate"),Zy(t,n),(e=new Dv(t,t.c,e,void 0)).H=2,e.i=oy(Zv(n)),n=!1,!(n=qd.navigator&&qd.navigator.sendBeacon?qd.navigator.sendBeacon(e.i.toString(),""):n)&&qd.Image&&((new Image).src=e.i,n=!0),n||(e.a=lm(e.g,null),e.a.ba(e.i)),e.u=Xd(),Vv(e)),cm(t)}function Qy(t){t.a&&(rm(t),t.a.cancel(),t.a=null)}function Yy(t){Qy(t),t.j&&(qd.clearTimeout(t.j),t.j=null),om(t),t.b.cancel(),t.h&&("number"==typeof t.h&&qd.clearTimeout(t.h),t.h=null)}function Xy(t,e){t.g.push(new _y(t.Oa++,e)),3==t.v&&Jy(t)}function Jy(t){Ty(t.b)||t.h||(t.h=!0,tv(t.Ba,t),t.u=0)}function $y(t,e){var n=e?e.f:t.R++,r=Zv(t.B);iy(r,"SID",t.J),iy(r,"RID",n),iy(r,"AID",t.P),Zy(t,r),t.i&&t.l&&Wy(r,t.i,t.l),n=new Dv(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=tm(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Cy(t.b,n),Uv(n,r,e)}function Zy(t,n){t.f&&zv({},function(t,e){iy(n,e,t)})}function tm(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Qd(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{!function(t,r){var i="req"+c+"_"||"";try{zv(t,function(t,e){var n=t;Kd(t)&&(n=Qg(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,a)}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function em(t){t.a||t.j||(t.T=1,tv(t.Aa,t),t.o=0)}function nm(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Cv(Qd(t.Aa,t),sm(t,t.o)),t.o++,1)}function rm(t){null!=t.s&&(qd.clearTimeout(t.s),t.s=null)}function im(t){t.a=new Dv(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Zv(t.la);iy(e,"RID","rpc"),iy(e,"SID",t.J),iy(e,"CI",t.H?"0":"1"),iy(e,"AID",t.P),Zy(t,e),iy(e,"TYPE","xmlhttp"),t.i&&t.l&&Wy(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=oy(Zv(e)),n.j=null,n.I=!0,jv(n,t)}function om(t){null!=t.m&&(qd.clearTimeout(t.m),t.m=null)}function am(t,e){var n,r,i,o=null;if(t.a==e){om(t),rm(t),t.a=null;var a=2}else{if(!Sy(t.b,e))return;o=e.s,Ny(t.b,e),a=1}if(t.I=e.N,0!=t.v)if(e.b)1==a?(o=e.j?e.j.length:0,e=Xd()-e.u,n=t.u,Gg(a=_v(),new Sv(a)),Jy(t)):em(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=a||(i=e,Ey((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.La?0:r.Ma)||(r.h=Cv(Qd(r.Ba,r,i),sm(r,r.u)),r.u++,0))))&&(2!=a||!nm(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:um(t,5);break;case 4:um(t,10);break;case 3:um(t,6);break;default:um(t,2)}}function sm(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function um(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=Qd(t.Ya,t),r||(r=new $v("//www.google.com/images/cleardot.gif"),qd.location&&"http"==qd.location.protocol||ty(r,"https"),oy(r)),n=r.toString(),r=o,o=new vv,qd.Image?((i=new Image).onload=Yd(Oy,o,i,"TestLoadImage: loaded",!0,r),i.onerror=Yd(Oy,o,i,"TestLoadImage: error",!1,r),i.onabort=Yd(Oy,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=Yd(Oy,o,i,"TestLoadImage: timeout",!1,r),qd.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Ev(2),t.v=0,t.f&&t.f.ra(e),cm(t),Yy(t)}function cm(t){t.v=0,t.I=-1,t.f&&(0==ky(t.b).length&&0==t.g.length||(t.b.c.length=0,ng(t.g),t.g.length=0),t.f.qa())}function hm(t,e,n){var r,i,o,a,s,u=(a=n)instanceof $v?Zv(a):new $v(a,void 0);return""!=u.c?(e&&ey(u,e+"."+u.c),ny(u,u.h)):(r=(s=qd.location).protocol,i=e?e+"."+s.hostname:s.hostname,o=+s.port,a=n,s=new $v(null,void 0),r&&ty(s,r),i&&ey(s,i),o&&ny(s,o),a&&(s.g=a),u=s),t.V&&sg(t.V,function(t,e){iy(u,e,t)}),e=t.A,n=t.na,e&&n&&iy(u,e,n),iy(u,"VER",t.ha),Zy(t,u),u}function lm(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dy(t.Na)).F=t.C,e}function fm(){}function pm(){if(pg&&!(10<=Number(_g)))throw Error("Environmental error: no available transport.")}function dm(t,e){Hg.call(this),this.a=new Gy(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!rg(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rg(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ym(this)}function gm(t){Rv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function vm(){Ov.call(this),this.status=1}function ym(t){this.a=t}(nu=Dy.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?kv(this.H):kv(xv),this.a.onreadystatechange=Qd(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Uy(this,t)}t=n||"";var i,o=new Qv(this.headers);r&&zv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Fy,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=qd.FormData&&t instanceof qd.FormData,0<=Zd(My,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{By(this),0<this.o&&((this.D=(i=this.a,pg&&bg(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Qd(this.xa,this)):this.m=av(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Uy(this,t)}},nu.xa=function(){this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Gg(this,"timeout"),this.abort(8))},nu.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Gg(this,"complete"),Gg(this,"abort"),Vy(this))},nu.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Vy(this,!0)),Dy.X.G.call(this)},nu.za=function(){this.j||(this.A||this.l||this.g?qy(this):this.Ua())},nu.Ua=function(){qy(this)},nu.W=function(){try{return 2<Ky(this)?this.a.status:-1}catch(t){return-1}},nu.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},nu.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Py(e)}},nu.ua=function(){return this.h},nu.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(nu=Gy.prototype).ha=8,nu.v=1,nu.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Dv(this,this.c,t,void 0),r=this.l;if(this.O&&(r?hg(r=ug(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=tm(this,n,e),iy(i=Zv(this.B),"RID",t),iy(i,"CVER",22),this.A&&iy(i,"X-HTTP-Session-Id",this.A),Zy(this,i),this.i&&r&&Wy(i,this.i,r),Cy(this.b,n),this.Ia&&iy(i,"TYPE","init"),this.da?(iy(i,"$req",e),iy(i,"SID","null"),n.U=!0,Uv(n,i,null)):Uv(n,i,e),this.v=2}}else 3==this.v&&(t?$y(this,t):0==this.g.length||Ty(this.b)||$y(this))},nu.Aa=function(){var t;this.j=null,im(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Cv(Qd(this.Ta,this),t))},nu.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ev(10),Qy(this),im(this))},nu.Sa=function(){null!=this.m&&(this.m=null,Qy(this),nm(this),Ev(19))},nu.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Ev(2)):(this.c.info("Failed to ping google.com"),Ev(1))},(nu=fm.prototype).ta=function(){},nu.sa=function(){},nu.ra=function(){},nu.qa=function(){},nu.Ja=function(){},pm.prototype.a=function(t,e){return new dm(t,e)},Jd(dm,Hg),dm.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Ev(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=hm(t,null,t.fa),Jy(t)},dm.prototype.close=function(){zy(this.a)},dm.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Xy(this.a,e)):this.l?((e={}).__data__=Qg(t),Xy(this.a,e)):Xy(this.a,t)},dm.prototype.G=function(){this.a.f=null,delete this.f,zy(this.a),delete this.a,dm.X.G.call(this)},Jd(gm,Rv),Jd(vm,Ov),Jd(ym,fm),ym.prototype.ta=function(){Gg(this.a,"a")},ym.prototype.sa=function(t){Gg(this.a,new gm(t))},ym.prototype.ra=function(t){Gg(this.a,new vm)},ym.prototype.qa=function(){Gg(this.a,"b")},pm.prototype.createWebChannel=pm.prototype.a,dm.prototype.send=dm.prototype.h,dm.prototype.open=dm.prototype.g,Gn.NO_ERROR=0,Gn.TIMEOUT=8,Gn.HTTP_ERROR=6,lt.COMPLETE="complete",(Av.EventType=ft).OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",Hg.prototype.listen=Hg.prototype.va,Dy.prototype.listenOnce=Dy.prototype.wa,Dy.prototype.getLastError=Dy.prototype.Qa,Dy.prototype.getLastErrorCode=Dy.prototype.ua,Dy.prototype.getStatus=Dy.prototype.W,Dy.prototype.getResponseJson=Dy.prototype.Pa,Dy.prototype.getResponseText=Dy.prototype.$,Dy.prototype.send=Dy.prototype.ba;var mm=_v,bm=Gn,_m=lt,wm=mv,Im=Av,Tm=Dy,Em=(Sm.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Sm.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},Sm);function Sm(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}Em.o=-1;var Cm,Nm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},km=(po(Rm,Cm=Error),Rm),Am=new Aa("@firebase/firestore");function Rm(t,e){var n=this;return(n=Cm.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Om(){return Am.logLevel}function Pm(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Am.logLevel<=Ta.DEBUG&&(e=n.map(Lm),Am.debug.apply(Am,_o(["Firestore (8.4.2): "+t],e)))}function Dm(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Am.logLevel<=Ta.ERROR&&(e=n.map(Lm),Am.error.apply(Am,_o(["Firestore (8.4.2): "+t],e)))}function xm(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Am.logLevel<=Ta.WARN&&(e=n.map(Lm),Am.warn.apply(Am,_o(["Firestore (8.4.2): "+t],e)))}function Lm(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Mm(t){throw Dm(t="FIRESTORE (8.4.2) INTERNAL ASSERTION FAILED: "+(void 0===t?"Unexpected state":t)),new Error(t)}function Fm(t){t||Mm()}var Um=(jm.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(var n=0;n<40;n++)e[n]=Math.floor(256*Math.random());return e}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},jm);function jm(){}function qm(t,e){return t<e?-1:e<t?1:0}function Vm(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Bm(t){return t+"\0"}var Km=(Gm.now=function(){return Gm.fromMillis(Date.now())},Gm.fromDate=function(t){return Gm.fromMillis(t.getTime())},Gm.fromMillis=function(t){var e=Math.floor(t/1e3);return new Gm(e,Math.floor(1e6*(t-1e3*e)))},Gm.prototype.toDate=function(){return new Date(this.toMillis())},Gm.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Gm.prototype._compareTo=function(t){return this.seconds===t.seconds?qm(this.nanoseconds,t.nanoseconds):qm(this.seconds,t.seconds)},Gm.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Gm.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Gm.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Gm.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Gm),Wm=(Hm.fromTimestamp=function(t){return new Hm(t)},Hm.min=function(){return new Hm(new Km(0,0))},Hm.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},Hm.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Hm.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Hm.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Hm.prototype.toTimestamp=function(){return this.timestamp},Hm);function Hm(t){this.timestamp=t}function Gm(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new km(Nm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new km(Nm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new km(Nm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new km(Nm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function zm(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Qm(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ym(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xm,Jm,Gn=(Object.defineProperty(sb.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),sb.prototype.isEqual=function(t){return 0===sb.comparator(this,t)},sb.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof sb?t.forEach(function(t){e.push(t)}):e.push(t),this.construct(e)},sb.prototype.limit=function(){return this.offset+this.length},sb.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},sb.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},sb.prototype.firstSegment=function(){return this.segments[this.offset]},sb.prototype.lastSegment=function(){return this.get(this.length-1)},sb.prototype.get=function(t){return this.segments[this.offset+t]},sb.prototype.isEmpty=function(){return 0===this.length},sb.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},sb.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},sb.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},sb.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},sb.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},sb),$m=(po(ab,Jm=Gn),ab.prototype.construct=function(t,e,n){return new ab(t,e,n)},ab.prototype.canonicalString=function(){return this.toArray().join("/")},ab.prototype.toString=function(){return this.canonicalString()},ab.fromString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new km(Nm.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new ab(n)},ab.emptyPath=function(){return new ab([])},ab),Zm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tb=(po(ob,Xm=Gn),ob.prototype.construct=function(t,e,n){return new ob(t,e,n)},ob.isValidIdentifier=function(t){return Zm.test(t)},ob.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ob.isValidIdentifier(t)?t:"`"+t+"`"}).join(".")},ob.prototype.toString=function(){return this.canonicalString()},ob.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},ob.keyField=function(){return new ob(["__name__"])},ob.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new km(Nm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new km(Nm.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new km(Nm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new km(Nm.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ob(e)},ob.emptyPath=function(){return new ob([])},ob),eb=(ib.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},ib.prototype.isEqual=function(t){return Vm(this.fields,t.fields,function(t,e){return t.isEqual(e)})},ib),nb=(rb.fromBase64String=function(t){return new rb(atob(t))},rb.fromUint8Array=function(t){return new rb(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},rb.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},rb.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},rb.prototype.approximateByteSize=function(){return 2*this.binaryString.length},rb.prototype.compareTo=function(t){return qm(this.binaryString,t.binaryString)},rb.prototype.isEqual=function(t){return this.binaryString===t.binaryString},rb);function rb(t){this.binaryString=t}function ib(t){(this.fields=t).sort(tb.comparator)}function ob(){return null!==Xm&&Xm.apply(this,arguments)||this}function ab(){return null!==Jm&&Jm.apply(this,arguments)||this}function sb(t,e,n){void 0===e?e=0:e>t.length&&Mm(),void 0===n?n=t.length-e:n>t.length-e&&Mm(),this.segments=t,this.offset=e,this.len=n}nb.EMPTY_BYTE_STRING=new nb("");var ub=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cb(t){if(Fm(!!t),"string"!=typeof t)return{seconds:hb(t.seconds),nanos:hb(t.nanos)};var e=0,n=ub.exec(t);return Fm(!!n),n[1]&&(n=(n[1]+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function hb(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lb(t){return"string"==typeof t?nb.fromBase64String(t):nb.fromUint8Array(t)}function fb(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pb(t){return t=cb(t.mapValue.fields.__local_write_time__.timestampValue),new Km(t.seconds,t.nanos)}function db(t){return null==t}function gb(t){return 0===t&&1/t==-1/0}function vb(t){return"number"==typeof t&&Number.isInteger(t)&&!gb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var yb=(mb.fromPath=function(t){return new mb($m.fromString(t))},mb.fromName=function(t){return new mb($m.fromString(t).popFirst(5))},mb.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},mb.prototype.isEqual=function(t){return null!==t&&0===$m.comparator(this.path,t.path)},mb.prototype.toString=function(){return this.path.toString()},mb.comparator=function(t,e){return $m.comparator(t.path,e.path)},mb.isDocumentKey=function(t){return t.length%2==0},mb.fromSegments=function(t){return new mb(new $m(t.slice()))},mb);function mb(t){this.path=t}function bb(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fb(t)?4:10:Mm()}function _b(r,i){var t,e,n=bb(r);if(n!==bb(i))return!1;switch(n){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return pb(r).isEqual(pb(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=cb(r.timestampValue),t=cb(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return e=i,lb(r.bytesValue).isEqual(lb(e.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return t=i,hb((e=r).geoPointValue.latitude)===hb(t.geoPointValue.latitude)&&hb(e.geoPointValue.longitude)===hb(t.geoPointValue.longitude);case 2:return e=i,"integerValue"in(t=r)&&"integerValue"in e?hb(t.integerValue)===hb(e.integerValue):"doubleValue"in t&&"doubleValue"in e&&((t=hb(t.doubleValue))===(e=hb(e.doubleValue))?gb(t)===gb(e):isNaN(t)&&isNaN(e));case 9:return Vm(r.arrayValue.values||[],i.arrayValue.values||[],_b);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(zm(e)!==zm(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!_b(e[t],n[t])))return!1;return!0}();default:return Mm()}}function wb(t,e){return void 0!==(t.values||[]).find(function(t){return _b(t,e)})}function Ib(t,e){var n,r,i,o=bb(t),a=bb(e);if(o!==a)return qm(o,a);switch(o){case 0:return 0;case 1:return qm(t.booleanValue,e.booleanValue);case 2:return n=e,(r=hb(t.integerValue||t.doubleValue))<(n=hb(n.integerValue||n.doubleValue))?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return Tb(t.timestampValue,e.timestampValue);case 4:return Tb(pb(t),pb(e));case 5:return qm(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,i=e.bytesValue,o=lb(o),i=lb(i),o.compareTo(i);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=qm(n[i],r[i]);if(0!==o)return o}return qm(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=qm(hb(i.latitude),hb(r.latitude)))?n:qm(hb(i.longitude),hb(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ib(n[i],r[i]);if(o)return o}return qm(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=qm(r[a],o[a]);if(0!==s)return s;if(0!==(s=Ib(n[r[a]],i[o[a]])))return s}return qm(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Mm()}}function Tb(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return qm(t,e);var n=cb(t),t=cb(e);return 0!==(e=qm(n.seconds,t.seconds))?e:qm(n.nanos,t.nanos)}function Eb(t){return function a(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=cb(t=i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?lb(i.bytesValue).toBase64():"referenceValue"in i?(e=i.referenceValue,yb.fromName(e).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=a(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+a(t.fields[o])}return e+"}"}(i.mapValue):Mm();var t,e}(t)}function Sb(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Cb(t){return t&&"integerValue"in t}function Nb(t){return!!t&&"arrayValue"in t}function kb(t){return t&&"nullValue"in t}function Ab(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rb(t){return t&&"mapValue"in t}var Ob=(Pb.empty=function(){return new Pb({mapValue:{}})},Pb.prototype.field=function(t){return Pb.extractNestedValue(this.buildProto(),t)},Pb.prototype.toProto=function(){return this.field(tb.emptyPath())},Pb.prototype.set=function(t,e){this.setOverlay(t,e)},Pb.prototype.setAll=function(t){var n=this;t.forEach(function(t,e){t?n.set(e,t):n.delete(e)})},Pb.prototype.delete=function(t){this.setOverlay(t,null)},Pb.prototype.isEqual=function(t){return _b(this.buildProto(),t.buildProto())},Pb.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===bb(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.lastSegment(),e)},Pb.prototype.applyOverlay=function(r,t){var i=this,o=!1,e=Pb.extractNestedValue(this.partialValue,r),a=Rb(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.applyOverlay(r.child(e),t))&&(a[e]=n,o=!0):null!==t?(a[e]=t,o=!0):a.hasOwnProperty(e)&&(delete a[e],o=!0)}),o?{mapValue:{fields:a}}:null},Pb.prototype.buildProto=function(){var t=this.applyOverlay(tb.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},Pb.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Rb(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},Pb.prototype.clone=function(){return new Pb(this.buildProto())},Pb);function Pb(t){this.overlayMap=new Map,this.partialValue=t}var Db=(Lb.newInvalidDocument=function(t){return new Lb(t,0,Wm.min(),Ob.empty(),0)},Lb.newFoundDocument=function(t,e,n){return new Lb(t,1,e,n,0)},Lb.newNoDocument=function(t,e){return new Lb(t,2,e,Ob.empty(),0)},Lb.newUnknownDocument=function(t,e){return new Lb(t,3,e,Ob.empty(),2)},Lb.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},Lb.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ob.empty(),this.documentState=0,this},Lb.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ob.empty(),this.documentState=2,this},Lb.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},Lb.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(Lb.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(Lb.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(Lb.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Lb.prototype.isValidDocument=function(){return 0!==this.documentType},Lb.prototype.isFoundDocument=function(){return 1===this.documentType},Lb.prototype.isNoDocument=function(){return 2===this.documentType},Lb.prototype.isUnknownDocument=function(){return 3===this.documentType},Lb.prototype.isEqual=function(t){return t instanceof Lb&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},Lb.prototype.clone=function(){return new Lb(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},Lb.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},Lb),xb=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Lb(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}function Mb(t,e,n,r,i,o,a){return new xb(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,a=void 0===a?null:a)}function Fb(t){var e=t;return null===e.h&&(t=e.path.canonicalString(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return t.field.canonicalString()+t.op.toString()+Eb(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return t.field.canonicalString()+t.dir}).join(","),db(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=f_(e.startAt)),e.endAt&&(t+="|ub:",t+=f_(e.endAt)),e.h=t),e.h}function Ub(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,a,s=0;s<t.filters.length;s++)if(o=t.filters[s],a=e.filters[s],o.op!==a.op||!o.field.isEqual(a.field)||!_b(o.value,a.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g_(t.startAt,e.startAt)&&g_(t.endAt,e.endAt)}function jb(t){return yb.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var qb,Vb=(po(Bb,qb=function(){}),Bb.create=function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new Gb(t,e,n):"array-contains"===e?new r_(t,n):"in"===e?new i_(t,n):"not-in"===e?new o_(t,n):"array-contains-any"===e?new a_(t,n):new Bb(t,e,n)},Bb.l=function(t,e,n){return new("in"===e?zb:Qb)(t,n)},Bb.prototype.matches=function(t){return t=t.data.field(this.field),"!="===this.op?null!==t&&this.m(Ib(t,this.value)):null!==t&&bb(this.value)===bb(t)&&this.m(Ib(t,this.value))},Bb.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Mm()}},Bb.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Bb);function Bb(t,e,n){var r=this;return(r=qb.call(this)||this).field=t,r.op=e,r.value=n,r}var Kb,Wb,Hb,Gb=(po(Jb,Hb=Vb),Jb.prototype.matches=function(t){return t=yb.comparator(t.key,this.key),this.m(t)},Jb),zb=(po(Xb,Wb=Vb),Xb.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Xb),Qb=(po(Yb,Kb=Vb),Yb.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Yb);function Yb(t,e){var n=this;return(n=Kb.call(this,t,"not-in",e)||this).keys=$b(0,e),n}function Xb(t,e){var n=this;return(n=Wb.call(this,t,"in",e)||this).keys=$b(0,e),n}function Jb(t,e,n){var r=this;return(r=Hb.call(this,t,e,n)||this).key=yb.fromName(n.referenceValue),r}function $b(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return yb.fromName(t.referenceValue)})}var Zb,t_,e_,n_,r_=(po(l_,n_=Vb),l_.prototype.matches=function(t){return Nb(t=t.data.field(this.field))&&wb(t.arrayValue,this.value)},l_),i_=(po(h_,e_=Vb),h_.prototype.matches=function(t){return null!==(t=t.data.field(this.field))&&wb(this.value.arrayValue,t)},h_),o_=(po(c_,t_=Vb),c_.prototype.matches=function(t){return!wb(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&(null!==(t=t.data.field(this.field))&&!wb(this.value.arrayValue,t))},c_),a_=(po(u_,Zb=Vb),u_.prototype.matches=function(t){var e=this;return!(!Nb(t=t.data.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return wb(e.value.arrayValue,t)})},u_),s_=function(t,e){this.position=t,this.before=e};function u_(t,e){return Zb.call(this,t,"array-contains-any",e)||this}function c_(t,e){return t_.call(this,t,"not-in",e)||this}function h_(t,e){return e_.call(this,t,"in",e)||this}function l_(t,e){return n_.call(this,t,"array-contains",e)||this}function f_(t){return(t.before?"b":"a")+":"+t.position.map(Eb).join(",")}var p_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function d_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i],r=o.field.isKeyField()?yb.comparator(yb.fromName(a.referenceValue),n.key):Ib(a,n.data.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function g_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!_b(t.position[n],e.position[n]))return!1;return!0}var v_=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function y_(t,e,n,r,i,o,a,s){return new v_(t,e,n,r,i,o,a,s)}function m_(t){return new v_(t)}function b_(t){return!db(t.limit)&&"F"===t.limitType}function __(t){return!db(t.limit)&&"L"===t.limitType}function w_(t){return 0<t.explicitOrderBy.length?t.explicitOrderBy[0].field:null}function I_(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function T_(t){return null!==t.collectionGroup}function E_(t){var e=t;if(null===e.p){e.p=[];var n=I_(e),t=w_(e);if(null!==n&&null===t)n.isKeyField()||e.p.push(new p_(n)),e.p.push(new p_(tb.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var a=o[i];e.p.push(a),a.field.isKeyField()&&(r=!0)}r||(n=0<e.explicitOrderBy.length?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",e.p.push(new p_(tb.keyField(),n)))}}return e.p}function S_(t){var e=t;if(!e.T)if("F"===e.limitType)e.T=Mb(e.path,e.collectionGroup,E_(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=E_(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new p_(o.field,a))}var s=e.endAt?new s_(e.endAt.position,!e.endAt.before):null,t=e.startAt?new s_(e.startAt.position,!e.startAt.before):null;e.T=Mb(e.path,e.collectionGroup,n,e.filters,e.limit,s,t)}return e.T}function C_(t,e,n){return new v_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function N_(t,e){return Ub(S_(t),S_(e))&&t.limitType===e.limitType}function k_(t){return Fb(S_(t))+"|lt:"+t.limitType}function A_(t){return"Query(target="+(n=(e=S_(t)).path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return t.field.canonicalString()+" "+t.op+" "+Eb(t.value)}).join(", ")+"]"),db(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return t.field.canonicalString()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+f_(e.startAt)),e.endAt&&(n+=", endAt: "+f_(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function R_(i,t){return t.isFoundDocument()&&(e=i,n=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):yb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n))&&function(t){for(var e=0,n=i.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.data.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||d_(t.startAt,E_(t),n))&&(!t.endAt||!d_(t.endAt,E_(t),n)));var e,n}function O_(s){return function(t,e){for(var n=!1,r=0,i=E_(s);r<i.length;r++){var o=i[r],a=function(t,e,n){var r,r=t.field.isKeyField()?yb.comparator(e.key,n.key):(r=t.field,n=n,e=e.data.field(r),r=n.data.field(r),null!==e&&null!==r?Ib(e,r):Mm());switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Mm()}}(o,t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return 0}}function P_(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gb(e)?"-0":e}}function D_(t){return{integerValue:""+t}}function x_(t,e){return vb(e)?D_(e):P_(t,e)}function L_(t,e){return t instanceof Q_?Cb(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var M_,F_,U_=(po(V_,F_=lt=function(){this._=void 0}),V_),j_=(po(q_,M_=lt),q_);function q_(t){var e=this;return(e=M_.call(this)||this).elements=t,e}function V_(){return null!==F_&&F_.apply(this,arguments)||this}function B_(t,e){for(var n=J_(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return _b(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var K_,W_=(po(H_,K_=lt),H_);function H_(t){var e=this;return(e=K_.call(this)||this).elements=t,e}function G_(t,e){for(var n=J_(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!_b(t,e)})}(i[r]);return{arrayValue:{values:n}}}var z_,Q_=(po(Y_,z_=lt),Y_);function Y_(t,e){var n=this;return(n=z_.call(this)||this).R=t,n.A=e,n}function X_(t){return hb(t.integerValue||t.doubleValue)}function J_(t){return Nb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $_(t,e){this.version=t,this.transformResults=e}var Z_=function(t,e){this.field=t,this.transform=e},tw=(ew.none=function(){return new ew},ew.exists=function(t){return new ew(void 0,t)},ew.updateTime=function(t){return new ew(t)},Object.defineProperty(ew.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),ew.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},ew);function ew(t,e){this.updateTime=t,this.exists=e}function nw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}function rw(t,e,n){var r,i,o,a;t instanceof uw?(i=e,o=n,nw((r=t).precondition,i)&&(a=r.value.clone(),o=dw(r.fieldTransforms,o,i),a.setAll(o),i.convertToFoundDocument(ow(i),a).setHasLocalMutations())):t instanceof cw?(o=e,i=n,nw((a=t).precondition,o)&&(n=dw(a.fieldTransforms,i,o),(i=o.data).setAll(fw(a)),i.setAll(n),o.convertToFoundDocument(ow(o),i).setHasLocalMutations())):nw(t.precondition,e)&&e.convertToNoDocument(Wm.min())}function iw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Vm(n,r,function(t,e){return t.field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof j_&&e instanceof j_||t instanceof W_&&e instanceof W_?Vm(t.elements,e.elements,_b):t instanceof Q_&&e instanceof Q_?_b(t.A,e.A):t instanceof U_&&e instanceof U_)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function ow(t){return t.isFoundDocument()?t.version:Wm.min()}var aw,sw,uw=(po(lw,sw=Gn=function(){}),lw),cw=(po(hw,aw=Gn),hw);function hw(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=aw.call(this)||this).key=t,o.data=e,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function lw(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=sw.call(this)||this).key=t,i.value=e,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function fw(n){var r=new Map;return n.fieldMask.fields.forEach(function(t){var e;t.isEmpty()||(e=n.data.field(t),r.set(t,e))}),r}function pw(t,e,n){var r=new Map;Fm(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,(o=a,a=s,s=n[i],o instanceof j_?B_(o,a):o instanceof W_?G_(o,a):s))}return r}function dw(t,e,n){for(var r,i=new Map,o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=n.data.field(s.field);i.set(s.field,(r=c,s=e,c=void 0,u instanceof U_?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof j_?B_(u,r):u instanceof W_?G_(u,r):(r=X_(u=L_(c=u,r))+X_(c.A),Cb(u)&&Cb(c.A)?D_(r):P_(c.R,r))))}return i}function gw(t){this.count=t}var vw,yw,mw,bw=(po(Iw,mw=Gn),Iw),_w=(po(ww,yw=Gn),ww);function ww(t,e){var n=this;return(n=yw.call(this)||this).key=t,n.precondition=e,n.type=3,n.fieldTransforms=[],n}function Iw(t,e){var n=this;return(n=mw.call(this)||this).key=t,n.precondition=e,n.type=2,n.fieldTransforms=[],n}function Tw(t){switch(t){case Nm.OK:return Mm(),0;case Nm.CANCELLED:case Nm.UNKNOWN:case Nm.DEADLINE_EXCEEDED:case Nm.RESOURCE_EXHAUSTED:case Nm.INTERNAL:case Nm.UNAVAILABLE:case Nm.UNAUTHENTICATED:return;case Nm.INVALID_ARGUMENT:case Nm.NOT_FOUND:case Nm.ALREADY_EXISTS:case Nm.PERMISSION_DENIED:case Nm.FAILED_PRECONDITION:case Nm.ABORTED:case Nm.OUT_OF_RANGE:case Nm.UNIMPLEMENTED:case Nm.DATA_LOSS:return 1;default:return Mm(),0}}function Ew(t){if(void 0===t)return Dm("GRPC error has no .code"),Nm.UNKNOWN;switch(t){case vw.OK:return Nm.OK;case vw.CANCELLED:return Nm.CANCELLED;case vw.UNKNOWN:return Nm.UNKNOWN;case vw.DEADLINE_EXCEEDED:return Nm.DEADLINE_EXCEEDED;case vw.RESOURCE_EXHAUSTED:return Nm.RESOURCE_EXHAUSTED;case vw.INTERNAL:return Nm.INTERNAL;case vw.UNAVAILABLE:return Nm.UNAVAILABLE;case vw.UNAUTHENTICATED:return Nm.UNAUTHENTICATED;case vw.INVALID_ARGUMENT:return Nm.INVALID_ARGUMENT;case vw.NOT_FOUND:return Nm.NOT_FOUND;case vw.ALREADY_EXISTS:return Nm.ALREADY_EXISTS;case vw.PERMISSION_DENIED:return Nm.PERMISSION_DENIED;case vw.FAILED_PRECONDITION:return Nm.FAILED_PRECONDITION;case vw.ABORTED:return Nm.ABORTED;case vw.OUT_OF_RANGE:return Nm.OUT_OF_RANGE;case vw.UNIMPLEMENTED:return Nm.UNIMPLEMENTED;case vw.DATA_LOSS:return Nm.DATA_LOSS;default:return Mm()}}(lt=vw={})[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";var Sw=(Rw.prototype.insert=function(t,e){return new Rw(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Nw.BLACK,null,null))},Rw.prototype.remove=function(t){return new Rw(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nw.BLACK,null,null))},Rw.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Rw.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Rw.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(Rw.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Rw.prototype.minKey=function(){return this.root.minKey()},Rw.prototype.maxKey=function(){return this.root.maxKey()},Rw.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},Rw.prototype.forEach=function(n){this.inorderTraversal(function(t,e){return n(t,e),!1})},Rw.prototype.toString=function(){var n=[];return this.inorderTraversal(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Rw.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},Rw.prototype.getIterator=function(){return new Cw(this.root,null,this.comparator,!1)},Rw.prototype.getIteratorFrom=function(t){return new Cw(this.root,t,this.comparator,!1)},Rw.prototype.getReverseIterator=function(){return new Cw(this.root,null,this.comparator,!0)},Rw.prototype.getReverseIteratorFrom=function(t){return new Cw(this.root,t,this.comparator,!0)},Rw),Cw=(Aw.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},Aw.prototype.hasNext=function(){return 0<this.nodeStack.length},Aw.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},Aw),Nw=(kw.prototype.copy=function(t,e,n,r,i){return new kw(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},kw.prototype.isEmpty=function(){return!1},kw.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},kw.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},kw.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},kw.prototype.minKey=function(){return this.min().key},kw.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},kw.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},kw.prototype.removeMin=function(){if(this.left.isEmpty())return kw.EMPTY;var t=this;return(t=(t=t.left.isRed()||t.left.left.isRed()?t:t.moveRedLeft()).copy(null,null,null,t.left.removeMin(),null)).fixUp()},kw.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()?r:r.moveRedLeft()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed()?r:r.moveRedRight()).key)){if(r.right.isEmpty())return kw.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},kw.prototype.isRed=function(){return this.color},kw.prototype.fixUp=function(){var t=this;return(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},kw.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},kw.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},kw.prototype.rotateLeft=function(){var t=this.copy(null,null,kw.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},kw.prototype.rotateRight=function(){var t=this.copy(null,null,kw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},kw.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},kw.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},kw.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Mm();if(this.right.isRed())throw Mm();var t=this.left.check();if(t!==this.right.check())throw Mm();return t+(this.isRed()?0:1)},kw);function kw(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:kw.RED,this.left=null!=r?r:kw.EMPTY,this.right=null!=i?i:kw.EMPTY,this.size=this.left.size+1+this.right.size}function Aw(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}function Rw(t,e){this.comparator=t,this.root=e||Nw.EMPTY}function Ow(){this.size=0}Nw.EMPTY=null,Nw.RED=!0,Nw.BLACK=!1,Nw.EMPTY=(Object.defineProperty(Ow.prototype,"key",{get:function(){throw Mm()},enumerable:!1,configurable:!0}),Object.defineProperty(Ow.prototype,"value",{get:function(){throw Mm()},enumerable:!1,configurable:!0}),Object.defineProperty(Ow.prototype,"color",{get:function(){throw Mm()},enumerable:!1,configurable:!0}),Object.defineProperty(Ow.prototype,"left",{get:function(){throw Mm()},enumerable:!1,configurable:!0}),Object.defineProperty(Ow.prototype,"right",{get:function(){throw Mm()},enumerable:!1,configurable:!0}),Ow.prototype.copy=function(t,e,n,r,i){return this},Ow.prototype.insert=function(t,e,n){return new Nw(t,e)},Ow.prototype.remove=function(t,e){return this},Ow.prototype.isEmpty=function(){return!0},Ow.prototype.inorderTraversal=function(t){return!1},Ow.prototype.reverseTraversal=function(t){return!1},Ow.prototype.minKey=function(){return null},Ow.prototype.maxKey=function(){return null},Ow.prototype.isRed=function(){return!1},Ow.prototype.checkMaxDepth=function(){return!0},Ow.prototype.check=function(){return 0},new Ow);var Pw=(Mw.prototype.has=function(t){return null!==this.data.get(t)},Mw.prototype.first=function(){return this.data.minKey()},Mw.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(Mw.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Mw.prototype.indexOf=function(t){return this.data.indexOf(t)},Mw.prototype.forEach=function(n){this.data.inorderTraversal(function(t,e){return n(t),!1})},Mw.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},Mw.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},Mw.prototype.firstAfterOrEqual=function(t){return(t=this.data.getIteratorFrom(t)).hasNext()?t.getNext().key:null},Mw.prototype.getIterator=function(){return new Dw(this.data.getIterator())},Mw.prototype.getIteratorFrom=function(t){return new Dw(this.data.getIteratorFrom(t))},Mw.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},Mw.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Mw.prototype.isEmpty=function(){return this.data.isEmpty()},Mw.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Mw.prototype.isEqual=function(t){if(!(t instanceof Mw))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},Mw.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Mw.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Mw.prototype.copy=function(t){var e=new Mw(this.comparator);return e.data=t,e},Mw),Dw=(Lw.prototype.getNext=function(){return this.iter.getNext().key},Lw.prototype.hasNext=function(){return this.iter.hasNext()},Lw),xw=new Sw(yb.comparator);function Lw(t){this.iter=t}function Mw(t){this.comparator=t,this.data=new Sw(this.comparator)}var Fw=new Sw(yb.comparator),Uw=new Sw(yb.comparator),jw=new Pw(yb.comparator);function qw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=jw,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Vw=new Pw(qm),Bw=($w.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n=new Map;return n.set(t,Kw.createSynthesizedTargetChangeForCurrentChange(t,e)),new $w(Wm.min(),n,Vw,xw,qw())},$w),Kw=(Jw.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new Jw(nb.EMPTY_BYTE_STRING,e,qw(),qw(),qw())},Jw),Ww=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Hw=function(t,e){this.targetId=t,this.V=e},Gw=function(t,e,n,r){void 0===n&&(n=nb.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},zw=(Object.defineProperty(Xw.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(Xw.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(Xw.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(Xw.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),Xw.prototype.$=function(t){0<t.approximateByteSize()&&(this.F=!0,this.C=t)},Xw.prototype.M=function(){var n=qw(),r=qw(),i=qw();return this.D.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Mm()}}),new Kw(this.C,this.N,n,r,i)},Xw.prototype.L=function(){this.F=!1,this.D=tI()},Xw.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},Xw.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},Xw.prototype.U=function(){this.S+=1},Xw.prototype.K=function(){--this.S},Xw.prototype.j=function(){this.F=!0,this.N=!0},Xw),Qw=(Yw.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},Yw.prototype.et=function(n){var r=this;this.forEachTarget(n,function(t){var e=r.nt(t);switch(n.state){case 0:r.st(t)&&e.$(n.resumeToken);break;case 1:e.K(),e.k||e.L(),e.$(n.resumeToken);break;case 2:e.K(),e.k||r.removeTarget(t);break;case 3:r.st(t)&&(e.j(),e.$(n.resumeToken));break;case 4:r.st(t)&&(r.it(t),e.$(n.resumeToken));break;default:Mm()}})},Yw.prototype.forEachTarget=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.G.forEach(function(t,e){r.st(e)&&n(e)})},Yw.prototype.rt=function(t){var e=t.targetId,n=t.V.count;(t=this.ot(e))&&(jb(t=t.target)?0===n?(t=new yb(t.path),this.tt(e,t,Db.newNoDocument(t,Wm.min()))):Fm(1===n):this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e)))},Yw.prototype.ut=function(r){var i=this,o=new Map;this.G.forEach(function(t,e){var n=i.ot(e);n&&(t.current&&jb(n.target)&&(n=new yb(n.target.path),null!==i.H.get(n)||i.at(e,n)||i.tt(e,n,Db.newNoDocument(n,r))),t.O&&(o.set(e,t.M()),t.L()))});var a=qw();this.J.forEach(function(t,e){var n=!0;e.forEachWhile(function(t){return!(t=i.ot(t))||2===t.purpose||(n=!1)}),n&&(a=a.add(t))});var t=new Bw(r,o,this.Y,this.H,a);return this.H=xw,this.J=Zw(),this.Y=new Pw(qm),t},Yw.prototype.Z=function(t,e){var n;this.st(t)&&(n=this.at(t,e.key)?2:0,this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t)))},Yw.prototype.tt=function(t,e,n){var r;this.st(t)&&(r=this.nt(t),this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n)))},Yw.prototype.removeTarget=function(t){this.G.delete(t)},Yw.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},Yw.prototype.U=function(t){this.nt(t).U()},Yw.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new zw,this.G.set(t,e)),e},Yw.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Pw(qm),this.J=this.J.insert(t,e)),e},Yw.prototype.st=function(t){var e=null!==this.ot(t);return e||Pm("WatchChangeAggregator","Detected inactive target",t),e},Yw.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},Yw.prototype.it=function(e){var n=this;this.G.set(e,new zw),this.W.getRemoteKeysForTarget(e).forEach(function(t){n.tt(e,t,null)})},Yw.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},Yw);function Yw(t){this.W=t,this.G=new Map,this.H=xw,this.J=Zw(),this.Y=new Pw(qm)}function Xw(){this.S=0,this.D=tI(),this.C=nb.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}function Jw(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function $w(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function Zw(){return new Sw(yb.comparator)}function tI(){return new Sw(yb.comparator)}var eI={asc:"ASCENDING",desc:"DESCENDING"},nI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rI=function(t,e){this.databaseId=t,this.I=e};function iI(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function oI(t,e){return t.I?e.toBase64():e.toUint8Array()}function aI(t){return Fm(!!t),Wm.fromTimestamp((t=cb(t),new Km(t.seconds,t.nanos)))}function sI(t,e){return new $m(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function uI(t){return Fm(CI(t=$m.fromString(t))),t}function cI(t,e){return sI(t.databaseId,e.path)}function hI(t,e){if((e=uI(e)).get(1)!==t.databaseId.projectId)throw new km(Nm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new km(Nm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new yb(dI(e))}function lI(t,e){return sI(t.databaseId,e)}function fI(t){return 4===(t=uI(t)).length?$m.emptyPath():dI(t)}function pI(t){return new $m(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dI(t){return Fm(4<t.length&&"documents"===t.get(4)),t.popFirst(5)}function gI(t,e,n){return{name:cI(t,e),fields:n.toProto().mapValue.fields}}function vI(t,e,n){var r=hI(t,e.name),t=aI(e.updateTime),e=new Ob({mapValue:{fields:e.fields}}),e=Db.newFoundDocument(r,t,e);return n&&e.setHasCommittedMutations(),n?e.setHasCommittedMutations():e}function yI(t,e){var n,r,i;if(e instanceof uw)n={update:gI(t,e.key,e.value)};else if(e instanceof bw)n={delete:cI(t,e.key)};else if(e instanceof cw)n={update:gI(t,e.key,e.data),updateMask:(i=e.fieldMask,r=[],i.fields.forEach(function(t){return r.push(t.canonicalString())}),{fieldPaths:r})};else{if(!(e instanceof _w))return Mm();n={verify:cI(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof U_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof j_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof W_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof Q_)return{fieldPath:t.field.canonicalString(),increment:e.A};throw Mm()})),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:iI(e=t,(t=i.updateTime).toTimestamp())}:void 0!==i.exists?{exists:i.exists}:Mm()),n}function mI(i,t){var e=t.currentDocument?void 0!==(a=t.currentDocument).updateTime?tw.updateTime(aI(a.updateTime)):void 0!==a.exists?tw.exists(a.exists):tw.none():tw.none(),n=t.updateTransforms?t.updateTransforms.map(function(t){return e=i,r=null,"setToServerValue"in(t=t)?(Fm("REQUEST_TIME"===t.setToServerValue),r=new U_):"appendMissingElements"in t?(n=t.appendMissingElements.values||[],r=new j_(n)):"removeAllFromArray"in t?(n=t.removeAllFromArray.values||[],r=new W_(n)):"increment"in t?r=new Q_(e,t.increment):Mm(),t=tb.fromServerFormat(t.fieldPath),new Z_(t,r);var e,n,r}):[];if(t.update){t.update.name;var r=hI(i,t.update.name),o=new Ob({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=(a=t.updateMask.fieldPaths||[],new eb(a.map(function(t){return tb.fromServerFormat(t)})));return new cw(r,o,a,e,n)}return new uw(r,o,e,n)}return t.delete?(n=hI(i,t.delete),new bw(n,e)):t.verify?(t=hI(i,t.verify),new _w(t,e)):Mm()}function bI(t,e){return{documents:[lI(t,e.path)]}}function _I(t,e){var n={structuredQuery:{}},r=e.path;return null!==e.collectionGroup?(n.parent=lI(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=lI(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),(r=function(t){if(0!==t.length)return 1===(t=t.map(function(t){if("=="===t.op){if(Ab(t.value))return{unaryFilter:{field:EI(t.field),op:"IS_NAN"}};if(kb(t.value))return{unaryFilter:{field:EI(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ab(t.value))return{unaryFilter:{field:EI(t.field),op:"IS_NOT_NAN"}};if(kb(t.value))return{unaryFilter:{field:EI(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:EI(t.field),op:(e=t.op,nI[e]),value:t.value}};var e})).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(e.filters))&&(n.structuredQuery.where=r),(r=function(t){if(0!==t.length)return t.map(function(t){return{field:EI(t.field),direction:(t=t.dir,eI[t])}})}(e.orderBy))&&(n.structuredQuery.orderBy=r),r=e.limit,null!==(r=t.I||db(r)?r:{value:r})&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=II(e.startAt)),e.endAt&&(n.structuredQuery.endAt=II(e.endAt)),n}function wI(t){var e=fI(t.parent),n=t.structuredQuery,r=null;0<(a=n.from?n.from.length:0)&&(Fm(1===a),(s=n.from[0]).allDescendants?r=s.collectionId:e=e.child(s.collectionId));var i=[];n.where&&(i=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=SI(t.unaryFilter.field);return Vb.create(e,"==",{doubleValue:NaN});case"IS_NULL":return e=SI(t.unaryFilter.field),Vb.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=SI(t.unaryFilter.field);return Vb.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return n=SI(t.unaryFilter.field),Vb.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Mm()}}(e)]:void 0!==e.fieldFilter?[(n=e,Vb.create(SI(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Mm()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce(function(t,e){return t.concat(e)}):Mm():[];var n}(n.where));var o=[],t=null,a=null,s=null;return y_(e,r,o=n.orderBy?n.orderBy.map(function(t){return new p_(SI((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}):o,i,t=n.limit?db(i="object"==typeof(i=n.limit)?i.value:i)?null:i:t,"F",a=n.startAt?TI(n.startAt):a,s=n.endAt?TI(n.endAt):s)}function II(t){return{before:t.before,values:t.position}}function TI(t){var e=!!t.before,t=t.values||[];return new s_(t,e)}function EI(t){return{fieldPath:t.canonicalString()}}function SI(t){return tb.fromServerFormat(t.fieldPath)}function CI(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function NI(t){for(var o="",e=0;e<t.length;e++)0<o.length&&(o=kI(o)),o=function(t){for(var e=o,n=t.length,r=0;r<n;r++){var i=t.charAt(r);switch(i){case"\0":e+="";break;case"":e+="";break;default:e+=i}}return e}(t.get(e));return kI(o)}function kI(t){return t+""}function AI(t){var e=t.length;if(Fm(2<=e),2===e)return Fm(""===t.charAt(0)&&""===t.charAt(1)),$m.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||n<a)&&Mm(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Mm()}o=a+2}return new $m(r)}function RI(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var OI=function(t,e){this.seconds=t,this.nanoseconds=e};function PI(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}function DI(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}RI.store="owner",RI.key="owner",PI.store="mutationQueues",PI.keyPath="userId",DI.store="mutations",DI.keyPath="batchId",DI.userMutationsIndex="userMutationsIndex",DI.userMutationsKeyPath=["userId","batchId"];var xI=(LI.prefixForUser=function(t){return[t]},LI.prefixForPath=function(t,e){return[t,NI(e)]},LI.key=function(t,e,n){return[t,NI(e),n]},LI);function LI(){}function MI(t,e){this.path=t,this.readTime=e}function FI(t,e){this.path=t,this.version=e}xI.store="documentMutations",xI.PLACEHOLDER=new xI;var UI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};function jI(t){this.byteSize=t}function qI(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}UI.store="remoteDocuments",UI.readTimeIndex="readTimeIndex",UI.readTimeIndexPath="readTime",UI.collectionReadTimeIndex="collectionReadTimeIndex",UI.collectionReadTimeIndexPath=["parentPath","readTime"],jI.store="remoteDocumentGlobal",jI.key="remoteDocumentGlobalKey",qI.store="targets",qI.keyPath="targetId",qI.queryTargetsIndexName="queryTargetsIndex",qI.queryTargetsKeyPath=["canonicalId","targetId"];var VI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};function BI(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function KI(t,e){this.collectionId=t,this.parent=e}function WI(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}function HI(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}function GI(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}VI.store="targetDocuments",VI.keyPath=["targetId","path"],VI.documentTargetsIndex="documentTargetsIndex",VI.documentTargetsKeyPath=["path","targetId"],BI.key="targetGlobalKey",BI.store="targetGlobal",KI.store="collectionParents",KI.keyPath=["collectionId","parent"],WI.store="clientMetadata",WI.keyPath="clientId",HI.store="bundles",HI.keyPath="bundleId",GI.store="namedQueries",GI.keyPath="name";var zI,QI=_o(_o([],_o(_o([],_o(_o([],_o(_o([],[PI.store,DI.store,xI.store,UI.store,qI.store,RI.store,BI.store,VI.store]),[WI.store])),[jI.store])),[KI.store])),[HI.store,GI.store]),YI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gn=(sT.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},sT.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},sT),XI=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},JI=(aT.prototype.catch=function(t){return this.next(void 0,t)},aT.prototype.next=function(r,i){var o=this;return this.callbackAttached&&Mm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new aT(function(e,n){o.nextCallback=function(t){o.wrapSuccess(r,t).next(e,n)},o.catchCallback=function(t){o.wrapFailure(i,t).next(e,n)}})},aT.prototype.toPromise=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},aT.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof aT?e:aT.resolve(e)}catch(t){return aT.reject(t)}},aT.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):aT.resolve(e)},aT.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):aT.reject(e)},aT.resolve=function(n){return new aT(function(t,e){t(n)})},aT.reject=function(n){return new aT(function(t,e){e(n)})},aT.waitFor=function(t){return new aT(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},aT.or=function(t){for(var n=aT.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?aT.resolve(t):e()})}(r[e]);return n},aT.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.waitFor(i)},aT),$I=(oT.open=function(t,e,n,r){try{return new oT(e,t.transaction(r,n))}catch(t){throw new eT(e,t)}},Object.defineProperty(oT.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),oT.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Pm("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},oT.prototype.store=function(t){return t=this.transaction.objectStore(t),new cT(t)},oT),ZI=(iT.delete=function(t){return Pm("SimpleDb","Removing database:",t),lT(window.indexedDB.deleteDatabase(t)).toPromise()},iT.yt=function(){if("undefined"==typeof indexedDB)return!1;if(iT.gt())return!0;var t=Oo(),e=0<(n=iT._t(t))&&n<10,n=0<(n=iT.Et(t))&&n<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||e||n)},iT.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},iT.It=function(t,e){return t.store(e)},iT._t=function(t){return t=(t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?t[1].split("_").slice(0,2).join("."):"-1",Number(t)},iT.Et=function(t){return t=(t=t.match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1",Number(t)},iT.prototype.At=function(o){return vo(this,void 0,void 0,function(){var e,i=this;return yo(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Pm("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result,e(t)},r.onblocked=function(){n(new eT(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){"VersionError"===(t=t.target.error).name?n(new km(Nm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new eT(o,t))},r.onupgradeneeded=function(t){Pm("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.wt.Rt(e,r.transaction,t.oldVersion,i.version).next(function(){Pm("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return i.bt(t)}),this.db)]}})})},iT.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},iT.prototype.runTransaction=function(s,n,u,c){return vo(this,void 0,void 0,function(){var i,o,a,e;return yo(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,a.At(s)];case 2:return a.db=t.sent(),e=$I.open(a.db,s,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),JI.reject(t)}).toPromise(),r={},n.catch(function(){}),[4,e.dt];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Pm("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),a.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},a=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},iT.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},iT),tT=(Object.defineProperty(rT.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(rT.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(rT.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),rT.prototype.done=function(){this.Vt=!0},rT.prototype.Ct=function(t){this.St=t},rT.prototype.delete=function(){return lT(this.Pt.delete())},rT),eT=(po(nT,zI=km),nT);function nT(t,e){var n=this;return(n=zI.call(this,Nm.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function rT(t){this.Pt=t,this.Vt=!1,this.St=null}function iT(t,e,n){this.name=t,this.version=e,this.wt=n,12.2===iT._t(Oo())&&Dm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function oT(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new XI,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new eT(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){t=pT(t.target.error),n.ft.reject(new eT(e,t))}}function aT(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}function sT(){this.onCommittedListeners=[]}function uT(t){return"IndexedDbTransactionError"===t.name}var cT=(hT.prototype.put=function(t,e){return lT(t=void 0!==e?(Pm("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Pm("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},hT.prototype.add=function(t){return Pm("SimpleDb","ADD",this.store.name,t,t),lT(this.store.add(t))},hT.prototype.get=function(e){var n=this;return lT(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Pm("SimpleDb","GET",n.store.name,e,t),t})},hT.prototype.delete=function(t){return Pm("SimpleDb","DELETE",this.store.name,t),lT(this.store.delete(t))},hT.prototype.count=function(){return Pm("SimpleDb","COUNT",this.store.name),lT(this.store.count())},hT.prototype.Nt=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.xt(e,function(t,e){n.push(e)}).next(function(){return n})},hT.prototype.Ft=function(t,e){return Pm("SimpleDb","DELETE ALL",this.store.name),(e=this.options(t,e)).kt=!1,e=this.cursor(e),this.xt(e,function(t,e,n){return n.delete()})},hT.prototype.Ot=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.xt(n,e)},hT.prototype.$t=function(r){var t=this.cursor({});return new JI(function(n,e){t.onerror=function(t){t=pT(t.target.error),e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},hT.prototype.xt=function(t,i){var o=[];return new JI(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new tT(n),(t=i(n.primaryKey,n.value,e))instanceof JI&&(t=t.catch(function(t){return e.done(),JI.reject(t)}),o.push(t)),e.isDone?r():null===e.Dt?n.continue():n.continue(e.Dt)):r()}}).next(function(){return JI.waitFor(o)})},hT.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},hT.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},hT);function hT(t){this.store=t}function lT(t){return new JI(function(e,n){t.onsuccess=function(t){t=t.target.result,e(t)},t.onerror=function(t){t=pT(t.target.error),n(t)}})}var fT=!1;function pT(t){var e=ZI._t(Oo());if(12.2<=e&&e<13&&(e="An internal error was encountered in the Indexed Database server",0<=t.message.indexOf(e))){var n=new km("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return fT||(fT=!0,setTimeout(function(){throw n},0)),n}return t}var dT,gT=(po(vT,dT=Gn),vT);function vT(t,e){var n=this;return(n=dT.call(this)||this).Mt=t,n.currentSequenceNumber=e,n}function yT(t,e){return ZI.It(t.Mt,e)}var mT=(ET.prototype.applyToRemoteDocument=function(t,e){for(var n,r,i,o,a,s,u=e.mutationResults,c=0;c<this.mutations.length;c++){var h=this.mutations[c];h.key.isEqual(t.key)&&(n=h,r=t,i=u[c],h=s=a=o=void 0,n instanceof uw?(a=r,s=i,h=(o=n).value.clone(),o=pw(o.fieldTransforms,a,s.transformResults),h.setAll(o),a.convertToFoundDocument(s.version,h).setHasCommittedMutations()):n instanceof cw?(o=r,a=i,nw((s=n).precondition,o)?(h=pw(s.fieldTransforms,o,a.transformResults),(n=o.data).setAll(fw(s)),n.setAll(h),o.convertToFoundDocument(a.version,n).setHasCommittedMutations()):o.convertToUnknownDocument(a.version)):r.convertToNoDocument(i.version).setHasCommittedMutations())}},ET.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(r=n[e]).key.isEqual(t.key)&&rw(r,t,this.localWriteTime);for(var r,i=0,o=this.mutations;i<o.length;i++)(r=o[i]).key.isEqual(t.key)&&rw(r,t,this.localWriteTime)},ET.prototype.applyToLocalDocumentSet=function(n){var r=this;this.mutations.forEach(function(t){var e=n.get(t.key),t=e;r.applyToLocalView(t),e.isValidDocument()||t.convertToNoDocument(Wm.min())})},ET.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},qw())},ET.prototype.isEqual=function(t){return this.batchId===t.batchId&&Vm(this.mutations,t.mutations,iw)&&Vm(this.baseMutations,t.baseMutations,iw)},ET),bT=(TT.from=function(t,e,n){Fm(t.mutations.length===n.length);for(var r=Uw,i=t.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new TT(t,e,n,r)},TT),_T=(IT.prototype.withSequenceNumber=function(t){return new IT(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},IT.prototype.withResumeToken=function(t,e){return new IT(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},IT.prototype.withLastLimboFreeSnapshotVersion=function(t){return new IT(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},IT),wT=function(t){this.Lt=t};function IT(t,e,n,r,i,o,a){void 0===i&&(i=Wm.min()),void 0===o&&(o=Wm.min()),void 0===a&&(a=nb.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}function TT(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}function ET(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}function ST(t,e){if(e.document)return vI(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=yb.fromSegments(e.noDocument.path),r=RT(e.noDocument.readTime),n=Db.newNoDocument(n,r);return e.hasCommittedMutations?n.setHasCommittedMutations():n}return e.unknownDocument?(n=yb.fromSegments(e.unknownDocument.path),r=RT(e.unknownDocument.version),Db.newUnknownDocument(n,r)):Mm()}function CT(t,e,n){var r=NT(n),n=e.key.path.popLast().toArray();if(e.isFoundDocument()){var i={name:cI(o=t.Lt,(a=e).key),fields:a.data.toProto().mapValue.fields,updateTime:iI(o,a.version.toTimestamp())},o=e.hasCommittedMutations;return new UI(null,null,i,o,r,n)}if(e.isNoDocument()){var a=e.key.path.toArray(),i=AT(e.version),o=e.hasCommittedMutations;return new UI(null,new MI(a,i),null,o,r,n)}return e.isUnknownDocument()?(o=e.key.path.toArray(),e=AT(e.version),new UI(new FI(o,e),null,null,!0,r,n)):Mm()}function NT(t){return[(t=t.toTimestamp()).seconds,t.nanoseconds]}function kT(t){return t=new Km(t[0],t[1]),Wm.fromTimestamp(t)}function AT(t){return t=t.toTimestamp(),new OI(t.seconds,t.nanoseconds)}function RT(t){return t=new Km(t.seconds,t.nanoseconds),Wm.fromTimestamp(t)}function OT(e,t){for(var n=(t.baseMutations||[]).map(function(t){return mI(e.Lt,t)}),r=0;r<t.mutations.length-1;++r){var i,o=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i=t.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var a=t.mutations.map(function(t){return mI(e.Lt,t)}),s=Km.fromMillis(t.localWriteTimeMs);return new mT(t.batchId,s,n,a)}function PT(t){var e=RT(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?RT(t.lastLimboFreeSnapshotVersion):Wm.min(),r=void 0!==t.query.documents?(Fm(1===(r=t.query).documents.length),S_(m_(fI(r.documents[0])))):S_(wI(t.query));return new _T(r,t.targetId,0,t.lastListenSequenceNumber,e,n,nb.fromBase64String(t.resumeToken))}function DT(t,e){var n=AT(e.snapshotVersion),r=AT(e.lastLimboFreeSnapshotVersion),i=(jb(e.target)?bI:_I)(t.Lt,e.target),t=e.resumeToken.toBase64();return new qI(e.targetId,Fb(e.target),n,t,e.sequenceNumber,r,i)}function xT(t){var e=wI({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?C_(e,e.limit,"L"):e}var LT=(MT.prototype.getBundleMetadata=function(t,e){return FT(t).get(e).next(function(t){if(t)return{id:t.bundleId,createTime:RT(t.createTime),version:t.version}})},MT.prototype.saveBundleMetadata=function(t,e){return FT(t).put({bundleId:e.id,createTime:AT(aI(e.createTime)),version:e.version})},MT.prototype.getNamedQuery=function(t,e){return UT(t).get(e).next(function(t){if(t)return{name:t.name,query:xT(t.bundledQuery),readTime:RT(t.readTime)}})},MT.prototype.saveNamedQuery=function(t,e){return UT(t).put({name:e.name,readTime:AT(aI(e.readTime)),bundledQuery:e.bundledQuery})},MT);function MT(){}function FT(t){return yT(t,HI.store)}function UT(t){return yT(t,GI.store)}var jT=(WT.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),JI.resolve()},WT.prototype.getCollectionParents=function(t,e){return JI.resolve(this.Bt.getEntries(e))},WT),qT=(KT.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Pw($m.comparator),t=!r.has(n);return this.index[e]=r.add(n),t},KT.prototype.has=function(t){var e=t.lastSegment(),t=t.popLast();return(e=this.index[e])&&e.has(t)},KT.prototype.getEntries=function(t){return(this.index[t]||new Pw($m.comparator)).toArray()},KT),VT=(BT.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(this.qt.has(e))return JI.resolve();var r=e.lastSegment(),i=e.popLast();return t.addOnCommittedListener(function(){n.qt.add(e)}),i={collectionId:r,parent:NI(i)},HT(t).put(i)},BT.prototype.getCollectionParents=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Bm(i),""],!1,!0);return HT(t).Nt(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(AI(r.parent))}return o})},BT);function BT(){this.qt=new qT}function KT(){this.index={}}function WT(){this.Bt=new qT}function HT(t){return yT(t,KI.store)}var GT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zT=(QT.withCacheSize=function(t){return new QT(t,QT.DEFAULT_COLLECTION_PERCENTILE,QT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},QT);function QT(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}function YT(t,e,n){var r=t.store(DI.store),i=t.store(xI.store),o=[],t=IDBKeyRange.only(n.batchId),a=0,t=r.Ot({range:t},function(t,e,n){return a++,n.delete()});o.push(t.next(function(){Fm(1===a)}));for(var s=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=xI.key(e,h.key.path,n.batchId);o.push(i.delete(l)),s.push(h.key)}return JI.waitFor(o).next(function(){return s})}function XT(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mm();e=t.noDocument}return JSON.stringify(e).length}zT.DEFAULT_COLLECTION_PERCENTILE=10,zT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zT.DEFAULT=new zT(41943040,zT.DEFAULT_COLLECTION_PERCENTILE,zT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zT.DISABLED=new zT(-1,0,0);var JT=($T.Kt=function(t,e,n,r){return Fm(""!==t.uid),new $T(t.isAuthenticated()?t.uid:"",e,n,r)},$T.prototype.checkEmpty=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tE(t).Ot({index:DI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},$T.prototype.addMutationBatch=function(d,g,v,y){var m=this,b=eE(d),_=tE(d);return _.add({}).next(function(t){Fm("number"==typeof t);for(var e,n,r,i,o,a=new mT(t,g,v,y),s=(e=m.R,n=m.userId,i=(r=a).baseMutations.map(function(t){return yI(e.Lt,t)}),o=r.mutations.map(function(t){return yI(e.Lt,t)}),new DI(n,r.batchId,r.localWriteTime.toMillis(),i,o)),u=[],c=new Pw(function(t,e){return qm(t.canonicalString(),e.canonicalString())}),h=0,l=y;h<l.length;h++){var f=l[h],p=xI.key(m.userId,f.key.path,t),c=c.add(f.key.path.popLast());u.push(_.put(s)),u.push(b.put(p,xI.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Ut.addToCollectionParentIndex(d,t))}),d.addOnCommittedListener(function(){m.Qt[t]=a.keys()}),JI.waitFor(u).next(function(){return a})})},$T.prototype.lookupMutationBatch=function(t,e){var n=this;return tE(t).get(e).next(function(t){return t?(Fm(t.userId===n.userId),OT(n.R,t)):null})},$T.prototype.jt=function(t,e){var n=this;return this.Qt[e]?JI.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){return t?(t=t.keys(),n.Qt[e]=t):null})},$T.prototype.getNextMutationBatchAfterBatchId=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return tE(t).Ot({index:DI.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(Fm(e.batchId>=i),o=OT(r.R,e)),n.done()}).next(function(){return o})},$T.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return tE(t).Ot({index:DI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},$T.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tE(t).Nt(DI.userMutationsIndex,n).next(function(t){return t.map(function(t){return OT(e.R,t)})})},$T.prototype.getAllMutationBatchesAffectingDocumentKey=function(o,a){var s=this,t=xI.prefixForPath(this.userId,a.path),t=IDBKeyRange.lowerBound(t),u=[];return eE(o).Ot({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=AI(i);if(r===s.userId&&a.path.isEqual(i))return tE(o).get(t).next(function(t){if(!t)throw Mm();Fm(t.userId===s.userId),u.push(OT(s.R,t))});n.done()}).next(function(){return u})},$T.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var a=this,s=new Pw(qm),n=[];return t.forEach(function(o){var t=xI.prefixForPath(a.userId,o.path),t=IDBKeyRange.lowerBound(t),t=eE(e).Ot({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=AI(i);r===a.userId&&o.path.isEqual(i)?s=s.add(t):n.done()});n.push(t)}),JI.waitFor(n).next(function(){return a.Wt(e,s)})},$T.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var o=this,a=e.path,s=a.length+1,e=xI.prefixForPath(this.userId,a),e=IDBKeyRange.lowerBound(e),u=new Pw(qm);return eE(t).Ot({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=AI(i);r===o.userId&&a.isPrefixOf(i)?i.length===s&&(u=u.add(t)):n.done()}).next(function(){return o.Wt(t,u)})},$T.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(tE(e).get(t).next(function(t){if(null===t)throw Mm();Fm(t.userId===n.userId),r.push(OT(n.R,t))}))}),JI.waitFor(i).next(function(){return r})},$T.prototype.removeMutationBatch=function(e,n){var r=this;return YT(e.Mt,this.userId,n).next(function(t){return e.addOnCommittedListener(function(){r.Gt(n.batchId)}),JI.forEach(t,function(t){return r.referenceDelegate.markPotentiallyOrphaned(e,t)})})},$T.prototype.Gt=function(t){delete this.Qt[t]},$T.prototype.performConsistencyCheck=function(e){var i=this;return this.checkEmpty(e).next(function(t){if(!t)return JI.resolve();var t=IDBKeyRange.lowerBound(xI.prefixForUser(i.userId)),r=[];return eE(e).Ot({range:t},function(t,e,n){t[0]===i.userId?(t=AI(t[1]),r.push(t)):n.done()}).next(function(){Fm(0===r.length)})})},$T.prototype.containsKey=function(t,e){return ZT(t,this.userId,e)},$T.prototype.zt=function(t){var e=this;return nE(t).get(this.userId).next(function(t){return t||new PI(e.userId,-1,"")})},$T);function $T(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}function ZT(t,o,e){var a=(e=xI.prefixForPath(o,e.path))[1],e=IDBKeyRange.lowerBound(e),s=!1;return eE(t).Ot({range:e,kt:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===a&&(s=!0),n.done()}).next(function(){return s})}function tE(t){return yT(t,DI.store)}function eE(t){return yT(t,xI.store)}function nE(t){return yT(t,PI.store)}var rE=(aE.prototype.next=function(){return this.Ht+=2,this.Ht},aE.Jt=function(){return new aE(0)},aE.Yt=function(){return new aE(-1)},aE),iE=(oE.prototype.allocateTargetId=function(n){var r=this;return this.Xt(n).next(function(t){var e=new rE(t.highestTargetId);return t.highestTargetId=e.next(),r.Zt(n,t).next(function(){return t.highestTargetId})})},oE.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Wm.fromTimestamp(new Km(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},oE.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},oE.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.Xt(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.toTimestamp()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Zt(e,t)})},oE.prototype.addTargetData=function(e,n){var r=this;return this.te(e,n).next(function(){return r.Xt(e).next(function(t){return t.targetCount+=1,r.ee(n,t),r.Zt(e,t)})})},oE.prototype.updateTargetData=function(t,e){return this.te(t,e)},oE.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return sE(e).delete(t.targetId)}).next(function(){return n.Xt(e)}).next(function(t){return Fm(0<t.targetCount),--t.targetCount,n.Zt(e,t)})},oE.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return sE(n).Ot(function(t,e){(e=PT(e)).sequenceNumber<=r&&null===i.get(e.targetId)&&(a++,s.push(o.removeTargetData(n,e)))}).next(function(){return JI.waitFor(s)}).next(function(){return a})},oE.prototype.forEachTarget=function(t,n){return sE(t).Ot(function(t,e){e=PT(e),n(e)})},oE.prototype.Xt=function(t){return uE(t).get(BI.key).next(function(t){return Fm(null!==t),t})},oE.prototype.Zt=function(t,e){return uE(t).put(BI.key,e)},oE.prototype.te=function(t,e){return sE(t).put(DT(this.R,e))},oE.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},oE.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},oE.prototype.getTargetData=function(t,r){var e=Fb(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return sE(t).Ot({range:e,index:qI.queryTargetsIndexName},function(t,e,n){e=PT(e),Ub(r,e.target)&&(i=e,n.done())}).next(function(){return i})},oE.prototype.addMatchingKeys=function(n,t,r){var i=this,o=[],a=cE(n);return t.forEach(function(t){var e=NI(t.path);o.push(a.put(new VI(r,e))),o.push(i.referenceDelegate.addReference(n,r,t))}),JI.waitFor(o)},oE.prototype.removeMatchingKeys=function(n,t,r){var i=this,o=cE(n);return JI.forEach(t,function(t){var e=NI(t.path);return JI.waitFor([o.delete([r,e]),i.referenceDelegate.removeReference(n,r,t)])})},oE.prototype.removeMatchingKeysForTargetId=function(t,e){return t=cE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0),t.delete(e)},oE.prototype.getMatchingKeysForTargetId=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=cE(t),r=qw();return t.Ot({range:e,kt:!0},function(t,e,n){t=AI(t[1]),t=new yb(t),r=r.add(t)}).next(function(){return r})},oE.prototype.containsKey=function(t,e){var e=NI(e.path),e=IDBKeyRange.bound([e],[Bm(e)],!1,!0),i=0;return cE(t).Ot({index:VI.documentTargetsIndex,kt:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},oE.prototype.lt=function(t,e){return sE(t).get(e).next(function(t){return t?PT(t):null})},oE);function oE(t,e){this.referenceDelegate=t,this.R=e}function aE(t){this.Ht=t}function sE(t){return yT(t,qI.store)}function uE(t){return yT(t,BI.store)}function cE(t){return yT(t,VI.store)}function hE(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){if(e.code!==Nm.FAILED_PRECONDITION||e.message!==YI)throw e;return Pm("LocalStore","Unexpectedly lost primary lease"),[2]})})}function lE(t,e){var n=t[0],r=t[1],t=e[0],e=e[1];return 0===(t=qm(n,t))?qm(r,e):t}var fE=(bE.prototype.ie=function(){return++this.se},bE.prototype.re=function(t){var e=[t,this.ie()];this.buffer.size<this.ne?this.buffer=this.buffer.add(e):lE(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(bE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),bE),pE=(mE.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},mE.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(mE.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),mE.prototype.ue=function(n){var t=this,e=this.oe?3e5:6e4;Pm("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:this.ce=null,this.oe=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.collectGarbage(this.garbageCollector)];case 2:return t.sent(),[3,7];case 3:return uT(e=t.sent())?(Pm("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hE(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.ue(n)];case 8:return t.sent(),[2]}})})})},mE),dE=(yE.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},yE.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return JI.resolve(Em.o);var r=new fE(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},yE.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},yE.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},yE.prototype.collect=function(e,n){var r=this;return-1===this.params.cacheSizeCollectionThreshold?(Pm("LruGarbageCollector","Garbage collection skipped; disabled"),JI.resolve(GT)):this.getCacheSize(e).next(function(t){return t<r.params.cacheSizeCollectionThreshold?(Pm("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),GT):r.fe(e,n)})},yE.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},yE.prototype.fe=function(e,n){var r,i,o,a,s,u,c,h=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>h.params.maximumSequenceNumbersToCollect?(Pm("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+t),h.params.maximumSequenceNumbersToCollect):t,a=Date.now(),h.nthSequenceNumber(e,i)}).next(function(t){return r=t,s=Date.now(),h.removeTargets(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.removeOrphanedDocuments(e,r)}).next(function(t){return c=Date.now(),Om()<=Ta.DEBUG&&Pm("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-l)+"ms\n\tDetermined least recently used "+i+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),JI.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})},yE),gE=(vE.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},vE.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},vE.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},vE.prototype.le=function(t,n){return this.we(t,function(t,e){return n(e)})},vE.prototype.addReference=function(t,e,n){return _E(t,n)},vE.prototype.removeReference=function(t,e,n){return _E(t,n)},vE.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},vE.prototype.markPotentiallyOrphaned=_E,vE.prototype._e=function(t,e){return r=e,i=!1,nE(n=t).$t(function(t){return ZT(n,t,r).next(function(t){return t&&(i=!0),JI.resolve(!t)})}).next(function(){return i});var n,r,i},vE.prototype.removeOrphanedDocuments=function(n,r){var i=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[],s=0;return this.we(n,function(e,t){t<=r&&(t=i._e(n,e).next(function(t){if(!t)return s++,o.getEntry(n,e).next(function(){return o.removeEntry(e),cE(n).delete([0,NI(e.path)])})}),a.push(t))}).next(function(){return JI.waitFor(a)}).next(function(){return o.apply(n)}).next(function(){return s})},vE.prototype.removeTarget=function(t,e){return e=e.withSequenceNumber(t.currentSequenceNumber),this.db.getTargetCache().updateTargetData(t,e)},vE.prototype.updateLimboDocument=_E,vE.prototype.we=function(t,r){var i,t=cE(t),o=Em.o;return t.Ot({index:VI.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==Em.o&&r(new yb(AI(i)),o),o=e,i=t):o=Em.o}).next(function(){o!==Em.o&&r(new yb(AI(i)),o)})},vE.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},vE);function vE(t,e){this.db=t,this.garbageCollector=new dE(this,e)}function yE(t,e){this.ae=t,this.params=e}function mE(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}function bE(t){this.ne=t,this.buffer=new Pw(lE),this.se=0}function _E(t,e){return cE(t).put((t=t.currentSequenceNumber,new VI(0,NI(e.path),t)))}var wE,IE=(kE.prototype.get=function(t){var e=this.mapKeyFn(t);if(void 0!==(e=this.inner[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.equalsFn(i,t))return o}},kE.prototype.has=function(t){return void 0!==this.get(t)},kE.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},kE.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},kE.prototype.forEach=function(a){Qm(this.inner,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];a(i,o)}})},kE.prototype.isEmpty=function(){return Ym(this.inner)},kE),lt=(NE.prototype.getReadTime=function(t){return(t=this.changes.get(t))?t.readTime:Wm.min()},NE.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},NE.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Db.newInvalidDocument(t),readTime:e})},NE.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?JI.resolve(n.document):this.getFromCache(t,e)},NE.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},NE.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},NE.prototype.assertNotApplied=function(){},NE),TE=(CE.prototype.addEntry=function(t,e,n){return RE(t).put(OE(e),n)},CE.prototype.removeEntry=function(t,e){return t=RE(t),e=OE(e),t.delete(e)},CE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.me(e,t)})},CE.prototype.getEntry=function(t,e){var n=this;return RE(t).get(OE(e)).next(function(t){return n.ye(e,t)})},CE.prototype.ge=function(t,e){var n=this;return RE(t).get(OE(e)).next(function(t){return{document:n.ye(e,t),size:XT(t)}})},CE.prototype.getEntries=function(t,e){var n=this,r=xw;return this.pe(t,e,function(t,e){e=n.ye(t,e),r=r.insert(t,e)}).next(function(){return r})},CE.prototype.Ee=function(t,e){var r=this,i=xw,o=new Sw(yb.comparator);return this.pe(t,e,function(t,e){var n=r.ye(t,e);i=i.insert(t,n),o=o.insert(t,XT(e))}).next(function(){return{documents:i,Te:o}})},CE.prototype.pe=function(t,e,i){if(e.isEmpty())return JI.resolve();var n=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),a=o.getNext();return RE(t).Ot({range:n},function(t,e,n){for(var r=yb.fromSegments(t);a&&yb.comparator(a,r)<0;)i(a,null),a=o.getNext();a&&a.isEqual(r)&&(i(a,e),a=o.hasNext()?o.getNext():null),a?n.Ct(a.path.toArray()):n.done()}).next(function(){for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})},CE.prototype.getDocumentsMatchingQuery=function(t,r,e){var n,i=this,o=xw,a=r.path.length+1,s={};return e.isEqual(Wm.min())?(n=r.path.toArray(),s.range=IDBKeyRange.lowerBound(n)):(n=r.path.toArray(),e=NT(e),s.range=IDBKeyRange.lowerBound([n,e],!0),s.index=UI.collectionReadTimeIndex),RE(t).Ot(s,function(t,e,n){t.length===a&&(e=ST(i.R,e),r.path.isPrefixOf(e.key.path)?R_(r,e)&&(o=o.insert(e.key,e)):n.done())}).next(function(){return o})},CE.prototype.newChangeBuffer=function(t){return new EE(this,!!t&&t.trackRemovals)},CE.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},CE.prototype.getMetadata=function(t){return AE(t).get(jI.key).next(function(t){return Fm(!!t),t})},CE.prototype.me=function(t,e){return AE(t).put(jI.key,e)},CE.prototype.ye=function(t,e){return!e||(e=ST(this.R,e)).isNoDocument()&&e.version.isEqual(Wm.min())?Db.newInvalidDocument(t):e},CE),EE=(po(SE,wE=lt),SE.prototype.applyChanges=function(i){var o=this,a=[],s=0,u=new Pw(function(t,e){return qm(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(t,e){var n,r=o.Ae.get(t);e.document.isValidDocument()?(n=CT(o.Ie.R,e.document,o.getReadTime(t)),u=u.add(t.path.popLast()),e=XT(n),s+=e-r,a.push(o.Ie.addEntry(i,t,n))):(s-=r,o.trackRemovals?(r=CT(o.Ie.R,Db.newNoDocument(t,Wm.min()),o.getReadTime(t)),a.push(o.Ie.addEntry(i,t,r))):a.push(o.Ie.removeEntry(i,t)))}),u.forEach(function(t){a.push(o.Ie.Ut.addToCollectionParentIndex(i,t))}),a.push(this.Ie.updateMetadata(i,s)),JI.waitFor(a)},SE.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},SE.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},SE);function SE(t,e){var n=this;return(n=wE.call(this)||this).Ie=t,n.trackRemovals=e,n.Ae=new IE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function CE(t,e){this.R=t,this.Ut=e}function NE(){this.changes=new IE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}function kE(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}function AE(t){return yT(t,jI.store)}function RE(t){return yT(t,UI.store)}function OE(t){return t.path.toArray()}var PE=(DE.prototype.Rt=function(e,n,t,r){var i=this;Fm(t<r&&0<=t&&r<=11);var o=new $I("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(RI.store),(a=e).createObjectStore(PI.store,{keyPath:PI.keyPath}),a.createObjectStore(DI.store,{keyPath:DI.keyPath,autoIncrement:!0}).createIndex(DI.userMutationsIndex,DI.userMutationsKeyPath,{unique:!0}),a.createObjectStore(xI.store),xE(e),e.createObjectStore(UI.store));var a,s=JI.resolve();return t<3&&3<=r&&(0!==t&&((a=e).deleteObjectStore(VI.store),a.deleteObjectStore(qI.store),a.deleteObjectStore(BI.store),xE(e)),s=s.next(function(){return t=o.store(BI.store),e=new BI(0,0,Wm.min().toTimestamp(),0),t.put(BI.key,e);var t,e})),t<4&&4<=r&&(s=(s=0!==t?s.next(function(){return n=e,(r=o).store(DI.store).Nt().next(function(t){n.deleteObjectStore(DI.store),n.createObjectStore(DI.store,{keyPath:DI.keyPath,autoIncrement:!0}).createIndex(DI.userMutationsIndex,DI.userMutationsKeyPath,{unique:!0});var e=r.store(DI.store),t=t.map(function(t){return e.put(t)});return JI.waitFor(t)});var n,r}):s).next(function(){e.createObjectStore(WI.store,{keyPath:WI.keyPath})})),t<5&&5<=r&&(s=s.next(function(){return i.Re(o)})),t<6&&6<=r&&(s=s.next(function(){return e.createObjectStore(jI.store),i.be(o)})),t<7&&7<=r&&(s=s.next(function(){return i.ve(o)})),t<8&&8<=r&&(s=s.next(function(){return i.Pe(e,o)})),t<9&&9<=r&&(s=s.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(UI.store)).createIndex(UI.readTimeIndex,UI.readTimeIndexPath,{unique:!1}),t.createIndex(UI.collectionReadTimeIndex,UI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(s=s.next(function(){return i.Ve(o)})),t<11&&11<=r?s.next(function(){e.createObjectStore(HI.store,{keyPath:HI.keyPath}),e.createObjectStore(GI.store,{keyPath:GI.keyPath})}):s},DE.prototype.be=function(e){var n=0;return e.store(UI.store).Ot(function(t,e){n+=XT(e)}).next(function(){var t=new jI(n);return e.store(jI.store).put(jI.key,t)})},DE.prototype.Re=function(n){var r=this,t=n.store(PI.store),i=n.store(DI.store);return t.Nt().next(function(t){return JI.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.Nt(DI.userMutationsIndex,t).next(function(t){return JI.forEach(t,function(t){return Fm(t.userId===e.userId),t=OT(r.R,t),YT(n,e.userId,t).next(function(){})})})})})},DE.prototype.ve=function(t){var o=t.store(VI.store),e=t.store(UI.store);return t.store(BI.store).get(BI.key).next(function(r){var i=[];return e.Ot(function(t,e){var n=new $m(t),t=[0,NI(n)];i.push(o.get(t).next(function(t){return t?JI.resolve():o.put(new VI(0,NI(n),r.highestListenSequenceNumber))}))}).next(function(){return JI.waitFor(i)})})},DE.prototype.Pe=function(t,e){function r(t){if(i.add(t)){var e=t.lastSegment(),t=t.popLast();return n.put({collectionId:e,parent:NI(t)})}}t.createObjectStore(KI.store,{keyPath:KI.keyPath});var n=e.store(KI.store),i=new qT;return e.store(UI.store).Ot({kt:!0},function(t,e){return r((t=new $m(t)).popLast())}).next(function(){return e.store(xI.store).Ot({kt:!0},function(t,e){t[0];var n=t[1];return r((n=(t[2],AI(n))).popLast())})})},DE.prototype.Ve=function(t){var n=this,r=t.store(qI.store);return r.Ot(function(t,e){return e=PT(e),e=DT(n.R,e),r.put(e)})},DE);function DE(t){this.R=t}function xE(t){t.createObjectStore(VI.store,{keyPath:VI.keyPath}).createIndex(VI.documentTargetsIndex,VI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(qI.store,{keyPath:qI.keyPath}).createIndex(qI.queryTargetsIndexName,qI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(BI.store)}var LE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ME=(FE.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new km(Nm.FAILED_PRECONDITION,LE);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new Em(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},FE.prototype.He=function(n){var t=this;return this.Me=function(e){return vo(t,void 0,void 0,function(){return yo(this,function(t){return this.started?[2,n(e)]:[2]})})},n(this.isPrimary)},FE.prototype.setDatabaseDeletedListener=function(n){var t=this;this.Be.vt(function(e){return vo(t,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},FE.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return vo(e,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},FE.prototype.je=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return jE(e).put(new WI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Je(e).next(function(t){t||(n.isPrimary=!1,n.Se.enqueueRetryable(function(){return n.Me(!1)}))})}).next(function(){return n.Ye(e)}).next(function(t){return n.isPrimary&&!t?n.Xe(e).next(function(){return!1}):!!t&&n.Ze(e).next(function(){return!0})})}).catch(function(t){if(uT(t))return Pm("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Pm("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Se.enqueueRetryable(function(){return n.Me(t)}),n.isPrimary=t})},FE.prototype.Je=function(t){var e=this;return UE(t).get(RI.key).next(function(t){return JI.resolve(e.tn(t))})},FE.prototype.en=function(t){return jE(t).delete(this.clientId)},FE.prototype.nn=function(){return vo(this,void 0,void 0,function(){var e,n,r,i,o=this;return yo(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=yT(t,WI.store);return r.Nt().next(function(t){var e=o.rn(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return JI.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Ke)for(n=0,r=e;n<r.length;n++)i=r[n],this.Ke.removeItem(this.on(i.clientId));t.label=2;case 2:return[2]}})})},FE.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},FE.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},FE.prototype.Ye=function(e){var r=this;return this.Ce?JI.resolve(!0):UE(e).get(RI.key).next(function(t){if(null!==t&&r.sn(t.leaseTimestampMs,5e3)&&!r.cn(t.ownerId)){if(r.tn(t)&&r.networkEnabled)return!0;if(!r.tn(t)){if(!t.allowTabSynchronization)throw new km(Nm.FAILED_PRECONDITION,LE);return!1}}return!(!r.networkEnabled||!r.inForeground)||jE(e).Nt().next(function(t){return void 0===r.rn(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Pm("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},FE.prototype.shutdown=function(){return vo(this,void 0,void 0,function(){var n=this;return yo(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[RI.store,WI.store],function(t){var e=new gT(t,Em.o);return n.Xe(e).next(function(){return n.en(e)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},FE.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},FE.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return jE(t).Nt().next(function(t){return e.rn(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(FE.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),FE.prototype.getMutationQueue=function(t){return JT.Kt(t,this.R,this.Ut,this.referenceDelegate)},FE.prototype.getTargetCache=function(){return this.qe},FE.prototype.getRemoteDocumentCache=function(){return this.Ue},FE.prototype.getIndexManager=function(){return this.Ut},FE.prototype.getBundleCache=function(){return this.Qe},FE.prototype.runTransaction=function(e,n,r){var i=this;Pm("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Be.runTransaction(e,t,QI,function(t){return o=new gT(t,i.Ne?i.Ne.next():Em.o),"readwrite-primary"===n?i.Je(o).next(function(t){return!!t||i.Ye(o)}).next(function(t){if(!t)throw Dm("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new km(Nm.FAILED_PRECONDITION,YI);return r(o)}).next(function(t){return i.Ze(o).next(function(){return t})}):i.dn(o).next(function(){return r(o)})}).then(function(t){return o.raiseOnCommittedEvent(),t})},FE.prototype.dn=function(t){var e=this;return UE(t).get(RI.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new km(Nm.FAILED_PRECONDITION,LE)})},FE.prototype.Ze=function(t){var e=new RI(this.clientId,this.allowTabSynchronization,Date.now());return UE(t).put(RI.key,e)},FE.yt=function(){return ZI.yt()},FE.prototype.Xe=function(t){var e=this,n=UE(t);return n.get(RI.key).next(function(t){return e.tn(t)?(Pm("IndexedDbPersistence","Releasing primary lease."),n.delete(RI.key)):JI.resolve()})},FE.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Dm("Detected an update time that is in the future: "+t+" > "+n),1))},FE.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},FE.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},FE.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},FE.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},FE.prototype.cn=function(t){try{var e=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Pm("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Dm("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},FE.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Dm("Failed to set zombie client id.",t)}},FE.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},FE.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},FE);function FE(t,e,n,r,i,o,a,s,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Se=i,this.window=o,this.document=a,this.De=u,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!FE.yt())throw new km(Nm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gE(this,r),this.Le=e+"main",this.R=new wT(s),this.Be=new ZI(this.Le,11,new PE(this.R)),this.qe=new iE(this.referenceDelegate,this.R),this.Ut=new VT,this.Ue=(e=this.R,s=this.Ut,new TE(e,s)),this.Qe=new LT,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===c&&Dm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function UE(t){return yT(t,RI.store)}function jE(t){return yT(t,WI.store)}function qE(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function VE(t,e){this.progress=t,this.wn=e}var BE=(YE.prototype.mn=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(t){return r.yn(e,n,t)})},YE.prototype.yn=function(t,e,r){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,n=r;e<n.length;e++)n[e].applyToLocalView(t);return t})},YE.prototype.gn=function(t,i){t.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)r[n].applyToLocalView(e)})},YE.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next(function(t){return n.En(e,t).next(function(){return t})})},YE.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},YE.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,yb.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):T_(e)?this.In(t,e,n):this.An(t,e,n);var r},YE.prototype.Tn=function(t,e){return this.mn(t,new yb(e)).next(function(t){var e=Fw;return t.isFoundDocument()?e.insert(t.key,t):e})},YE.prototype.In=function(n,r,i){var o=this,a=r.collectionGroup,s=Fw;return this.Ut.getCollectionParents(n,a).next(function(t){return JI.forEach(t,function(t){var e=(e=r,t=t.child(a),new v_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.An(n,e,i).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},YE.prototype.An=function(e,n,t){var c,h,r=this;return this.Ue.getDocumentsMatchingQuery(e,n,t).next(function(t){return c=t,r._n.getAllMutationBatchesAffectingQuery(e,n)}).next(function(t){return h=t,r.Rn(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var a=o[i],s=a.key,u=c.get(s);null==u&&(u=Db.newInvalidDocument(s),c=c.insert(s,u)),rw(a,u,r.localWriteTime),u.isFoundDocument()||(c=c.remove(s))}})}).next(function(){return c.forEach(function(t,e){R_(n,e)||(c=c.remove(t))}),c})},YE.prototype.Rn=function(t,e,n){for(var r=qw(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof cw&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},YE),KE=(QE.Pn=function(t,e){for(var n=qw(),r=qw(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new QE(t,e.fromCache,n,r)},QE),WE=(zE.prototype.Vn=function(t){this.Sn=t},zE.prototype.getDocumentsMatchingQuery=function(e,r,i,o){var a=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())||i.isEqual(Wm.min())?this.Dn(e,r):this.Sn.pn(e,o).next(function(t){var n=a.Cn(r,t);return(b_(r)||__(r))&&a.Nn(r.limitType,n,o,i)?a.Dn(e,r):(Om()<=Ta.DEBUG&&Pm("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),A_(r)),a.Sn.getDocumentsMatchingQuery(e,r,i).next(function(e){return n.forEach(function(t){e=e.insert(t.key,t)}),e}))})},zE.prototype.Cn=function(n,t){var r=new Pw(O_(n));return t.forEach(function(t,e){R_(n,e)&&(r=r.add(e))}),r},zE.prototype.Nn=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.compareTo(r))},zE.prototype.Dn=function(t,e){return Om()<=Ta.DEBUG&&Pm("QueryEngine","Using full collection scan to execute query:",A_(e)),this.Sn.getDocumentsMatchingQuery(t,e,Wm.min())},zE),HE=(GE.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.collect(t,n.Fn)})},GE);function GE(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Sw(qm),this.kn=new IE(Fb,Ub),this.On=Wm.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new BE(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}function zE(){}function QE(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}function YE(t,e,n){this.Ue=t,this._n=e,this.Ut=n}function XE(t,e,n,r){return new HE(t,e,n,r)}function JE(i,o){return vo(this,void 0,void 0,function(){var e,n,m,r;return yo(this,function(t){switch(t.label){case 0:return n=(e=i)._n,m=e.Mn,[4,e.persistence.runTransaction("Handle user change","readonly",function(v){var y;return e._n.getAllMutationBatches(v).next(function(t){return y=t,n=e.persistence.getMutationQueue(o),m=new BE(e.$n,n,e.persistence.getIndexManager()),n.getAllMutationBatches(v)}).next(function(t){for(var e=[],n=[],r=qw(),i=0,o=y;i<o.length;i++){var a=o[i];e.push(a.batchId);for(var s=0,u=a.mutations;s<u.length;s++)var c=u[s],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var g=d[p];r=r.add(g.key)}}return m.pn(v,r).next(function(t){return{Ln:t,removedBatchIds:e,addedBatchIds:n}})})})];case 1:return r=t.sent(),[2,(e._n=n,e.Mn=m,e.xn.Vn(e.Mn),r)]}})})}function $E(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function ZE(t,a,e,s,u){var n=qw();return e.forEach(function(t){return n=n.add(t)}),a.getEntries(t,n).next(function(i){var o=xw;return e.forEach(function(t,e){var n=i.get(t),r=(null==u?void 0:u.get(t))||s;e.isNoDocument()&&e.version.isEqual(Wm.min())?(a.removeEntry(t,r),o=o.insert(t,e)):!n.isValidDocument()||0<e.version.compareTo(n.version)||0===e.version.compareTo(n.version)&&n.hasPendingWrites?(a.addEntry(e,r),o=o.insert(t,e)):Pm("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function tS(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.qe.getTargetData(e,r).next(function(t){return t?(n=t,JI.resolve(n)):i.qe.allocateTargetId(e).next(function(t){return n=new _T(r,t,0,e.currentSequenceNumber),i.qe.addTargetData(e,n).next(function(){return n})})})}).then(function(t){var e=i.Fn.get(t.targetId);return(null===e||0<t.snapshotVersion.compareTo(e.snapshotVersion))&&(i.Fn=i.Fn.insert(t.targetId,t),i.kn.set(r,t.targetId)),t})}function eS(i,o,a){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:n=(e=i).Fn.get(o),r=a?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),a?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.referenceDelegate.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!uT(r=t.sent()))throw r;return Pm("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Fn=e.Fn.remove(o),e.kn.delete(n.target),[2]}})})}function nS(t,o,a){var s=t,u=Wm.min(),c=qw();return s.persistence.runTransaction("Execute query","readonly",function(e){return t=s,n=e,r=S_(o),(void 0!==(t=(i=t).kn.get(r))?JI.resolve(i.Fn.get(t)):i.qe.getTargetData(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,s.qe.getMatchingKeysForTargetId(e,t.targetId).next(function(t){c=t})}).next(function(){return s.xn.getDocumentsMatchingQuery(e,o,a?u:Wm.min(),a?c:qw())}).next(function(t){return{documents:t,Bn:c}});var t,n,r,i})}function rS(t,e){var n=t,r=n.qe;return(t=n.Fn.get(e))?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function iS(t){var a=t;return a.persistence.runTransaction("Get new document changes","readonly",function(t){return e=a.$n,n=t,t=a.On,r=e,i=xw,o=NT(t),t=RE(n),n=IDBKeyRange.lowerBound(o,!0),t.Ot({index:UI.readTimeIndex,range:n},function(t,e){var n=ST(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:kT(o)}});var e,n,r,i,o}).then(function(t){var e=t.wn,t=t.readTime;return a.On=t,e})}var oS,aS,sS=(kS.prototype.getBundleMetadata=function(t,e){return JI.resolve(this.Kn.get(e))},kS.prototype.saveBundleMetadata=function(t,e){return this.Kn.set(e.id,{id:e.id,version:e.version,createTime:aI(e.createTime)}),JI.resolve()},kS.prototype.getNamedQuery=function(t,e){return JI.resolve(this.jn.get(e))},kS.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:e.name,query:xT(e.bundledQuery),readTime:aI(e.readTime)}),JI.resolve()},kS),uS=(NS.prototype.isEmpty=function(){return this.Wn.isEmpty()},NS.prototype.addReference=function(t,e){e=new cS(t,e),this.Wn=this.Wn.add(e),this.zn=this.zn.add(e)},NS.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},NS.prototype.removeReference=function(t,e){this.Yn(new cS(t,e))},NS.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},NS.prototype.Zn=function(t){var e=this,n=new yb(new $m([])),r=new cS(n,t),t=new cS(n,t+1),i=[];return this.zn.forEachInRange([r,t],function(t){e.Yn(t),i.push(t.key)}),i},NS.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},NS.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},NS.prototype.es=function(t){var e=new yb(new $m([])),n=new cS(e,t),t=new cS(e,t+1),r=qw();return this.zn.forEachInRange([n,t],function(t){r=r.add(t.key)}),r},NS.prototype.containsKey=function(t){var e=new cS(t,0);return null!==(e=this.Wn.firstAfterOrEqual(e))&&t.isEqual(e.key)},NS),cS=(CS.Gn=function(t,e){return yb.comparator(t.key,e.key)||qm(t.ns,e.ns)},CS.Hn=function(t,e){return qm(t.ns,e.ns)||yb.comparator(t.key,e.key)},CS),hS=(SS.prototype.checkEmpty=function(t){return JI.resolve(0===this._n.length)},SS.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,0<this._n.length&&this._n[this._n.length-1],n=new mT(i,e,n,r),this._n.push(n);for(var o=0,a=r;o<a.length;o++){var s=a[o];this.rs=this.rs.add(new cS(s.key,i)),this.Ut.addToCollectionParentIndex(t,s.key.path.popLast())}return JI.resolve(n)},SS.prototype.lookupMutationBatch=function(t,e){return JI.resolve(this.os(e))},SS.prototype.getNextMutationBatchAfterBatchId=function(t,e){return e+=1,e=(e=this.cs(e))<0?0:e,JI.resolve(this._n.length>e?this._n[e]:null)},SS.prototype.getHighestUnacknowledgedBatchId=function(){return JI.resolve(0===this._n.length?-1:this.ss-1)},SS.prototype.getAllMutationBatches=function(t){return JI.resolve(this._n.slice())},SS.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new cS(e,0),e=new cS(e,Number.POSITIVE_INFINITY),i=[];return this.rs.forEachInRange([r,e],function(t){t=n.os(t.ns),i.push(t)}),JI.resolve(i)},SS.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pw(qm);return e.forEach(function(t){var e=new cS(t,0),t=new cS(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,t],function(t){r=r.add(t.ns)})}),JI.resolve(this.us(r))},SS.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,e=n;yb.isDocumentKey(e)||(e=e.child(""));var e=new cS(new yb(e),0),i=new Pw(qm);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.ns)),!0)},e),JI.resolve(this.us(i))},SS.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){null!==(t=e.os(t))&&n.push(t)}),n},SS.prototype.removeMutationBatch=function(n,r){var i=this;Fm(0===this.hs(r.batchId,"removed")),this._n.shift();var o=this.rs;return JI.forEach(r.mutations,function(t){var e=new cS(t.key,r.batchId);return o=o.delete(e),i.referenceDelegate.markPotentiallyOrphaned(n,t.key)}).next(function(){i.rs=o})},SS.prototype.Gt=function(t){},SS.prototype.containsKey=function(t,e){var n=new cS(e,0),n=this.rs.firstAfterOrEqual(n);return JI.resolve(e.isEqual(n&&n.key))},SS.prototype.performConsistencyCheck=function(t){return this._n.length,JI.resolve()},SS.prototype.hs=function(t,e){return this.cs(t)},SS.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},SS.prototype.os=function(t){return(t=this.cs(t))<0||t>=this._n.length?null:this._n[t]},SS),lS=(ES.prototype.addEntry=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-i,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},ES.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},ES.prototype.getEntry=function(t,e){var n=this.docs.get(e);return JI.resolve(n?n.document.clone():Db.newInvalidDocument(e))},ES.prototype.getEntries=function(t,e){var n=this,r=xw;return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Db.newInvalidDocument(t))}),JI.resolve(r)},ES.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=xw,i=new yb(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=(s=o.getNext()).key,s=(u=s.value).document,u=u.readTime;if(!e.path.isPrefixOf(a.path))break;u.compareTo(n)<=0||R_(e,s)&&(r=r.insert(s.key,s.clone()))}return JI.resolve(r)},ES.prototype.fs=function(t,e){return JI.forEach(this.docs,function(t){return e(t)})},ES.prototype.newChangeBuffer=function(t){return new fS(this)},ES.prototype.getSize=function(t){return JI.resolve(this.size)},ES),fS=(po(TS,aS=lt),TS.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(t,e){e.document.isValidDocument()?i.push(r.Ie.addEntry(n,e.document,r.getReadTime(t))):r.Ie.removeEntry(t)}),JI.waitFor(i)},TS.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},TS.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},TS),pS=(IS.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(t,e){return n(e)}),JI.resolve()},IS.prototype.getLastRemoteSnapshotVersion=function(t){return JI.resolve(this.lastRemoteSnapshotVersion)},IS.prototype.getHighestSequenceNumber=function(t){return JI.resolve(this.ws)},IS.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),JI.resolve(this.highestTargetId)},IS.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),JI.resolve()},IS.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new rE(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},IS.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,JI.resolve()},IS.prototype.updateTargetData=function(t,e){return this.te(e),JI.resolve()},IS.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),--this.targetCount,JI.resolve()},IS.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return this.ds.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.ds.delete(t),s.push(o.removeMatchingKeysForTargetId(n,e.targetId)),a++)}),JI.waitFor(s).next(function(){return a})},IS.prototype.getTargetCount=function(t){return JI.resolve(this.targetCount)},IS.prototype.getTargetData=function(t,e){return e=this.ds.get(e)||null,JI.resolve(e)},IS.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),JI.resolve()},IS.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),JI.waitFor(i)},IS.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),JI.resolve()},IS.prototype.getMatchingKeysForTargetId=function(t,e){return e=this._s.es(e),JI.resolve(e)},IS.prototype.containsKey=function(t,e){return JI.resolve(this._s.containsKey(e))},IS),dS=(wS.prototype.start=function(){return Promise.resolve()},wS.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(wS.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),wS.prototype.setDatabaseDeletedListener=function(){},wS.prototype.setNetworkEnabled=function(){},wS.prototype.getIndexManager=function(){return this.Ut},wS.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new hS(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},wS.prototype.getTargetCache=function(){return this.qe},wS.prototype.getRemoteDocumentCache=function(){return this.Ue},wS.prototype.getBundleCache=function(){return this.Qe},wS.prototype.runTransaction=function(t,e,n){var r=this;Pm("MemoryPersistence","Starting transaction:",t);var i=new gS(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},wS.prototype.Is=function(e,n){return JI.or(Object.values(this.gs).map(function(t){return function(){return t.containsKey(e,n)}}))},wS),gS=(po(_S,oS=Gn),_S),vS=(bS.bs=function(t){return new bS(t)},Object.defineProperty(bS.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Mm()},enumerable:!1,configurable:!0}),bS.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),JI.resolve()},bS.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),JI.resolve()},bS.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),JI.resolve()},bS.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},bS.prototype.Es=function(){this.Rs=new Set},bS.prototype.Ts=function(n){var r=this,i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return JI.forEach(this.vs,function(t){var e=yb.fromPath(t);return r.Ps(n,e).next(function(t){t||i.removeEntry(e)})}).next(function(){return r.Rs=null,i.apply(n)})},bS.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},bS.prototype.ps=function(t){return 0},bS.prototype.Ps=function(t,e){var n=this;return JI.or([function(){return JI.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},bS),yS=(mS.prototype.isAuthenticated=function(){return null!=this.uid},mS.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},mS.prototype.isEqual=function(t){return t.uid===this.uid},mS);function mS(t){this.uid=t}function bS(t){this.persistence=t,this.As=new uS,this.Rs=null}function _S(t){var e=this;return(e=oS.call(this)||this).currentSequenceNumber=t,e}function wS(t,e){var n=this;this.gs={},this.Ne=new Em(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new pS(this),this.Ut=new jT,this.Ue=(t=this.Ut,new lS(t,function(t){return n.referenceDelegate.ps(t)})),this.R=new wT(e),this.Qe=new sS(this.R)}function IS(t){this.persistence=t,this.ds=new IE(Fb,Ub),this.lastRemoteSnapshotVersion=Wm.min(),this.highestTargetId=0,this.ws=0,this._s=new uS,this.targetCount=0,this.ys=rE.Jt()}function TS(t){var e=this;return(e=aS.call(this)||this).Ie=t,e}function ES(t,e){this.Ut=t,this.ls=e,this.docs=new Sw(yb.comparator),this.size=0}function SS(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Pw(cS.Gn)}function CS(t,e){this.key=t,this.ns=e}function NS(){this.Wn=new Pw(cS.Gn),this.zn=new Pw(cS.Hn)}function kS(t){this.R=t,this.Kn=new Map,this.jn=new Map}function AS(t,e){return"firestore_clients_"+t+"_"+e}function RS(t,e,n){return n="firestore_mutations_"+t+"_"+n,e.isAuthenticated()&&(n+="_"+e.uid),n}function OS(t,e){return"firestore_targets_"+t+"_"+e}yS.UNAUTHENTICATED=new yS(null),yS.GOOGLE_CREDENTIALS=new yS("google-credentials-uid"),yS.FIRST_PARTY=new yS("first-party-uid");var PS,DS=(nC.Vs=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new km(i.error.code,i.error.message)),o?new nC(t,e,i.state,r):(Dm("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},nC.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},nC),xS=(eC.Vs=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new km(r.error.code,r.error.message)),i?new eC(t,r.state,n):(Dm("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},eC.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},eC),LS=(tC.Vs=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Vw,o=0;r&&o<n.activeTargetIds.length;++o)r=vb(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new tC(t,i):(Dm("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},tC),MS=(ZS.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new ZS(e.clientId,e.onlineState):(Dm("SharedClientState","Failed to parse online state: "+t),null)},ZS),FS=($S.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},$S.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},$S.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},$S),US=(JS.yt=function(t){return!(!t||!t.localStorage)},JS.prototype.start=function(){return vo(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h,l=this;return yo(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.fn()];case 1:for(a=t.sent(),e=0,n=a;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(AS(this.persistenceKey,r)))&&(o=LS.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)h=c[u],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},JS.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},JS.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},JS.prototype.isActiveQueryTarget=function(n){var r=!1;return this.ks.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},JS.prototype.addPendingMutation=function(t){this.zs(t,"pending")},JS.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},JS.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(!(e=this.storage.getItem(OS(this.persistenceKey,t)))||(e=xS.Vs(t,e))&&(n=e.state)),this.Js.Ds(t),this.Ks(),n},JS.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},JS.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},JS.prototype.clearQueryState=function(t){this.removeItem(OS(this.persistenceKey,t))},JS.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},JS.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},JS.prototype.setOnlineState=function(t){this.Xs(t)},JS.prototype.notifyBundleLoaded=function(){this.Zs()},JS.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},JS.prototype.getItem=function(t){var e=this.storage.getItem(t);return Pm("SharedClientState","READ",t,e),e},JS.prototype.setItem=function(t,e){Pm("SharedClientState","SET",t,e),this.storage.setItem(t,e)},JS.prototype.removeItem=function(t){Pm("SharedClientState","REMOVE",t),this.storage.removeItem(t)},JS.prototype.Fs=function(t){var e=this,o=t;o.storageArea===this.storage&&(Pm("SharedClientState","EVENT",o.key,o.newValue),o.key!==this.$s?this.Se.enqueueRetryable(function(){return vo(e,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){if(this.started){if(null!==o.key)if(this.Ls.test(o.key)){if(null==o.newValue)return e=this.ti(o.key),[2,this.ei(e,null)];if(e=this.ni(o.key,o.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(o.key)){if(null!==o.newValue&&(n=this.si(o.key,o.newValue)))return[2,this.ii(n)]}else if(this.qs.test(o.key)){if(null!==o.newValue&&(r=this.ri(o.key,o.newValue)))return[2,this.oi(r)]}else if(o.key===this.Us){if(null!==o.newValue&&(i=this.js(o.newValue)))return[2,this.Ws(i)]}else if(o.key===this.Ms)(i=function(t){var e=Em.o;if(null!=t)try{var n=JSON.parse(t);Fm("number"==typeof n),e=n}catch(t){Dm("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==Em.o&&this.sequenceNumberHandler(i);else if(o.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(o);return[2]})})}):Dm("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(JS.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),JS.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},JS.prototype.zs=function(t,e,n){n=new DS(this.currentUser,t,e,n),t=RS(this.persistenceKey,this.currentUser,t),this.setItem(t,n.Ss())},JS.prototype.Hs=function(t){t=RS(this.persistenceKey,this.currentUser,t),this.removeItem(t)},JS.prototype.Xs=function(t){t={clientId:this.Ns,onlineState:t},this.storage.setItem(this.Us,JSON.stringify(t))},JS.prototype.Ys=function(t,e,n){var r=OS(this.persistenceKey,t),n=new xS(t,e,n);this.setItem(r,n.Ss())},JS.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},JS.prototype.ti=function(t){return(t=this.Ls.exec(t))?t[1]:null},JS.prototype.ni=function(t,e){return t=this.ti(t),LS.Vs(t,e)},JS.prototype.si=function(t,e){var n=this.Bs.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return DS.Vs(new yS(n),t,e)},JS.prototype.ri=function(t,e){return t=this.qs.exec(t),t=Number(t[1]),xS.Vs(t,e)},JS.prototype.js=function(t){return MS.Vs(t)},JS.prototype.ii=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(Pm("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},JS.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},JS.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach(function(t){i.has(t)||a.push(t)}),i.forEach(function(t){o.has(t)||s.push(t)}),this.syncEngine.hi(a,s).then(function(){n.ks=r})},JS.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},JS.prototype.Gs=function(t){var n=Vw;return t.forEach(function(t,e){n=n.unionWith(e.activeTargetIds)}),n},JS),jS=(XS.prototype.addPendingMutation=function(t){},XS.prototype.updateMutationState=function(t,e,n){},XS.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},XS.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},XS.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},XS.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},XS.prototype.clearQueryState=function(t){delete this.fi[t]},XS.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},XS.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},XS.prototype.start=function(){return this.li=new FS,Promise.resolve()},XS.prototype.handleUserChange=function(t,e,n){},XS.prototype.setOnlineState=function(t){},XS.prototype.shutdown=function(){},XS.prototype.writeSequenceNumber=function(t){},XS.prototype.notifyBundleLoaded=function(){},XS),qS=(YS.prototype.di=function(t){},YS.prototype.shutdown=function(){},YS),VS=(QS.prototype.di=function(t){this.gi.push(t)},QS.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},QS.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},QS.prototype._i=function(){Pm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},QS.prototype.yi=function(){Pm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},QS.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},QS),BS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},KS=(zS.prototype.Ii=function(t){this.Ai=t},zS.prototype.Ri=function(t){this.bi=t},zS.prototype.onMessage=function(t){this.vi=t},zS.prototype.close=function(){this.Ti()},zS.prototype.send=function(t){this.Ei(t)},zS.prototype.Pi=function(){this.Ai()},zS.prototype.Vi=function(t){this.bi(t)},zS.prototype.Si=function(t){this.vi(t)},zS),WS=(GS.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);return Pm("RestConnection","Sending: ",i,n),t={},this.Fi(t,r),this.ki(e,i,t,n).then(function(t){return Pm("RestConnection","Received: ",t),t},function(t){throw xm("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},GS.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},GS.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},GS.prototype.xi=function(t,e){return t=BS[t],this.Di+"/v1/"+e+":"+t},po(HS,PS=GS),HS.prototype.ki=function(o,e,a,s){return new Promise(function(n,r){var i=new Tm;i.listenOnce(_m.COMPLETE,function(){try{switch(i.getLastErrorCode()){case bm.NO_ERROR:var t=i.getResponseJson();Pm("Connection","XHR received:",JSON.stringify(t)),n(t);break;case bm.TIMEOUT:Pm("Connection",'RPC "'+o+'" timed out'),r(new km(Nm.DEADLINE_EXCEEDED,"Request time out"));break;case bm.HTTP_ERROR:var e=i.getStatus();Pm("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(Nm).indexOf(e)?e:Nm.UNKNOWN,r(new km(e,t.message))):r(new km(Nm.UNKNOWN,"Server responded with status "+i.getStatus())):r(new km(Nm.UNAVAILABLE,"Connection failed."));break;default:Mm()}}finally{Pm("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(s);i.send(e,"POST",t,a,15)})},HS.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new pm,i=mm(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(t.initMessageHeaders,e),Po()||xo()||0<=Oo().indexOf("Electron/")||0<=(e=Oo()).indexOf("MSIE ")||0<=e.indexOf("Trident/")||0<=Oo().indexOf("MSAppHost/")||Do()||(t.httpHeadersOverwriteParam="$httpHeaders"),Pm("Connection","Creating WebChannel: "+(n=n.join("")),t);var o=r.createWebChannel(n,t),a=!1,s=!1,u=new KS({Ei:function(t){s?Pm("Connection","Not sending because WebChannel is closed:",t):(a||(Pm("Connection","Opening WebChannel transport."),o.open(),a=!0),Pm("Connection","WebChannel sending:",t),o.send(t))},Ti:function(){return o.close()}});return(t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})})(o,Im.EventType.OPEN,function(){s||Pm("Connection","WebChannel transport opened.")}),t(o,Im.EventType.CLOSE,function(){s||(s=!0,Pm("Connection","WebChannel transport closed"),u.Vi())}),t(o,Im.EventType.ERROR,function(t){s||(s=!0,xm("Connection","WebChannel transport errored:",t),u.Vi(new km(Nm.UNAVAILABLE,"The operation could not be completed")))}),t(o,Im.EventType.MESSAGE,function(t){var e,n,r,i;s||(Fm(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Pm("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=vw[r];if(void 0!==t)return Ew(t)}(),i=n.message,void 0===t&&(t=Nm.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,u.Vi(new km(t,i)),o.close()):(Pm("Connection","WebChannel received:",e),u.Si(e)))}),t(i,wm.STAT_EVENT,function(t){10===t.stat?Pm("Connection","Detected buffering proxy"):11===t.stat&&Pm("Connection","Detected no buffering proxy")}),setTimeout(function(){u.Pi()},0),u},HS);function HS(t){var e=this;return(e=PS.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.autoDetectLongPolling=t.autoDetectLongPolling,e}function GS(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function zS(t){this.Ei=t.Ei,this.Ti=t.Ti}function QS(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}function YS(){}function XS(){this.li=new FS,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function JS(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Sw(qm),this.started=!1,this.Os=[],n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),this.storage=this.window.localStorage,this.currentUser=i,this.$s=AS(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new FS),this.Ls=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Qs="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}function $S(){this.activeTargetIds=Vw}function ZS(t,e){this.clientId=t,this.onlineState=e}function tC(t,e){this.clientId=t,this.activeTargetIds=e}function eC(t,e,n){this.targetId=t,this.state=e,this.error=n}function nC(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function rC(){return"undefined"!=typeof window?window:null}function iC(){return"undefined"!=typeof document?document:null}function oC(t){return new rI(t,!0)}function aC(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return vo(o,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return AC(this)?(Pm("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return(e=n).$r.add(4),[4,IC(e)];case 1:return t.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,wC(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new dC(n,r)}var sC,uC,cC,hC=(_C.prototype.reset=function(){this.qi=0},_C.prototype.Ki=function(){this.qi=this.Bi},_C.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);0<i&&Pm("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},_C.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},_C.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},_C.prototype.Wi=function(){return(Math.random()-.5)*this.qi},_C),lt=(bC.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},bC.prototype.er=function(){return 2===this.state},bC.prototype.start=function(){3!==this.state?this.auth():this.nr()},bC.prototype.stop=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},bC.prototype.sr=function(){this.state=0,this.Zi.reset()},bC.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},bC.prototype.cr=function(t){this.ur(),this.stream.send(t)},bC.prototype.rr=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},bC.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},bC.prototype.close=function(e,n){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():n&&n.code===Nm.RESOURCE_EXHAUSTED?(Dm(n.toString()),Dm("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):n&&n.code===Nm.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(n)];case 1:return t.sent(),[2]}})})},bC.prototype.ar=function(){},bC.prototype.auth=function(){var n=this;this.state=1;var t=this.hr(this.Yi),e=this.Yi;this.Ji.getToken().then(function(t){n.Yi===e&&n.lr(t)},function(e){t(function(){var t=new km(Nm.UNKNOWN,"Fetching auth token failed: "+e.message);return n.dr(t)})})},bC.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},bC.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return vo(t,void 0,void 0,function(){return yo(this,function(t){return this.state=0,this.start(),[2]})})})},bC.prototype.dr=function(t){return Pm("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},bC.prototype.hr=function(e){var n=this;return function(t){n.Se.enqueueAndForget(function(){return n.Yi===e?t():(Pm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},bC),lC=(po(mC,cC=lt),mC.prototype.wr=function(t){return this.Hi.$i("Listen",t)},mC.prototype.onMessage=function(t){this.Zi.reset();var e,n=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Mm(),r=e.targetChange.targetIds||[],i=(a=e.targetChange.resumeToken,t.I?(Fm(void 0===a||"string"==typeof a),nb.fromBase64String(a||"")):(Fm(void 0===a||a instanceof Uint8Array),nb.fromUint8Array(a||new Uint8Array))),o=(s=e.targetChange.cause)&&(u=void 0===(c=s).code?Nm.UNKNOWN:Ew(c.code),new km(u,c.message||"")),a=new Gw(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime;var r=hI(t,n.document.name),i=aI(n.document.updateTime),s=new Ob({mapValue:{fields:n.document.fields}}),u=(o=Db.newFoundDocument(r,i,s),n.targetIds||[]),c=n.removedTargetIds||[],a=new Ww(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=hI(t,n.document),i=n.readTime?aI(n.readTime):Wm.min(),s=Db.newNoDocument(r,i),o=n.removedTargetIds||[],a=new Ww([],o,s.key,s);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=hI(t,n.document),i=n.removedTargetIds||[],a=new Ww([],i,r,null);else{if(!("filter"in e))return Mm();e.filter,(e=e.filter).targetId,r=new gw(n=e.count||0),i=e.targetId,a=new Hw(i,r)}return a}(this.R,t),t=!("targetChange"in(e=t))||(e=e.targetChange).targetIds&&e.targetIds.length||!e.readTime?Wm.min():aI(e.readTime);return this.listener._r(n,t)},mC.prototype.mr=function(t){var e,n,r,i,o={};o.database=pI(this.R),o.addTarget=(e=this.R,(r=jb(r=(n=t).target)?{documents:bI(e,r)}:{query:_I(e,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=oI(e,n.resumeToken):0<n.snapshotVersion.compareTo(Wm.min())&&(r.readTime=iI(e,n.snapshotVersion.toTimestamp())),r),(t=(this.R,i=t,null==(t=function(){switch(i.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mm()}}())?null:{"goog-listen-tags":t}))&&(o.labels=t),this.cr(o)},mC.prototype.yr=function(t){var e={};e.database=pI(this.R),e.removeTarget=t,this.cr(e)},mC),fC=(po(yC,uC=lt),Object.defineProperty(yC.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),yC.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,uC.prototype.start.call(this)},yC.prototype.ar=function(){this.gr&&this.Er([])},yC.prototype.wr=function(t){return this.Hi.$i("Write",t)},yC.prototype.onMessage=function(t){if(Fm(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Fm(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?aI(e.updateTime):aI(n)).isEqual(Wm.min())&&(t=aI(n)),new $_(t,e.transformResults||[]);var e,n})):[]),n=aI(t.commitTime);return this.listener.Tr(n,e)}var r;return Fm(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},yC.prototype.Ar=function(){var t={};t.database=pI(this.R),this.cr(t)},yC.prototype.Er=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return yI(e.R,t)})};this.cr(t)},yC),pC=(po(vC,sC=function(){}),vC.prototype.br=function(){if(this.Rr)throw new km(Nm.FAILED_PRECONDITION,"The client has already been terminated.")},vC.prototype.Ni=function(e,n,r){var i=this;return this.br(),this.credentials.getToken().then(function(t){return i.Hi.Ni(e,n,r,t)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Nm.UNAUTHENTICATED&&i.credentials.invalidateToken(),t):new km(Nm.UNKNOWN,t.toString())})},vC.prototype.Oi=function(e,n,r){var i=this;return this.br(),this.credentials.getToken().then(function(t){return i.Hi.Oi(e,n,r,t)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Nm.UNAUTHENTICATED&&i.credentials.invalidateToken(),t):new km(Nm.UNKNOWN,t.toString())})},vC.prototype.terminate=function(){this.Rr=!0},vC),dC=(gC.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},gC.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,1<=this.vr&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},gC.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},gC.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},gC.prototype.Cr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.Vr?(Dm(t),this.Vr=!1):Pm("OnlineStateTracker",t)},gC.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},gC);function gC(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}function vC(t,e,n){var r=this;return(r=sC.call(this)||this).credentials=t,r.Hi=e,r.R=n,r.Rr=!1,r}function yC(t,e,n,r,i){var o=this;return(o=uC.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).R=r,o.gr=!1,o}function mC(t,e,n,r,i){var o=this;return(o=cC.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).R=r,o}function bC(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new hC(t,e)}function _C(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}function wC(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:if(!AC(r))return[3,4];e=0,n=r.Mr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function IC(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:e=0,n=r.Mr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function TC(t,e){t.Or.has(e.targetId)||(t.Or.set(e.targetId,e),kC(t)?NC(t):FC(t).er()&&SC(t,e))}function EC(t,e){var n=t,t=FC(n);n.Or.delete(e),t.er()&&CC(n,e),0===n.Or.size&&(t.er()?t.ir():AC(n)&&n.Br.set("Unknown"))}function SC(t,e){t.qr.U(e.targetId),FC(t).mr(e)}function CC(t,e){t.qr.U(e),FC(t).yr(e)}function NC(e){e.qr=new Qw({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.Or.get(t)||null}}),FC(e).start(),e.Br.Sr()}function kC(t){return AC(t)&&!FC(t).tr()&&0<t.Or.size}function AC(t){return 0===t.$r.size}function RC(t){t.qr=void 0}function OC(n,r,i){return vo(this,void 0,void 0,function(){var e=this;return yo(this,function(t){switch(t.label){case 0:if(!uT(r))throw r;return n.$r.add(1),[4,IC(n)];case 1:return t.sent(),n.Br.set("Offline"),i=i||function(){return $E(n.localStore)},n.asyncQueue.enqueueRetryable(function(){return vo(e,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return Pm("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.$r.delete(1),[4,wC(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function PC(e,n){return n().catch(function(t){return OC(e,t,n)})}function DC(c){return vo(this,void 0,void 0,function(){var o,a,s,u;return yo(this,function(t){switch(t.label){case 0:a=UC(o=c),s=0<o.kr.length?o.kr[o.kr.length-1].batchId:-1,t.label=1;case 1:if(!(AC(o)&&o.kr.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(n=o.localStore,r=s,(i=n).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===r&&(r=-1),i._n.getNextMutationBatchAfterBatchId(t,r)}))];case 3:return null===(u=t.sent())?(0===o.kr.length&&a.ir(),[3,7]):(s=u.batchId,e=u,(n=o).kr.push(e),(n=UC(n)).er()&&n.pr&&n.Er(e.mutations),[3,6]);case 4:return u=t.sent(),[4,OC(o,u)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return xC(o)&&LC(o),[2]}var e,n,r,i})})}function xC(t){return AC(t)&&!UC(t).tr()&&0<t.kr.length}function LC(t){UC(t).start()}function MC(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=n,r?(e.$r.delete(2),[4,wC(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.$r.add(2),[4,IC(e)]);case 3:t.sent(),e.Br.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function FC(n){var t,e,r,i=this;return n.Ur||(n.Ur=(t=n.datastore,e=n.asyncQueue,r={Ii:function(n){return vo(this,void 0,void 0,function(){return yo(this,function(t){return n.Or.forEach(function(t,e){SC(n,t)}),[2]})})}.bind(null,n),Ri:function(e,n){return vo(this,void 0,void 0,function(){return yo(this,function(t){return RC(e),kC(e)?(e.Br.Nr(n),NC(e)):e.Br.set("Unknown"),[2]})})}.bind(null,n),_r:function(a,s,u){return vo(this,void 0,void 0,function(){var n,o;return yo(this,function(t){switch(t.label){case 0:if(a.Br.set("Online"),!(s instanceof Gw&&2===s.state&&s.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,a){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:e=a.cause,n=0,r=a.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Or.has(i)?[4,o.remoteSyncer.rejectListen(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Or.delete(i),o.qr.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(a,s)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Pm("RemoteStore","Failed to remove targets %s: %s ",s.targetIds.join(","),n),[4,OC(a,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(s instanceof Ww?a.qr.X(s):s instanceof Hw?a.qr.rt(s):a.qr.et(s),u.isEqual(Wm.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,$E(a.localStore)];case 8:return o=t.sent(),0<=u.compareTo(o)?[4,(i=u,(e=(r=a).qr.ut(i)).targetChanges.forEach(function(t,e){var n;0<t.resumeToken.approximateByteSize()&&(n=r.Or.get(e))&&r.Or.set(e,n.withResumeToken(t.resumeToken,i))}),e.targetMismatches.forEach(function(t){var e=r.Or.get(t);e&&(r.Or.set(t,e.withResumeToken(nb.EMPTY_BYTE_STRING,e.snapshotVersion)),CC(r,t),e=new _T(e.target,t,1,e.sequenceNumber),SC(r,e))}),r.remoteSyncer.applyRemoteEvent(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Pm("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,OC(a,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}.bind(null,n)},t.br(),new lC(e,t.Hi,t.credentials,t.R,r)),n.Mr.push(function(e){return vo(i,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e?(n.Ur.sr(),kC(n)?NC(n):n.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Ur.stop()];case 2:t.sent(),RC(n),t.label=3;case 3:return[2]}})})})),n.Ur}function UC(n){var t,e,r,i=this;return n.Qr||(n.Qr=(t=n.datastore,e=n.asyncQueue,r={Ii:function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){return UC(e).Ar(),[2]})})}.bind(null,n),Ri:function(e,n){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return n&&UC(e).pr?[4,function(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return Tw(n=i.code)&&n!==Nm.ABORTED?(e=r.kr.shift(),UC(r).sr(),[4,PC(r,function(){return r.remoteSyncer.rejectFailedWrite(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,DC(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return xC(e)&&LC(e),[2]}})})}.bind(null,n),Ir:function(o){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){for(e=UC(o),n=0,r=o.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]})})}.bind(null,n),Tr:function(r,i,o){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=r.kr.shift(),n=bT.from(e,i,o),[4,PC(r,function(){return r.remoteSyncer.applySuccessfulWrite(n)})];case 1:return t.sent(),[4,DC(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.br(),new fC(e,t.Hi,t.credentials,t.R,r)),n.Mr.push(function(e){return vo(i,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e?(n.Qr.sr(),[4,DC(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Qr.stop()];case 3:t.sent(),0<n.kr.length&&(Pm("RemoteStore","Stopping write stream with "+n.kr.length+" pending writes"),n.kr=[]),t.label=4;case 4:return[2]}})})})),n.Qr}var jC=(qC.createAndSchedule=function(t,e,n,r,i){return(i=new qC(t,e,Date.now()+n,r,i)).start(n),i},qC.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},qC.prototype.skipDelay=function(){return this.handleDelayElapsed()},qC.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new km(Nm.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},qC.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},qC.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},qC);function qC(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new XI,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}function VC(t,e){if(Dm("AsyncQueue",e+": "+t),uT(t))return new km(Nm.UNAVAILABLE,e+": "+t);throw t}function BC(){this.queries=new IE(k_,N_),this.onlineState="Unknown",this.Gr=new Set}var KC=(YC.emptySet=function(t){return new YC(t.comparator)},YC.prototype.has=function(t){return null!=this.keyedMap.get(t)},YC.prototype.get=function(t){return this.keyedMap.get(t)},YC.prototype.first=function(){return this.sortedSet.minKey()},YC.prototype.last=function(){return this.sortedSet.maxKey()},YC.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},YC.prototype.indexOf=function(t){return(t=this.keyedMap.get(t))?this.sortedSet.indexOf(t):-1},Object.defineProperty(YC.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),YC.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(t,e){return n(t),!1})},YC.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},YC.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},YC.prototype.isEqual=function(t){if(!(t instanceof YC))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},YC.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},YC.prototype.copy=function(t,e){var n=new YC;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},YC),WC=(QC.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);!n||0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Mm()},QC.prototype.jr=function(){var n=[];return this.Kr.inorderTraversal(function(t,e){n.push(e)}),n},QC),HC=(zC.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new zC(t,e,KC.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(zC.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),zC.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&N_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},zC),GC=function(){this.Wr=void 0,this.listeners=[]};function zC(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function QC(){this.Kr=new Sw(yb.comparator)}function YC(n){this.comparator=n?function(t,e){return n(t,e)||yb.comparator(t.key,e.key)}:function(t,e){return yb.comparator(t.key,e.key)},this.keyedMap=Fw,this.sortedSet=new Sw(this.comparator)}function XC(a,s){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:if(e=a,n=s.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new GC),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.onListen(n)];case 2:return o.Wr=t.sent(),[3,4];case 3:return o=VC(o=t.sent(),"Initialization of query '"+A_(s.query)+"' failed"),[2,void s.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(s),s.zr(e.onlineState),i.Wr&&s.Hr(i.Wr)&&$C(e),[2]}})})}function JC(a,s){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){return e=a,n=s.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(s))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.onUnlisten(n))]:[2]})})}function $C(t){t.Gr.forEach(function(t){t.next()})}var ZC=(aN.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new HC(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},aN.prototype.onError=function(t){this.Jr.error(t)},aN.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},aN.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},aN.prototype.Zr=function(t){if(0<t.docChanges.length)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},aN.prototype.no=function(t){t=HC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},aN),tN=(oN.prototype.io=function(){return"metadata"in this.payload},oN),eN=(iN.prototype.qn=function(t){return hI(this.R,t)},iN.prototype.Un=function(t){return t.metadata.exists?vI(this.R,t.document,!1):Db.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},iN.prototype.Qn=aI,iN),nN=(rN.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},rN.prototype.co=function(t){for(var e=new Map,n=new eN(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||qw()).add(a);e.set(c,h)}}return e},rN.prototype.complete=function(){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return[4,function(l,f,p,d){return vo(this,void 0,void 0,function(){var n,r,i,o,e,a,s,u,c,h;return yo(this,function(t){switch(t.label){case 0:for(n=l,r=qw(),i=xw,o=Uw,e=0,a=p;e<a.length;e++)s=a[e],u=f.qn(s.metadata.name),s.document&&(r=r.add(u)),i=i.insert(u,f.Un(s)),o=o.insert(u,f.Qn(s.metadata.readTime));return c=n.$n.newChangeBuffer({trackRemovals:!0}),[4,tS(n,S_(m_($m.fromString("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return ZE(e,c,i,Wm.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n.qe.removeMatchingKeysForTargetId(e,h.targetId).next(function(){return n.qe.addMatchingKeys(e,r,h.targetId)}).next(function(){return n.Mn.En(e,t)}).next(function(){return t})})})]}})})}(this.localStore,new eN(this.R),this.documents,this.ro.id)];case 1:e=t.sent(),n=this.co(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=qw()),vo(this,void 0,void 0,function(){var n,r;return yo(this,function(t){switch(t.label){case 0:return[4,tS(e,S_(xT(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=aI(i.readTime);return 0<=n.snapshotVersion.compareTo(e)?r.Qe.saveNamedQuery(t,i):(e=n.withResumeToken(nb.EMPTY_BYTE_STRING,e),r.Fn=r.Fn.insert(e.targetId,e),r.qe.updateTargetData(t,e).next(function(){return r.qe.removeMatchingKeysForTargetId(t,n.targetId)}).next(function(){return r.qe.addMatchingKeys(t,o,n.targetId)}).next(function(){return r.Qe.saveNamedQuery(t,i)}))})]}})})}(this.localStore,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new VE(Object.assign({},this.progress),e))]}})})},rN);function rN(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=sN(t)}function iN(t){this.R=t}function oN(t,e){this.payload=t,this.byteLength=e}function aN(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}function sN(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var uN=function(t){this.key=t},cN=function(t){this.key=t},hN=(Object.defineProperty(gN.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),gN.prototype._o=function(t,e){var a=this,s=e?e.mo:new WC,u=(e||this).fo,c=(e||this).mutatedKeys,h=u,l=!1,f=b_(this.query)&&u.size===this.query.limit?u.last():null,p=__(this.query)&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal(function(t,e){var n=u.get(t),r=R_(a.query,e)?e:null,i=!!n&&a.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||a.mutatedKeys.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data.isEqual(r.data)?i!==o&&(s.track({type:3,doc:r}),e=!0):a.yo(n,r)||(s.track({type:2,doc:r}),e=!0,(f&&0<a.lo(r,f)||p&&a.lo(r,p)<0)&&(l=!0)):!n&&r?(s.track({type:0,doc:r}),e=!0):n&&!r&&(s.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),b_(this.query)||__(this.query))for(;h.size>this.query.limit;){var n=b_(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);s.track({type:1,doc:n})}return{fo:h,mo:s,Nn:l,mutatedKeys:c}},gN.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},gN.prototype.applyChanges=function(t,e,n){var o=this,r=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var i=t.mo.jr();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.lo(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mm()}}var r,i}),this.po(n);var a=e?this.Eo():[],e=(n=0===this.ho.size&&this.current?1:0)!==this.ao;return this.ao=n,0!==i.length||e?{snapshot:new HC(this.query,t.fo,r,i,t.mutatedKeys,0==n,e,!1),To:a}:{To:a}},gN.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new WC,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},gN.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},gN.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},gN.prototype.Eo=function(){var e=this;if(!this.current)return[];var n=this.ho;this.ho=qw(),this.fo.forEach(function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))});var r=[];return n.forEach(function(t){e.ho.has(t)||r.push(new cN(t))}),this.ho.forEach(function(t){n.has(t)||r.push(new uN(t))}),r},gN.prototype.Ao=function(t){return this.uo=t.Bn,this.ho=qw(),t=this._o(t.documents),this.applyChanges(t,!0)},gN.prototype.Ro=function(){return HC.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},gN),lN=function(t,e,n){this.query=t,this.targetId=e,this.view=n},fN=function(t){this.key=t,this.bo=!1},pN=(Object.defineProperty(dN.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),dN);function dN(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new IE(k_,N_),this.Vo=new Map,this.So=new Set,this.Do=new Sw(yb.comparator),this.Co=new Map,this.No=new uS,this.xo={},this.Fo=new Map,this.ko=rE.Yt(),this.onlineState="Unknown",this.Oo=void 0}function gN(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=qw(),this.mutatedKeys=qw(),this.lo=O_(t),this.fo=new KC(this.lo)}function vN(i,o,a,s){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return i.$o=function(t,e,n){return function(r,i,o,a){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return(e=i.view._o(o)).Nn?[4,nS(r.localStore,i.query,!1).then(function(t){return t=t.documents,i.view._o(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=a&&a.targetChanges.get(i.targetId),n=i.view.applyChanges(e,r.isPrimaryClient,n),[2,(SN(r,i.targetId,n.To),n.snapshot)]}})})}(i,t,e,n)},[4,nS(i.localStore,o,!0)];case 1:return n=t.sent(),r=new hN(o,n.Bn),e=r._o(n.documents),n=Kw.createSynthesizedTargetChangeForCurrentChange(a,s&&"Offline"!==i.onlineState),n=r.applyChanges(e,i.isPrimaryClient,n),SN(i,a,n.To),r=new lN(o,a,r),[2,(i.Po.set(o,r),i.Vo.has(a)?i.Vo.get(a).push(o):i.Vo.set(a,[o]),n.snapshot)]}})})}function yN(f,p,d){return vo(this,void 0,void 0,function(){var a,l;return yo(this,function(t){switch(t.label){case 0:l=ON(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=l.localStore,s=p,c=i,h=Km.now(),o=s.reduce(function(t,e){return t.add(e.key)},qw()),c.persistence.runTransaction("Locally write mutations","readwrite",function(a){return c.Mn.pn(a,o).next(function(t){u=t;for(var e=[],n=0,r=s;n<r.length;n++){var i=r[n],o=function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field);null!=(a=L_(o.transform,a||null))&&(n=null==n?Ob.empty():n).set(o.field,a)}return n||null}(i,u.get(i.key));null!=o&&e.push(new cw(i.key,o,function a(t){var s=[];return Qm(t.fields||{},function(t,e){var n=new tb([t]);if(Rb(e))if(0===(e=a(e.mapValue).fields).length)s.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];s.push(n.child(o))}else s.push(n)}),new eb(s)}(o.toProto().mapValue),tw.exists(!0)))}return c._n.addMutationBatch(a,h,e,s)})}).then(function(t){return t.applyToLocalDocumentSet(u),{batchId:t.batchId,changes:u}}))];case 2:return a=t.sent(),l.sharedClientState.addPendingMutation(a.batchId),e=l,n=a.batchId,r=d,i=(i=(i=e.xo[e.currentUser.toKey()])||new Sw(qm)).insert(n,r),e.xo[e.currentUser.toKey()]=i,[4,NN(l,a.changes)];case 3:return t.sent(),[4,DC(l.remoteStore)];case 4:return t.sent(),[3,6];case 5:return l=VC(l=t.sent(),"Failed to persist write"),d.reject(l),[3,6];case 6:return[2]}var e,n,r,i,s,u,c,h,o})})}function mN(o,a){return vo(this,void 0,void 0,function(){var n,i;return yo(this,function(t){switch(t.label){case 0:n=o,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.localStore,u=e,c=(r=a).snapshotVersion,h=u.Fn,u.persistence.runTransaction("Apply remote event","readwrite-primary",function(a){var t=u.$n.newChangeBuffer({trackRemovals:!0});h=u.Fn;var s=[];r.targetChanges.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(s.push(u.qe.removeMatchingKeys(a,t.removedDocuments,e).next(function(){return u.qe.addMatchingKeys(a,t.addedDocuments,e)})),0<(i=t.resumeToken).approximateByteSize()&&(n=o.withResumeToken(i,c).withSequenceNumber(a.currentSequenceNumber),h=h.insert(e,n),r=o,i=t,Fm(0<(o=n).resumeToken.approximateByteSize()),(0===r.resumeToken.approximateByteSize()||3e8<=o.snapshotVersion.toMicroseconds()-r.snapshotVersion.toMicroseconds()||0<i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size)&&s.push(u.qe.updateTargetData(a,n))))});var e,n=xw;return r.documentUpdates.forEach(function(t,e){r.resolvedLimboDocuments.has(t)&&s.push(u.persistence.referenceDelegate.updateLimboDocument(a,t))}),s.push(ZE(a,t,r.documentUpdates,c,void 0).next(function(t){n=t})),c.isEqual(Wm.min())||(e=u.qe.getLastRemoteSnapshotVersion(a).next(function(t){return u.qe.setTargetsMetadata(a,a.currentSequenceNumber,c)}),s.push(e)),JI.waitFor(s).next(function(){return t.apply(a)}).next(function(){return u.Mn.En(a,n)}).next(function(){return n})}).then(function(t){return u.Fn=h,t}))];case 2:return i=t.sent(),a.targetChanges.forEach(function(t,e){(e=n.Co.get(e))&&(Fm(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),0<t.addedDocuments.size?e.bo=!0:0<t.modifiedDocuments.size?Fm(e.bo):0<t.removedDocuments.size&&(Fm(e.bo),e.bo=!1))}),[4,NN(n,i,a)];case 3:return t.sent(),[3,6];case 4:return[4,hE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,u,c,h})})}function bN(t,n,e){var r;((t=t).isPrimaryClient&&0===e||!t.isPrimaryClient&&1===e)&&(r=[],t.Po.forEach(function(t,e){(e=e.view.zr(n)).snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].zr(i)&&(o=!0)}),o&&$C(t)}(t.eventManager,n),r.length&&t.vo._r(r),t.onlineState=n,t.isPrimaryClient&&t.sharedClientState.setOnlineState(n))}function _N(o,a){return vo(this,void 0,void 0,function(){var n,r,i;return yo(this,function(t){switch(t.label){case 0:AC((n=o).remoteStore)||Pm("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})];case 2:return-1===(r=t.sent())?[2,void a.resolve()]:((i=n.Fo.get(r)||[]).push(a),n.Fo.set(r,i),[3,4]);case 3:return i=VC(i=t.sent(),"Initialization of waitForPendingWrites() operation failed"),a.reject(i),[3,4];case 4:return[2]}var e})})}function wN(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function IN(t,e,n){var r=t,i=r.xo[r.currentUser.toKey()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i)}function TN(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(t){e.No.containsKey(t)||EN(e,t)})}function EN(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(EC(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),CN(t))}function SN(t,e,n){for(var r,i,o,a=0,s=n;a<s.length;a++){var u=s[a];u instanceof uN?(t.No.addReference(u.key,e),r=t,o=void 0,i=(o=u.key).path.canonicalString(),r.Do.get(o)||r.So.has(i)||(Pm("SyncEngine","New document in limbo: "+o),r.So.add(i),CN(r))):u instanceof cN?(Pm("SyncEngine","Document no longer in limbo: "+u.key),t.No.removeReference(u.key,e),t.No.containsKey(u.key)||EN(t,u.key)):Mm()}}function CN(t){for(;0<t.So.size&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new yb($m.fromString(e)),e=t.ko.next();t.Co.set(e,new fN(n)),t.Do=t.Do.insert(n,e),TC(t.remoteStore,new _T(S_(m_(n.path)),e,2,Em.o))}}function NN(e,a,s){return vo(this,void 0,void 0,function(){var n,r,i,o;return yo(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Po.isEmpty()?[3,3]:(n.Po.forEach(function(t,e){o.push(n.$o(e,a,s).then(function(t){t&&(n.isPrimaryClient&&n.sharedClientState.updateQueryState(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=KE.Pn(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.vo._r(r),[4,function(u,c){return vo(this,void 0,void 0,function(){var r,e,n,i,o,a,s;return yo(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return JI.forEach(c,function(e){return JI.forEach(e.bn,function(t){return r.persistence.referenceDelegate.addReference(n,e.targetId,t)}).next(function(){return JI.forEach(e.vn,function(t){return r.persistence.referenceDelegate.removeReference(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!uT(e=t.sent()))throw e;return Pm("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)s=i[n],o=s.targetId,s.fromCache||(a=r.Fn.get(o),s=a.snapshotVersion,s=a.withLastLimboFreeSnapshotVersion(s),r.Fn=r.Fn.insert(o,s));return[2]}})})}(n.localStore,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function kN(p,d){return vo(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h,l,f;return yo(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(a=o[i],s=void 0,(u=e.Vo.get(a))&&0!==u.length?[4,tS(e.localStore,S_(u[0]))]:[3,7]):[3,13];case 2:s=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Po.get(l),[4,function(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,nS((e=r).localStore,i.query,!0)];case 1:return n=t.sent(),n=i.view.Ao(n),[2,(e.isPrimaryClient&&SN(e,i.targetId,n.To),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,rS(e.localStore,a)];case 8:return f=t.sent(),[4,tS(e.localStore,f)];case 9:return s=t.sent(),[4,vN(e,AN(f),a,!1)];case 10:t.sent(),t.label=11;case 11:n.push(s),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.vo._r(r),n)]}})})}function AN(t){return y_(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function RN(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=mN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=t;if((t=n.Co.get(e))&&t.bo)return qw().add(t.key);var r=qw();if(!(e=n.Vo.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var a=o[i],a=n.Po.get(a),r=r.unionWith(a.view.wo);return r}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(o,a,s){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return(e=o).sharedClientState.updateQueryState(a,"rejected",s),i=e.Co.get(a),(n=i&&i.key)?(r=(r=new Sw(yb.comparator)).insert(n,Db.newNoDocument(n,Wm.min())),i=qw().add(n),i=new Bw(Wm.min(),new Map,new Pw(qm),r,i),[4,mN(e,i)]):[3,2];case 1:return t.sent(),e.Do=e.Do.remove(n),e.Co.delete(a),CN(e),[3,4];case 2:return[4,eS(e.localStore,a,!1).then(function(){return TN(e,a,s)}).catch(hE)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.vo._r=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query;if(s=n.queries.get(s)){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&$C(n)}.bind(null,t.eventManager),t.vo.Mo=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.eventManager),t}function ON(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(o,a){return vo(this,void 0,void 0,function(){var n,r,i;return yo(this,function(t){switch(t.label){case 0:n=o,r=a.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.localStore,h=a,(l=e).persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r,e=h.batch.keys(),n=l.$n.newChangeBuffer({trackRemovals:!0}),i=l,o=t,a=n,s=(r=h).batch,u=s.keys(),c=JI.resolve();return u.forEach(function(n){c=c.next(function(){return a.getEntry(o,n)}).next(function(t){var e=r.docVersions.get(n);Fm(null!==e),t.version.compareTo(e)<0&&(s.applyToRemoteDocument(t,r),t.isValidDocument()&&a.addEntry(t,r.commitVersion))})}),c.next(function(){return i._n.removeMutationBatch(o,s)}).next(function(){return n.apply(t)}).next(function(){return l._n.performConsistencyCheck(t)}).next(function(){return l.Mn.pn(t,e)})}))];case 2:return i=t.sent(),IN(n,r,null),wN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,NN(n,i)];case 3:return t.sent(),[3,6];case 4:return[4,hE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,h,l})})}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=function(a,s,u){return vo(this,void 0,void 0,function(){var n,o;return yo(this,function(t){switch(t.label){case 0:n=a,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.localStore,r=s,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i._n.lookupMutationBatch(e,r).next(function(t){return Fm(null!==t),n=t.keys(),i._n.removeMutationBatch(e,t)}).next(function(){return i._n.performConsistencyCheck(e)}).next(function(){return i.Mn.pn(e,n)})}))];case 2:return o=t.sent(),IN(n,s,u),wN(n,s),n.sharedClientState.updateMutationState(s,"rejected",u),[4,NN(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,hE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}.bind(null,t),t}function PN(t,e,n){var r=t;(function(f,p,d){return vo(this,void 0,void 0,function(){var s,u,c,h,l;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return s=t.sent(),[4,(r=f.localStore,o=r,a=aI((i=s).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.Qe.getBundleMetadata(t,i.id)}).then(function(t){return!!t&&0<=t.createTime.compareTo(a)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d._completeWith({taskState:"Success",documentsLoaded:s.totalDocuments,bytesLoaded:s.totalBytes,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}))];case 4:return d._updateProgress(sN(s)),u=new nN(s,f.localStore,p.R),[4,p.Lo()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,u.oo(c)]:[3,10];case 7:return(h=t.sent())&&d._updateProgress(h),[4,p.Lo()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return l=t.sent(),[4,NN(f,l.wn,void 0)];case 12:return t.sent(),[4,(r=f.localStore,e=s,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.Qe.saveBundleMetadata(t,e)}))];case 13:return t.sent(),d._completeWith(l.progress),[3,15];case 14:return xm("SyncEngine","Loading bundle failed with "+(l=t.sent())),d._failWith(l),[3,15];case 15:return[2]}var e,n,r,i,o,a})})})(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var DN,xN,LN=(BN.prototype.initialize=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.R=oC(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Qo(e),[2]}})})},BN.prototype.Uo=function(t){return null},BN.prototype.Qo=function(t){return XE(this.persistence,new WE,t.initialUser,this.R)},BN.prototype.qo=function(t){return new dS(vS.bs,this.R)},BN.prototype.Bo=function(t){return new jS},BN.prototype.terminate=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},BN),MN=(po(VN,xN=LN),VN.prototype.initialize=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,xN.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=RE(t),r=Wm.min(),t.Ot({index:UI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=kT(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.On=t})]})})}(this.localStore)];case 2:return t.sent(),[4,this.Ko.initialize(this,e)];case 3:return t.sent(),[4,ON(this.Ko.syncEngine)];case 4:return t.sent(),[4,DC(this.Ko.remoteStore)];case 5:return t.sent(),[2]}})})},VN.prototype.Qo=function(t){return XE(this.persistence,new WE,t.initialUser,this.R)},VN.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new pE(e,t.asyncQueue)},VN.prototype.qo=function(t){var e=qE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?zT.withCacheSize(this.cacheSizeBytes):zT.DEFAULT;return new ME(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,rC(),iC(),this.R,this.sharedClientState,!!this.forceOwnership)},VN.prototype.Bo=function(t){return new jS},VN),FN=(po(qN,DN=MN),qN.prototype.initialize=function(r){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:return[4,DN.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Ko.syncEngine,this.sharedClientState instanceof US?(this.sharedClientState.syncEngine={ui:function(s,u,c,h){return vo(this,void 0,void 0,function(){var o,a;return yo(this,function(t){switch(t.label){case 0:return[4,(e=(o=s).localStore,n=u,i=(r=e)._n,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.jt(e,n).next(function(t){return t?r.Mn.pn(e,t):JI.resolve(null)})}))];case 1:return null===(a=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,DC(o.remoteStore)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(IN(o,u,h||null),wN(o,u),o.localStore._n.Gt(u)):Mm(),t.label=4;case 4:return[4,NN(o,a)];case 5:return t.sent(),[3,7];case 6:Pm("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}.bind(null,e),ai:function(i,o,a,s){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return(e=i).Oo?(Pm("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Vo.has(o))return[3,8];switch(a){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,iS(e.localStore)];case 3:return n=t.sent(),r=Bw.createSynthesizedRemoteEventForCurrentChange(o,"current"===a),[4,NN(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,eS(e.localStore,o,!0)];case 6:return t.sent(),TN(e,o,s),[3,8];case 7:Mm(),t.label=8;case 8:return[2]}})})}.bind(null,e),hi:function(c,h,l){return vo(this,void 0,void 0,function(){var n,e,r,i,o,a,s,u;return yo(this,function(t){switch(t.label){case 0:if(!(n=RN(c)).Oo)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Vo.has(r)?(Pm("SyncEngine","Adding an already active target "+r),[3,5]):[4,rS(n.localStore,r)]):[3,6];case 2:return i=t.sent(),[4,tS(n.localStore,i)];case 3:return o=t.sent(),[4,vN(n,AN(i),o.targetId,!1)];case 4:t.sent(),TC(n.remoteStore,o),t.label=5;case 5:return e++,[3,1];case 6:a=function(e){return yo(this,function(t){switch(t.label){case 0:return n.Vo.has(e)?[4,eS(n.localStore,e,!1).then(function(){EC(n.remoteStore,e),TN(n,e)}).catch(hE)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},s=0,u=l,t.label=7;case 7:return s<u.length?(u=u[s],[5,a(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return s++,[3,7];case 10:return[2]}})})}.bind(null,e),fn:function(t){return t.localStore.persistence.fn()}.bind(null,e),ci:function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){return[2,iS((e=n).localStore).then(function(t){return NN(e,t)})]})})}.bind(null,e)},[4,this.sharedClientState.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.He(function(e){return vo(n,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,function(h,l){return vo(this,void 0,void 0,function(){var r,e,i,o,a,s,u,c;return yo(this,function(t){switch(t.label){case 0:return RN(r=h),ON(r),!0!==l||!0===r.Oo?[3,3]:(e=r.sharedClientState.getAllActiveQueryTargets(),[4,kN(r,e.toArray())]);case 1:return i=t.sent(),r.Oo=!0,[4,MC(r.remoteStore,!0)];case 2:for(t.sent(),o=0,a=i;o<a.length;o++)s=a[o],TC(r.remoteStore,s);return[3,7];case 3:return!1!==l||!1===r.Oo?[3,7]:(u=[],c=Promise.resolve(),r.Vo.forEach(function(t,e){r.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then(function(){return TN(r,e),eS(r.localStore,e,!0)}),EC(r.remoteStore,e)}),[4,c]);case 4:return t.sent(),[4,kN(r,u)];case 5:return t.sent(),(n=r).Co.forEach(function(t,e){EC(n.remoteStore,e)}),n.No.ts(),n.Co=new Map,n.Do=new Sw(yb.comparator),r.Oo=!1,[4,MC(r.remoteStore,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}(this.Ko.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},qN.prototype.Bo=function(t){var e=rC();if(!US.yt(e))throw new km(Nm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=qE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new US(e,t.asyncQueue,n,t.clientId,t.initialUser)},qN),UN=(jN.prototype.initialize=function(n,r){return vo(this,void 0,void 0,function(){var e=this;return yo(this,function(t){switch(t.label){case 0:return this.localStore?[3,2]:(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return bN(e.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=function(i,o){return vo(this,void 0,void 0,function(){var n,r;return yo(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Pm("SyncEngine","User change. New user:",o.toKey()),[4,JE(n.localStore,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Fo.forEach(function(t){t.forEach(function(t){t.reject(new km(Nm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Fo.clear(),n.sharedClientState.handleUserChange(o,r.removedBatchIds,r.addedBatchIds),[4,NN(n,r.Ln)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}.bind(null,this.syncEngine),[4,MC(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},jN.prototype.createEventManager=function(t){return new BC},jN.prototype.createDatastore=function(t){var e=oC(t.databaseInfo.databaseId),n=(n=t.databaseInfo,new WS(n));return t=t.credentials,new pC(t,n,e)},jN.prototype.createRemoteStore=function(t){var e=this;return new aC(this.localStore,this.datastore,t.asyncQueue,function(t){return bN(e.syncEngine,t,0)},t=new(VS.yt()?VS:qS))},jN.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,a=t.initialUser,t=t.maxConcurrentLimboResolutions,e=e,t=new pN(n,r,i,o,a,t),e&&(t.Oo=!0),t;var n,r,i,o,a},jN.prototype.terminate=function(){return function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=n,Pm("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,IC(e)];case 1:return t.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},jN);function jN(){}function qN(t,e){var n=this;return(n=DN.call(this,t,e,!1)||this).Ko=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function VN(t,e,n){var r=this;return(r=xN.call(this)||this).Ko=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function BN(){this.synchronizeTabs=!1}function KN(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var WN=(ZN.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},ZN.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},ZN.prototype.Wo=function(){this.muted=!0},ZN.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},ZN),HN=($N.prototype.close=function(){return this.Go.cancel()},$N.prototype.getMetadata=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){return[2,this.metadata.promise]})})},$N.prototype.Lo=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},$N.prototype.Ho=function(){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return[4,this.Jo()];case 1:return null===(e=t.sent())?[2,null]:(r=this.zo.decode(e),n=Number(r),isNaN(n)&&this.Yo("length string ("+r+") is not valid number"),[4,this.Xo(n)]);case 2:return r=t.sent(),[2,new tN(JSON.parse(r),e.length+n)]}})})},$N.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},$N.prototype.Jo=function(){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},$N.prototype.Xo=function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.tc()]:[3,3];case 1:t.sent()&&this.Yo("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},$N.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},$N.prototype.tc=function(){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,this.Go.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},$N),GN=(JN.prototype.lookup=function(r){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new km(Nm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(a,s){return vo(this,void 0,void 0,function(){var r,e,n,i,o;return yo(this,function(t){switch(t.label){case 0:return e=pI((r=a).R)+"/documents",n={documents:s.map(function(t){return cI(r.R,t)})},[4,r.Oi("BatchGetDocuments",e,n)];case 1:return n=t.sent(),i=new Map,n.forEach(function(t){var e,n,t=(n=r.R,"found"in t?function(t,e){Fm(!!e.found),e.found.name,e.found.updateTime;var n=hI(t,e.found.name),t=aI(e.found.updateTime),e=new Ob({mapValue:{fields:e.found.fields}});return Db.newFoundDocument(n,t,e)}(n,t):"missing"in t?(e=n,Fm(!!(n=t).missing),Fm(!!n.readTime),e=hI(e,n.missing),n=aI(n.readTime),Db.newNoDocument(e,n)):Mm());i.set(t.key.toString(),t)}),o=[],[2,(s.forEach(function(t){Fm(!!(t=i.get(t.toString()))),o.push(t)}),o)]}})})}(this.datastore,r)];case 1:return[2,((e=t.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},JN.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},JN.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},JN.prototype.delete=function(t){this.write(new bw(t,this.precondition(t))),this.writtenDocs.add(t.toString())},JN.prototype.commit=function(){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=yb.fromPath(e),n.mutations.push(new _w(e,n.precondition(e)))}),[4,function(i,o){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return n=pI((e=i).R)+"/documents",r={writes:o.map(function(t){return yI(e.R,t)})},[4,e.Ni("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},JN.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Mm();e=Wm.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new km(Nm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},JN.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?tw.updateTime(e):tw.none()},JN.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(this.writtenDocs.has(t.toString())||!e)return tw.exists(!0);if(e.isEqual(Wm.min()))throw new km(Nm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tw.updateTime(e)},JN.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},JN.prototype.ensureCommitNotCalled=function(){},JN),zN=(XN.prototype.run=function(){this.nc()},XN.prototype.nc=function(){var t=this;this.Zi.ji(function(){return vo(t,void 0,void 0,function(){var e,n,r=this;return yo(this,function(t){return e=new GN(this.datastore),(n=this.sc(e))&&n.then(function(t){r.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){r.deferred.resolve(t)}).catch(function(t){r.ic(t)})})}).catch(function(t){r.ic(t)}),[2]})})})},XN.prototype.sc=function(t){try{var e=this.updateFunction(t);return!db(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},XN.prototype.ic=function(t){var e=this;0<this.ec&&this.rc(t)?(--this.ec,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},XN.prototype.rc=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!Tw(t))},XN),QN=(YN.prototype.getConfiguration=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},YN.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},YN.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new km(Nm.FAILED_PRECONDITION,"The client has already been terminated.")},YN.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new XI;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return e=VC(t.sent(),"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},YN);function YN(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=yS.UNAUTHENTICATED,this.clientId=Um.u(),this.credentialListener=function(){},this.receivedInitialUser=new XI,this.credentials.setChangeListener(function(t){Pm("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}function XN(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new hC(this.asyncQueue,"transaction_retry")}function JN(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function $N(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new XI,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function ZN(t){this.observer=t,this.muted=!1}function tk(i,o){return vo(this,void 0,void 0,function(){var e,n,r=this;return yo(this,function(t){switch(t.label){case 0:return i.asyncQueue.verifyOperationInProgress(),Pm("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=t.sent(),[4,o.initialize(e)];case 2:return t.sent(),n=e.initialUser,i.setCredentialChangeListener(function(e){n.isEqual(e)||(n=e,i.asyncQueue.enqueueRetryable(function(){return vo(r,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,JE(o.localStore,e)];case 1:return t.sent(),[2]}})})}))}),o.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=o,[2]}})})}function ek(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return r.asyncQueue.verifyOperationInProgress(),[4,nk(r)];case 1:return e=t.sent(),Pm("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.setCredentialChangeListener(function(t){return r.asyncQueue.enqueueRetryable(function(){return function(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return(e=r).asyncQueue.verifyOperationInProgress(),Pm("RemoteStore","RemoteStore received new credentials"),n=AC(e),e.$r.add(3),[4,IC(e)];case 1:return t.sent(),n&&e.Br.set("Unknown"),[4,e.remoteSyncer.handleCredentialChange(i)];case 2:return t.sent(),e.$r.delete(3),[4,wC(e)];case 3:return t.sent(),[2]}})})}(i.remoteStore,t)})}),r.onlineComponents=i,[2]}})})}function nk(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Pm("FirestoreClient","Using default OfflineComponentProvider"),[4,tk(e,new LN)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function rk(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Pm("FirestoreClient","Using default OnlineComponentProvider"),[4,ek(e,new UN)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function ik(t){return nk(t).then(function(t){return t.persistence})}function ok(t){return nk(t).then(function(t){return t.localStore})}function ak(t){return rk(t).then(function(t){return t.remoteStore})}function sk(t){return rk(t).then(function(t){return t.syncEngine})}function uk(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,rk(r)];case 1:return e=t.sent(),[2,((n=e.eventManager).onListen=function(a,s){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:return e=RN(a),(o=e.Po.get(s))?(n=o.targetId,e.sharedClientState.addLocalQueryTarget(n),r=o.view.Ro(),[3,4]):[3,1];case 1:return[4,tS(e.localStore,S_(s))];case 2:return i=t.sent(),o=e.sharedClientState.addLocalQueryTarget(i.targetId),n=i.targetId,[4,vN(e,s,n,"current"===o)];case 3:r=t.sent(),e.isPrimaryClient&&TC(e.remoteStore,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.syncEngine),n.onUnlisten=function(i,o){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return n=(e=i).Po.get(o),1<(r=e.Vo.get(n.targetId)).length?[2,(e.Vo.set(n.targetId,r.filter(function(t){return!N_(t,o)})),void e.Po.delete(o))]:e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)?[3,2]:[4,eS(e.localStore,n.targetId,!1).then(function(){e.sharedClientState.clearQueryState(n.targetId),EC(e.remoteStore,n.targetId),TN(e,n.targetId)}).catch(hE)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return TN(e,n.targetId),[4,eS(e.localStore,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.syncEngine),n)]}})})}function ck(n,r,i){var t=this;void 0===i&&(i={});var o=new XI;return n.asyncQueue.enqueueAndForget(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,a){var t=new WN({next:function(t){r.enqueueAndForget(function(){return JC(n,s)});var e=t.docs.has(i);!e&&t.fromCache?a.reject(new km(Nm.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?a.reject(new km(Nm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(t)},error:function(t){return a.reject(t)}}),s=new ZC(m_(i.path),t,{includeMetadataChanges:!0,so:!0});return XC(n,s)},[4,uk(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.asyncQueue,r,i,o])]}})})}),o.promise}function hk(n,r,i){var t=this;void 0===i&&(i={});var o=new XI;return n.asyncQueue.enqueueAndForget(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new WN({next:function(t){n.enqueueAndForget(function(){return JC(e,a)}),t.fromCache&&"server"===r.source?i.reject(new km(Nm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),a=new ZC(t,o,{includeMetadataChanges:!0,so:!0});return XC(e,a)},[4,uk(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.asyncQueue,r,i,o])]}})})}),o.promise}function lk(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var fk=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},pk=(Object.defineProperty(Tk.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Tk.prototype.isEqual=function(t){return t instanceof Tk&&t.projectId===this.projectId&&t.database===this.database},Tk),dk=new Map,gk=(Ik.prototype.getToken=function(){return Promise.resolve(null)},Ik.prototype.invalidateToken=function(){},Ik.prototype.setChangeListener=function(t){(this.changeListener=t)(yS.UNAUTHENTICATED)},Ik.prototype.removeChangeListener=function(){this.changeListener=null},Ik),vk=(wk.prototype.getToken=function(){var e=this,n=this.cc,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.cc!==n?(Pm("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Fm("string"==typeof t.accessToken),new lk(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},wk.prototype.invalidateToken=function(){this.forceRefresh=!0},wk.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},wk.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},wk.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Fm(null===t||"string"==typeof t),new yS(t)},wk),yk=(Object.defineProperty(_k.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),_k),mk=(bk.prototype.getToken=function(){return Promise.resolve(new yk(this.ac,this.hc,this.lc))},bk.prototype.setChangeListener=function(t){t(yS.FIRST_PARTY)},bk.prototype.removeChangeListener=function(){},bk.prototype.invalidateToken=function(){},bk);function bk(t,e,n){this.ac=t,this.hc=e,this.lc=n}function _k(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=yS.FIRST_PARTY}function wk(t){var e=this;this.oc=null,this.currentUser=yS.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}function Ik(){this.changeListener=null}function Tk(t,e){this.projectId=t,this.database=e||"(default)"}function Ek(t,e,n){if(!n)throw new km(Nm.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Sk(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new km(Nm.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ck(t,e,n,r){if(!0===e&&!0===r)throw new km(Nm.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Nk(t){if(!yb.isDocumentKey(t))throw new km(Nm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function kk(t){if(yb.isDocumentKey(t))throw new km(Nm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ak(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Mm();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function Rk(t,e){if((t="_delegate"in t?t._delegate:t)instanceof e)return t;if(e.name===t.constructor.name)throw new km(Nm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=Ak(t),new km(Nm.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function Ok(t,e){if(e<=0)throw new km(Nm.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Pk,Dk=(Bk.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},Bk),xk=(Object.defineProperty(Vk.prototype,"app",{get:function(){if(!this._app)throw new km(Nm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(Vk.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(Vk.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),Vk.prototype._setSettings=function(t){if(this._settingsFrozen)throw new km(Nm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dk(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new gk;switch(t.type){case"gapi":var e=t.client;return Fm(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new mk(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new km(Nm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},Vk.prototype._getSettings=function(){return this._settings},Vk.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},Vk.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},Vk.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},Vk.prototype._terminate=function(){return(t=dk.get(this))&&(Pm("ComponentProvider","Removing Datastore"),dk.delete(this),t.terminate()),Promise.resolve();var t},Vk),Lk=(Object.defineProperty(qk.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(qk.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(qk.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(qk.prototype,"parent",{get:function(){return new Fk(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),qk.prototype.withConverter=function(t){return new qk(this.firestore,t,this._key)},qk),Mk=(jk.prototype.withConverter=function(t){return new jk(this.firestore,t,this._query)},jk),Fk=(po(Uk,Pk=Mk),Object.defineProperty(Uk.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(Uk.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(Uk.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Lk(this.firestore,null,new yb(t))},enumerable:!1,configurable:!0}),Uk.prototype.withConverter=function(t){return new Uk(this.firestore,t,this._path)},Uk);function Uk(t,e,n){var r=this;return(r=Pk.call(this,t,e,m_(n))||this)._path=n,r.type="collection",r}function jk(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}function qk(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}function Vk(t,e){this._persistenceKey="(lite)",this._settings=new Dk({}),this._settingsFrozen=!1,t instanceof pk?(this._databaseId=t,this._credentials=new gk):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new km(Nm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pk(t.options.projectId)}(t),this._credentials=new vk(e))}function Bk(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new km(Nm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new km(Nm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ck("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function Kk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ga(t),Ek("collection","path",e),t instanceof xk)return kk(n=$m.fromString.apply($m,_o([e],r))),new Fk(t,null,n);if(!(t instanceof Lk||t instanceof Fk))throw new km(Nm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kk(n=$m.fromString.apply($m,_o([t.path],r)).child($m.fromString(e))),new Fk(t.firestore,null,n)}function Wk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ga(t),Ek("doc","path",e=1===arguments.length?Um.u():e),t instanceof xk)return Nk(n=$m.fromString.apply($m,_o([e],r))),new Lk(t,null,new yb(n));if(!(t instanceof Lk||t instanceof Fk))throw new km(Nm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Nk(n=t._path.child($m.fromString.apply($m,_o([e],r)))),new Lk(t.firestore,t instanceof Fk?t._converter:null,new yb(n))}function Hk(t,e){return t=ga(t),e=ga(e),(t instanceof Lk||t instanceof Fk)&&(e instanceof Lk||e instanceof Fk)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Gk(t,e){return t=ga(t),e=ga(e),t instanceof Mk&&e instanceof Mk&&t.firestore===e.firestore&&N_(t._query,e._query)&&t._converter===e._converter}var zk=(Object.defineProperty(Qk.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),Qk.prototype.enqueueAndForget=function(t){this.enqueue(t)},Qk.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},Qk.prototype.enterRestrictedMode=function(){var t;this.wc||(this.wc=!0,(t=iC())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec))},Qk.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},Qk.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},Qk.prototype.Ac=function(){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:if(0===this.dc.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return t.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!uT(e=t.sent()))throw e;return Pm("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.dc.length&&this.Zi.ji(function(){return n.Ac()}),t.label=5;case 5:return[2]}})})},Qk.prototype.Ic=function(t){var r=this,e=this.fc.then(function(){return r.yc=!0,t().catch(function(t){throw r.mc=t,r.yc=!1,Dm("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",n=e.stack?e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack:n)),t;var e,n}).then(function(t){return r.yc=!1,t})});return this.fc=e},Qk.prototype.enqueueAfterDelay=function(t,e,n){var r=this;return this.Tc(),-1<this.gc.indexOf(t)&&(e=0),n=jC.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)}),this._c.push(n),n},Qk.prototype.Tc=function(){this.mc&&Mm()},Qk.prototype.verifyOperationInProgress=function(){},Qk.prototype.bc=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,e=this.fc];case 1:t.sent(),t.label=2;case 2:if(e!==this.fc)return[3,0];t.label=3;case 3:return[2]}})})},Qk.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},Qk.prototype.Pc=function(r){var i=this;return this.bc().then(function(){i._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var t=0,e=i._c;t<e.length;t++){var n=e[t];if(n.skipDelay(),"all"!==r&&n.timerId===r)break}return i.bc()})},Qk.prototype.Vc=function(t){this.gc.push(t)},Qk.prototype.Rc=function(t){t=this._c.indexOf(t),this._c.splice(t,1)},Qk);function Qk(){var e=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new hC(this,"async_queue_retry"),this.Ec=function(){var t=iC();t&&Pm("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=iC();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ec)}function Yk(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var Xk,Jk=(tA.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},tA.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},tA.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},tA.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},tA.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},tA.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},tA),$k=(po(Zk,Xk=xk),Zk.prototype._terminate=function(){return this._firestoreClient||nA(this),this._firestoreClient.terminate()},Zk);function Zk(t,e){var n=this;return(n=Xk.call(this,t,e)||this)._queue=new zk,n._persistenceKey="name"in t?t.name:"[DEFAULT]",n}function tA(){this._progressObserver={},this._taskCompletionResolver=new XI,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function eA(t){return t._firestoreClient||nA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nA(t){var e,n,r,i=t._freezeSettings(),i=(e=t._databaseId,n=(null===(r=t._app)||void 0===r?void 0:r.options.appId)||"",r=t._persistenceKey,new fk(e,n,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling));t._firestoreClient=new QN(t._credentials,t._queue,i)}function rA(n,r,i){var t=this,o=new XI;return n.asyncQueue.enqueue(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,tk(n,i)];case 1:return t.sent(),[4,ek(n,r)];case 2:return t.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(t=e=t.sent()).name?t.code===Nm.FAILED_PRECONDITION||t.code===Nm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),o.reject(e),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function iA(t){if(t._initialized||t._terminated)throw new km(Nm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var oA=(vA.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},vA),aA=(gA.fromBase64String=function(t){try{return new gA(nb.fromBase64String(t))}catch(t){throw new km(Nm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},gA.fromUint8Array=function(t){return new gA(nb.fromUint8Array(t))},gA.prototype.toBase64=function(){return this._byteString.toBase64()},gA.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},gA.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},gA.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},gA),sA=function(t){this._methodName=t},uA=(Object.defineProperty(dA.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(dA.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),dA.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},dA.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},dA.prototype._compareTo=function(t){return qm(this._lat,t._lat)||qm(this._long,t._long)},dA),cA=/^__.*__$/,hA=(pA.prototype.toMutation=function(t,e){return null!==this.fieldMask?new cw(t,this.data,this.fieldMask,e,this.fieldTransforms):new uw(t,this.data,e,this.fieldTransforms)},pA),lA=(fA.prototype.toMutation=function(t,e){return new cw(t,this.data,this.fieldMask,e,this.fieldTransforms)},fA);function fA(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function pA(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function dA(t,e){if(!isFinite(t)||t<-90||90<t)throw new km(Nm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new km(Nm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}function gA(t){this._byteString=t}function vA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new km(Nm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tb(t)}function yA(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Mm()}}var mA=(Object.defineProperty(wA.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(wA.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),wA.prototype.Cc=function(t){return new wA(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},wA.prototype.Nc=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.Cc({path:e,xc:!1})).Fc(t),e},wA.prototype.kc=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t);return(t=this.Cc({path:t,xc:!1})).Sc(),t},wA.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},wA.prototype.$c=function(t){return XA(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},wA.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},wA.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},wA.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(yA(this.Dc)&&cA.test(t))throw this.$c('Document fields cannot begin and end with "__"')},wA),bA=(_A.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new mA({Dc:t,methodName:e,Lc:n,path:tb.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},_A);function _A(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||oC(t)}function wA(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function IA(t){var e=t._freezeSettings(),n=oC(t._databaseId);return new bA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TA(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);GA("Data must be an object, but it was:",a,r);var s,u,r=WA(r,a);if(o.merge)s=new eb(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=zA(e,l[h],n);if(!a.contains(f))throw new km(Nm.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");JA(c,f)||c.push(f)}s=new eb(c),u=a.fieldTransforms.filter(function(t){return s.covers(t.field)})}else s=null,u=a.fieldTransforms;return new hA(new Ob(r),s,u)}var EA,SA=(po(CA,EA=sA),CA.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw 1===t.Dc?t.$c(this._methodName+"() can only appear at the top level of your update data"):t.$c(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},CA.prototype.isEqual=function(t){return t instanceof CA},CA);function CA(){return null!==EA&&EA.apply(this,arguments)||this}function NA(t,e,n){return new mA({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var kA,AA,RA,OA,PA=(po(jA,OA=sA),jA.prototype._toFieldTransform=function(t){return new Z_(t.path,new U_)},jA.prototype.isEqual=function(t){return t instanceof jA},jA),DA=(po(UA,RA=sA),UA.prototype._toFieldTransform=function(t){var e=NA(this,t,!0),n=this.qc.map(function(t){return KA(t,e)}),n=new j_(n);return new Z_(t.path,n)},UA.prototype.isEqual=function(t){return this===t},UA),xA=(po(FA,AA=sA),FA.prototype._toFieldTransform=function(t){var e=NA(this,t,!0),n=this.qc.map(function(t){return KA(t,e)}),n=new W_(n);return new Z_(t.path,n)},FA.prototype.isEqual=function(t){return this===t},FA),LA=(po(MA,kA=sA),MA.prototype._toFieldTransform=function(t){var e=new Q_(t.R,x_(t.R,this.Uc));return new Z_(t.path,e)},MA.prototype.isEqual=function(t){return this===t},MA);function MA(t,e){var n=this;return(n=kA.call(this,t)||this).Uc=e,n}function FA(t,e){var n=this;return(n=AA.call(this,t)||this).qc=e,n}function UA(t,e){var n=this;return(n=RA.call(this,t)||this).qc=e,n}function jA(){return null!==OA&&OA.apply(this,arguments)||this}function qA(t,r,i,e){var o=t.Bc(1,r,i);GA("Data must be an object, but it was:",o,e);var a=[],s=Ob.empty();return Qm(e,function(t,e){var n=YA(r,t,i);e=ga(e),t=o.kc(n),e instanceof SA?a.push(n):null!=(t=KA(e,t))&&(a.push(n),s.set(n,t))}),e=new eb(a),new lA(s,e,o.fieldTransforms)}function VA(t,e,n,r,i,o){var a=t.Bc(1,e,n),s=[zA(e,r,n)],u=[i];if(o.length%2!=0)throw new km(Nm.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(zA(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=Ob.empty(),g=s.length-1;0<=g;--g)JA(p,s[g])||(h=s[g],l=ga(u[g]),f=a.kc(h),l instanceof SA?p.push(h):null!=(f=KA(l,f))&&(p.push(h),d.set(h,f)));return i=new eb(p),new lA(d,i,a.fieldTransforms)}function BA(t,e,n,r){return void 0===r&&(r=!1),KA(n,t.Bc(r?4:3,e))}function KA(a,t){if(HA(a=ga(a)))return GA("Unsupported field value:",t,a),WA(a,t);if(a instanceof sA)return function(t,e){if(!yA(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");(t=t._toFieldTransform(e))&&e.fieldTransforms.push(t)}(a,t),null;if(void 0===a&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.xc&&4!==t.Dc)throw t.$c("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=a;r<i.length;r++){var o=KA(i[r],t.Oc(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===(t=ga(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return x_(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Km.fromDate(t);return{timestampValue:iI(e.R,n)}}if(t instanceof Km)return n=new Km(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:iI(e.R,n)};if(t instanceof uA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof aA)return{bytesValue:oI(e.R,t._byteString)};if(t instanceof Lk){var n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:sI(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Ak(t))}(a,t)}function WA(t,n){var r={};return Ym(t)?n.path&&0<n.path.length&&n.fieldMask.push(n.path):Qm(t,function(t,e){null!=(e=KA(e,n.Nc(t)))&&(r[t]=e)}),{mapValue:{fields:r}}}function HA(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Km||t instanceof uA||t instanceof aA||t instanceof Lk||t instanceof sA)}function GA(t,e,n){if(!HA(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=Ak(n))?e.$c(t+" a custom object"):e.$c(t+" "+n);var r}function zA(t,e,n){if((e=ga(e))instanceof oA)return e._internalPath;if("string"==typeof e)return YA(t,e);throw XA("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var QA=new RegExp("[~\\*/\\[\\]]");function YA(e,n,r){if(0<=n.search(QA))throw XA("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(oA.bind.apply(oA,_o([void 0],n.split(".")))))._internalPath}catch(t){throw XA("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function XA(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,e="Function "+e+"() called with invalid data";return n&&(e+=" (via `toFirestore()`)"),n="",(o||a)&&(n+=" (found",o&&(n+=" in field "+r),a&&(n+=" in document "+i),n+=")"),new km(Nm.INVALID_ARGUMENT,(e+=". ")+t+n)}function JA(t,e){return t.some(function(t){return t.isEqual(e)})}var $A,ZA=(Object.defineProperty(nR.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(nR.prototype,"ref",{get:function(){return new Lk(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),nR.prototype.exists=function(){return null!==this._document},nR.prototype.data=function(){if(this._document){if(this._converter){var t=new tR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},nR.prototype.get=function(t){if(this._document&&null!==(t=this._document.data.field(rR("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t)},nR),tR=(po(eR,$A=ZA),eR.prototype.data=function(){return $A.prototype.data.call(this)},eR);function eR(){return null!==$A&&$A.apply(this,arguments)||this}function nR(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}function rR(t,e){return"string"==typeof e?YA(t,e):(e instanceof oA?e:e._delegate)._internalPath}var iR,oR,aR=(pR.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},pR),sR=(po(fR,oR=ZA),fR.prototype.exists=function(){return oR.prototype.exists.call(this)},fR.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new uR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},fR.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document&&null!==(t=this._document.data.field(rR("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t,e.serverTimestamps)},fR),uR=(po(lR,iR=sR),lR.prototype.data=function(t){return void 0===t&&(t={}),iR.prototype.data.call(this,t)},lR),cR=(Object.defineProperty(hR.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(hR.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(hR.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),hR.prototype.forEach=function(e,n){var r=this;this._snapshot.docs.forEach(function(t){e.call(n,new uR(r._firestore,r._userDataWriter,t.key,t,new aR(r._snapshot.mutatedKeys.has(t.key),r._snapshot.fromCache),r.query._converter))})},hR.prototype.docChanges=function(t){if((t=!!(t=void 0===t?{}:t).includeMetadataChanges)&&this._snapshot.excludesMetadataChanges)throw new km(Nm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,e){if(i._snapshot.oldDocs.isEmpty()){var n=0;return i._snapshot.docChanges.map(function(t){var e=new uR(i._firestore,i._userDataWriter,t.doc.key,t.doc,new aR(i._snapshot.mutatedKeys.has(t.doc.key),i._snapshot.fromCache),i.query._converter);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new uR(i._firestore,i._userDataWriter,t.doc.key,t.doc,new aR(i._snapshot.mutatedKeys.has(t.doc.key),i._snapshot.fromCache),i.query._converter),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mm()}}(),doc:e,oldIndex:n,newIndex:r}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},hR);function hR(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new aR(r.hasPendingWrites,r.fromCache),this.query=n}function lR(){return null!==iR&&iR.apply(this,arguments)||this}function fR(t,e,n,r,i,o){var a=this;return(a=oR.call(this,t,e,n,r,o)||this)._firestore=t,a._firestoreImpl=t,a.metadata=i,a}function pR(t,e){this.hasPendingWrites=t,this.fromCache=e}function dR(t,e){return t instanceof sR&&e instanceof sR?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof cR&&e instanceof cR&&t._firestore===e._firestore&&Gk(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function gR(t){if(__(t)&&0===t.explicitOrderBy.length)throw new km(Nm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function vR(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var yR,mR,bR,_R,wR,IR=(po(OR,wR=Gn=function(){}),OR.prototype._apply=function(t){var e=IA(t.firestore),e=function(t,e,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new km(Nm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){xR(o,i);for(var a=[],s=0,u=o;s<u.length;s++){var c=u[s];a.push(DR(n,t,c))}h={arrayValue:{values:a}}}else h=DR(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||xR(o,i),h=BA(e,"where",o,"in"===i||"not-in"===i);var h=Vb.create(r,i,h);return function(t,e){if(e.g()){var n=I_(t);if(null!==n&&!n.isEqual(e.field))throw new km(Nm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=w_(t))&&LR(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new km(Nm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new km(Nm.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t._query,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Mk(t.firestore,t._converter,(e=(t=t._query).filters.concat([e]),new v_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},OR),TR=(po(RR,_R=Gn),RR.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new km(Nm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new km(Nm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new p_(e,n);return e=r,null!==w_(n=t)||null!==(t=I_(n))&&LR(0,t,e.field),r}(t._query,this.Qc,this.Wc);return new Mk(t.firestore,t._converter,(e=(t=t._query).explicitOrderBy.concat([e]),new v_(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},RR),ER=(po(AR,bR=Gn),AR.prototype._apply=function(t){return new Mk(t.firestore,t._converter,C_(t._query,this.Gc,this.zc))},AR),SR=(po(kR,mR=Gn),kR.prototype._apply=function(t){var e=PR(t,this.type,this.Hc,this.Jc);return new Mk(t.firestore,t._converter,(t=t._query,new v_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},kR),CR=(po(NR,yR=Gn),NR.prototype._apply=function(t){var e=PR(t,this.type,this.Hc,this.Jc);return new Mk(t.firestore,t._converter,(t=t._query,new v_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},NR);function NR(t,e,n){var r=this;return(r=yR.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function kR(t,e,n){var r=this;return(r=mR.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function AR(t,e,n){var r=this;return(r=bR.call(this)||this).type=t,r.Gc=e,r.zc=n,r}function RR(t,e){var n=this;return(n=_R.call(this)||this).Qc=t,n.Wc=e,n.type="orderBy",n}function OR(t,e,n){var r=this;return(r=wR.call(this)||this).Qc=t,r.Kc=e,r.jc=n,r.type="where",r}function PR(t,c,e,n){if(e[0]=ga(e[0]),e[0]instanceof ZA)return function(t,e,n,r){if(!n)throw new km(Nm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,a=E_(t);o<a.length;o++){var s=a[o];if(s.field.isKeyField())i.push(Sb(e,n.key));else{var u=n.data.field(s.field);if(fb(u))throw new km(Nm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u)throw s=s.field.canonicalString(),new km(Nm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+s+"' (used as the orderBy) does not exist.");i.push(u)}}return new s_(i,r)}(t._query,t.firestore._databaseId,e[0]._document,n);var r=IA(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new km(Nm.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new km(Nm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!T_(t)&&-1!==c.indexOf("/"))throw new km(Nm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child($m.fromString(c));if(!yb.isDocumentKey(h))throw new km(Nm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new yb(h),s.push(Sb(e,h))}else c=BA(n,r,c),s.push(c)}return new s_(s,o)}(t._query,t.firestore._databaseId,r,c,e,n)}function DR(t,e,n){if("string"==typeof(n=ga(n))){if(""===n)throw new km(Nm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!T_(e)&&-1!==n.indexOf("/"))throw new km(Nm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child($m.fromString(n)),!yb.isDocumentKey(e))throw new km(Nm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Sb(t,new yb(e))}if(n instanceof Lk)return Sb(t,n._key);throw new km(Nm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ak(n)+".")}function xR(t,e){if(!Array.isArray(t)||0===t.length)throw new km(Nm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new km(Nm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function LR(t,e,n){if(!n.isEqual(e))throw new km(Nm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function MR(){}function FR(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}MR.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),bb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hb(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Mm()}},MR.prototype.convertObject=function(t,n){var r=this,i={};return Qm(t.fields||{},function(t,e){i[t]=r.convertValue(e,n)}),i},MR.prototype.convertGeoPoint=function(t){return new uA(hb(t.latitude),hb(t.longitude))},MR.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},MR.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){return fb(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(pb(t));default:return null}},MR.prototype.convertTimestamp=function(t){return t=cb(t),new Km(t.seconds,t.nanos)},MR.prototype.convertDocumentKey=function(t,e){var n=$m.fromString(t);return Fm(CI(n)),t=new pk(n.get(1),n.get(3)),n=new yb(n.popFirst(5)),t.isEqual(e)||Dm("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n};var UR,jR=(po(BR,UR=lt=MR),BR.prototype.convertBytes=function(t){return new aA(t)},BR.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new Lk(this.firestore,null,t)},BR),qR=(VR.prototype.set=function(t,e,n){return this._verifyNotCommitted(),e=FR((t=KR(t,this._firestore))._converter,e,n),n=TA(this._dataReader,"WriteBatch.set",t._key,e,null!==t._converter,n),this._mutations.push(n.toMutation(t._key,tw.none())),this},VR.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this._verifyNotCommitted(),t=KR(t,this._firestore),e="string"==typeof(e=ga(e))||e instanceof oA?VA(this._dataReader,"WriteBatch.update",t._key,e,n,r):qA(this._dataReader,"WriteBatch.update",t._key,e),this._mutations.push(e.toMutation(t._key,tw.exists(!0))),this},VR.prototype.delete=function(t){return this._verifyNotCommitted(),t=KR(t,this._firestore),this._mutations=this._mutations.concat(new bw(t._key,tw.none())),this},VR.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},VR.prototype._verifyNotCommitted=function(){if(this._committed)throw new km(Nm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},VR);function VR(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=IA(t)}function BR(t){var e=this;return(e=UR.call(this)||this).firestore=t,e}function KR(t,e){if((t=ga(t)).firestore!==e)throw new km(Nm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var WR,HR=(po(GR,WR=lt),GR.prototype.convertBytes=function(t){return new aA(t)},GR.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new Lk(this.firestore,null,t)},GR);function GR(t){var e=this;return(e=WR.call(this)||this).firestore=t,e}function zR(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Rk(t,Lk);var o=Rk(t.firestore,$k),a=IA(o);return YR(o,[("string"==typeof(e=ga(e))||e instanceof oA?VA(a,"updateDoc",t._key,e,n,r):qA(a,"updateDoc",t._key,e)).toMutation(t._key,tw.exists(!0))])}function QR(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e=ga(e);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||Yk(n[i])||(r=n[i],i++);var o,a,s,u,c,h,l={includeMetadataChanges:r.includeMetadataChanges};return Yk(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof Lk?(s=Rk(e.firestore,$k),u=m_(e._key.path),h={next:function(t){n[i]&&n[i](XR(s,e,t))},error:n[i+1],complete:n[i+2]}):(a=Rk(e,Mk),s=Rk(a.firestore,$k),u=a._query,c=new HR(s),h={next:function(t){n[i]&&n[i](new cR(s,c,a,t))},error:n[i+1],complete:n[i+2]},gR(e._query)),function(n,t,e){var r=this,i=new WN(h),o=new ZC(t,i,e);return n.asyncQueue.enqueueAndForget(function(){return vo(r,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=XC,[4,uk(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.Wo(),n.asyncQueue.enqueueAndForget(function(){return vo(r,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=JC,[4,uk(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(eA(s),u,l)}function YR(t,e){return function(n,r){var t=this,i=new XI;return n.asyncQueue.enqueueAndForget(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=yN,[4,sk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(eA(t),e)}function XR(t,e,n){var r=n.docs.get(e._key),i=new HR(t);return new sR(t,i,e._key,r,new aR(n.hasPendingWrites,n.fromCache),e._converter)}var JR,$R=(tO.prototype.get=function(t){var e=this,n=KR(t,this._firestore),r=new jR(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Mm();if((t=t[0]).isFoundDocument())return new ZA(e._firestore,r,t.key,t,n._converter);if(t.isNoDocument())return new ZA(e._firestore,r,n._key,null,n._converter);throw Mm()})},tO.prototype.set=function(t,e,n){return e=FR((t=KR(t,this._firestore))._converter,e,n),n=TA(this._dataReader,"Transaction.set",t._key,e,null!==t._converter,n),this._transaction.set(t._key,n),this},tO.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=KR(t,this._firestore),e="string"==typeof(e=ga(e))||e instanceof oA?VA(this._dataReader,"Transaction.update",t._key,e,n,r):qA(this._dataReader,"Transaction.update",t._key,e),this._transaction.update(t._key,e),this},tO.prototype.delete=function(t){return t=KR(t,this._firestore),this._transaction.delete(t._key),this},po(ZR,JR=tO),ZR.prototype.get=function(t){var e=this,n=KR(t,this._firestore),r=new HR(this._firestore);return JR.prototype.get.call(this,t).then(function(t){return new sR(e._firestore,r,n._key,t._document,new aR(!1,!1),n._converter)})},ZR);function ZR(t,e){var n=this;return(n=JR.call(this,t,e)||this)._firestore=t,n}function tO(t,e){this._firestore=t,this._transaction=e,this._dataReader=IA(t)}function eO(){if("undefined"==typeof Uint8Array)throw new km(Nm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nO(){if("undefined"==typeof atob)throw new km(Nm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var rO,iO=(lO.fromBase64String=function(t){return nO(),new lO(aA.fromBase64String(t))},lO.fromUint8Array=function(t){return eO(),new lO(aA.fromUint8Array(t))},lO.prototype.toBase64=function(){return nO(),this._delegate.toBase64()},lO.prototype.toUint8Array=function(){return eO(),this._delegate.toUint8Array()},lO.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},lO.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},lO),oO=(hO.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){iA(t=Rk(t,$k));var n=eA(t),r=t._freezeSettings();return rA(n,t=new UN,new MN(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},hO.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){iA(t=Rk(t,$k));var e=eA(t),n=t._freezeSettings();return rA(e,t=new UN,new FN(t,n.cacheSizeBytes))}(t._delegate)},hO.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n._initialized&&!n._terminated)throw new km(Nm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new XI;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return ZI.yt()?(e=n+"main",[4,ZI.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(qE(n._databaseId,n._persistenceKey))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t._delegate)},hO),aO=(Object.defineProperty(cO.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),cO.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},cO.prototype.useEmulator=function(t,e){var n=this._delegate,r=t;t=e,"firestore.googleapis.com"!==(e=(n=Rk(n,xk))._getSettings()).host&&e.host!==r&&xm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},e),{host:r+":"+t,ssl:!1}))},cO.prototype.enableNetwork=function(){return function(r){var t=this;return r.asyncQueue.enqueue(function(){return vo(t,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,ik(r)];case 1:return e=t.sent(),[4,ak(r)];case 2:return n=t.sent(),[2,(e.setNetworkEnabled(!0),(t=n).$r.delete(0),wC(t))]}})})})}(eA(Rk(this._delegate,$k)))},cO.prototype.disableNetwork=function(){return function(r){var t=this;return r.asyncQueue.enqueue(function(){return vo(t,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,ik(r)];case 1:return e=t.sent(),[4,ak(r)];case 2:return n=t.sent(),[2,(e.setNetworkEnabled(!1),function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return(e=n).$r.add(0),[4,IC(e)];case 1:return t.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(eA(Rk(this._delegate,$k)))},cO.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ck("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},cO.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},cO.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},cO.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new XI;return n.asyncQueue.enqueueAndForget(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=_N,[4,sk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(eA(Rk(this._delegate,$k)))},cO.prototype.onSnapshotsInSync=function(t){return function(n,t){var e=this,r=new WN(t);return n.asyncQueue.enqueueAndForget(function(){return vo(e,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Gr.add(e),e.next()},[4,uk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.Wo(),n.asyncQueue.enqueueAndForget(function(){return vo(e,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Gr.delete(e)},[4,uk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(eA(Rk(this._delegate,$k)),Yk(t)?t:{next:t})},Object.defineProperty(cO.prototype,"app",{get:function(){if(!this.Xc)throw new km(Nm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),cO.prototype.collection=function(t){try{return new RO(this,Kk(this._delegate,t))}catch(t){throw _O(t,"collection()","Firestore.collection()")}},cO.prototype.doc=function(t){try{return new mO(this,Wk(this._delegate,t))}catch(t){throw _O(t,"doc()","Firestore.doc()")}},cO.prototype.collectionGroup=function(t){try{return new NO(this,function(t,e){if(t=Rk(t,xk),Ek("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new km(Nm.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Mk(t,null,new v_($m.emptyPath(),e))}(this._delegate,t))}catch(t){throw _O(t,"collectionGroup()","Firestore.collectionGroup()")}},cO.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new XI;return n.asyncQueue.enqueueAndForget(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,rk(n).then(function(t){return t.datastore})];case 1:return e=t.sent(),new zN(n.asyncQueue,e,r,i).run(),[2]}})})}),i.promise}(eA(n=this._delegate),function(t){return t=new $R(n,t),e(new fO(r,t))})},cO.prototype.batch=function(){var e=this;return eA(this._delegate),new pO(new qR(this._delegate,function(t){return YR(e._delegate,t)}))},cO.prototype.loadBundle=function(t){throw new km(Nm.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},cO.prototype.namedQuery=function(t){throw new km(Nm.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},cO),sO=(po(uO,rO=lt),uO.prototype.convertBytes=function(t){return new iO(new aA(t))},uO.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),mO.Zc(t,this.firestore,null)},uO);function uO(t){var e=this;return(e=rO.call(this)||this).firestore=t,e}function cO(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof pk||(this.Xc=t)}function hO(){}function lO(t){this._delegate=t}var fO=(yO.prototype.get=function(t){var e=this,n=FO(t);return this._delegate.get(n).then(function(t){return new SO(e._firestore,new sR(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},yO.prototype.set=function(t,e,n){return t=FO(t),n?(Sk("Transaction.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},yO.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=FO(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,_o([o,e,n],r)),this},yO.prototype.delete=function(t){return t=FO(t),this._delegate.delete(t),this},yO),pO=(vO.prototype.set=function(t,e,n){return t=FO(t),n?(Sk("WriteBatch.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},vO.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=FO(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,_o([o,e,n],r)),this},vO.prototype.delete=function(t){return t=FO(t),this._delegate.delete(t),this},vO.prototype.commit=function(){return this._delegate.commit()},vO),dO=(gO.prototype.fromFirestore=function(t,e){return t=new uR(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null),this._delegate.fromFirestore(new CO(this._firestore,t),null!=e?e:{})},gO.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},gO.tu=function(t,e){var n=gO.eu,r=n.get(t);return r||(r=new WeakMap,n.set(t,r)),(n=r.get(e))||(n=new gO(t,new sO(t),e),r.set(e,n)),n},gO);function gO(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}function vO(t){this._delegate=t}function yO(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new sO(t)}dO.eu=new WeakMap;var mO=(bO.nu=function(t,e,n){if(t.length%2!=0)throw new km(Nm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new bO(e,new Lk(e._delegate,n,new yb(t)))},bO.Zc=function(t,e,n){return new bO(e,new Lk(e._delegate,n,t))},Object.defineProperty(bO.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(bO.prototype,"parent",{get:function(){return new RO(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(bO.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),bO.prototype.collection=function(t){try{return new RO(this.firestore,Kk(this._delegate,t))}catch(t){throw _O(t,"collection()","DocumentReference.collection()")}},bO.prototype.isEqual=function(t){return(t=ga(t))instanceof Lk&&Hk(this._delegate,t)},bO.prototype.set=function(t,e){e=Sk("DocumentReference.set",e);try{return function(t,e,n){t=Rk(t,Lk);var r=Rk(t.firestore,$k),e=FR(t._converter,e,n);return YR(r,[TA(IA(r),"setDoc",t._key,e,null!==t._converter,n).toMutation(t._key,tw.none())])}(this._delegate,t,e)}catch(t){throw _O(t,"setDoc()","DocumentReference.set()")}},bO.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?zR(this._delegate,t):zR.apply(void 0,_o([this._delegate,t,e],n))}catch(t){throw _O(t,"updateDoc()","DocumentReference.update()")}},bO.prototype.delete=function(){return YR(Rk((t=this._delegate).firestore,$k),[new bw(t._key,tw.none())]);var t},bO.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=wO(t),i=IO(t,function(t){return new SO(e.firestore,new sR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))});return QR(this._delegate,r,i)},bO.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=Rk(e,Lk);var n=Rk(e.firestore,$k),t=eA(n),r=new HR(n);return function(n,r){var t=this,i=new XI;return n.asyncQueue.enqueueAndForget(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(o,a,s){return vo(this,void 0,void 0,function(){var r,i;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=a,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)}))];case 1:return(i=t.sent()).isFoundDocument()?s.resolve(i):i.isNoDocument()?s.resolve(null):s.reject(new km(Nm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=VC(r,"Failed to get document '"+a+" from cache"),s.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,ok(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e._key).then(function(t){return new sR(n,r,e._key,t,new aR(null!==t&&t.hasLocalMutations,!0),e._converter)})}:"server"===(null==t?void 0:t.source)?function(e){e=Rk(e,Lk);var n=Rk(e.firestore,$k);return ck(eA(n),e._key,{source:"server"}).then(function(t){return XR(n,e,t)})}:function(e){e=Rk(e,Lk);var n=Rk(e.firestore,$k);return ck(eA(n),e._key).then(function(t){return XR(n,e,t)})})(this._delegate).then(function(t){return new SO(e.firestore,new sR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},bO.prototype.withConverter=function(t){return new bO(this.firestore,t?this._delegate.withConverter(dO.tu(this.firestore,t)):this._delegate.withConverter(null))},bO);function bO(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new sO(t)}function _O(t,e,n){return t.message=t.message.replace(e,n),t}function wO(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Yk(r))return r}return{}}function IO(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=Yk(t[0])?t[0]:Yk(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var TO,EO,SO=(Object.defineProperty(MO.prototype,"ref",{get:function(){return new mO(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(MO.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(MO.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(MO.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),MO.prototype.data=function(t){return this._delegate.data(t)},MO.prototype.get=function(t,e){return this._delegate.get(t,e)},MO.prototype.isEqual=function(t){return dR(this._delegate,t._delegate)},MO),CO=(po(LO,EO=SO),LO.prototype.data=function(t){return this._delegate.data(t)},LO),NO=(xO.prototype.where=function(t,e,n){try{return new xO(this.firestore,vR(this._delegate,(r=n,i=e,o=rR("where",t),new IR(o,i,r))))}catch(t){throw _O(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},xO.prototype.orderBy=function(t,e){try{return new xO(this.firestore,vR(this._delegate,(n=void 0===e?"asc":e,r=rR("orderBy",t),new TR(r,n))))}catch(t){throw _O(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},xO.prototype.limit=function(t){try{return new xO(this.firestore,vR(this._delegate,(Ok("limit",e=t),new ER("limit",e,"F"))))}catch(t){throw _O(t,"limit()","Query.limit()")}var e},xO.prototype.limitToLast=function(t){try{return new xO(this.firestore,vR(this._delegate,(Ok("limitToLast",e=t),new ER("limitToLast",e,"L"))))}catch(t){throw _O(t,"limitToLast()","Query.limitToLast()")}var e},xO.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xO(this.firestore,vR(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new SR("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw _O(t,"startAt()","Query.startAt()")}},xO.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xO(this.firestore,vR(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new SR("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw _O(t,"startAfter()","Query.startAfter()")}},xO.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xO(this.firestore,vR(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new CR("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw _O(t,"endBefore()","Query.endBefore()")}},xO.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xO(this.firestore,vR(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new CR("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw _O(t,"endAt()","Query.endAt()")}},xO.prototype.isEqual=function(t){return Gk(this._delegate,t._delegate)},xO.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=Rk(e,Mk);var n=Rk(e.firestore,$k),t=eA(n),r=new HR(n);return function(n,r){var t=this,i=new XI;return n.asyncQueue.enqueueAndForget(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(i,o,a){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nS(i,o,!0)];case 1:return r=t.sent(),e=new hN(o,r.Bn),n=e._o(r.documents),n=e.applyChanges(n,!1),a.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=VC(n,"Failed to execute query '"+o+" against cache"),a.reject(r),[3,3];case 3:return[2]}})})},[4,ok(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e._query).then(function(t){return new cR(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=Rk(e,Mk);var n=Rk(e.firestore,$k),t=eA(n),r=new HR(n);return hk(t,e._query,{source:"server"}).then(function(t){return new cR(n,r,e,t)})}:function(e){e=Rk(e,Mk);var n=Rk(e.firestore,$k),t=eA(n),r=new HR(n);return gR(e._query),hk(t,e._query).then(function(t){return new cR(n,r,e,t)})})(this._delegate).then(function(t){return new AO(e.firestore,new cR(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},xO.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=wO(t),i=IO(t,function(t){return new AO(e.firestore,new cR(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return QR(this._delegate,r,i)},xO.prototype.withConverter=function(t){return new xO(this.firestore,t?this._delegate.withConverter(dO.tu(this.firestore,t)):this._delegate.withConverter(null))},xO),kO=(Object.defineProperty(DO.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(DO.prototype,"doc",{get:function(){return new CO(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(DO.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(DO.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),DO),AO=(Object.defineProperty(PO.prototype,"query",{get:function(){return new NO(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(PO.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(PO.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(PO.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(PO.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new CO(e._firestore,t)})},enumerable:!1,configurable:!0}),PO.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new kO(e._firestore,t)})},PO.prototype.forEach=function(e,n){var r=this;this._delegate.forEach(function(t){e.call(n,new CO(r._firestore,t))})},PO.prototype.isEqual=function(t){return dR(this._delegate,t._delegate)},PO),RO=(po(OO,TO=NO),Object.defineProperty(OO.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(OO.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(OO.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new mO(this.firestore,t):null},enumerable:!1,configurable:!0}),OO.prototype.doc=function(t){try{return new mO(this.firestore,void 0===t?Wk(this._delegate):Wk(this._delegate,t))}catch(t){throw _O(t,"doc()","CollectionReference.doc()")}},OO.prototype.add=function(t){var e,n=this,r=this._delegate,i=t;return t=Rk(r.firestore,$k),e=Wk(r),i=FR(r._converter,i),YR(t,[TA(IA(r.firestore),"addDoc",e._key,i,null!==r._converter,{}).toMutation(e._key,tw.exists(!1))]).then(function(){return e}).then(function(t){return new mO(n.firestore,t)})},OO.prototype.isEqual=function(t){return Hk(this._delegate,t._delegate)},OO.prototype.withConverter=function(t){return new OO(this.firestore,t?this._delegate.withConverter(dO.tu(this.firestore,t)):this._delegate.withConverter(null))},OO);function OO(t,e){var n=this;return(n=TO.call(this,t,e)||this).firestore=t,n._delegate=e,n}function PO(t,e){this._firestore=t,this._delegate=e}function DO(t,e){this._firestore=t,this._delegate=e}function xO(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new sO(t)}function LO(){return null!==EO&&EO.apply(this,arguments)||this}function MO(t,e){this._firestore=t,this._delegate=e}function FO(t){return Rk(t,Lk)}function UO(t){this._delegate=t}function jO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(oA.bind.apply(oA,_o([void 0],t)))}jO.documentId=function(){return new jO(tb.keyField().canonicalString())},jO.prototype.isEqual=function(t){return(t=ga(t))instanceof oA&&this._delegate._internalPath.isEqual(t._internalPath)},Gn=jO,UO.serverTimestamp=function(){var t=new PA("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new UO(t)},UO.delete=function(){var t=new SA("deleteField");return t._methodName="FieldValue.delete",new UO(t)},UO.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new DA("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new UO(n)},UO.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xA("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new UO(n)},UO.increment=function(t){return(t=new LA("increment",t))._methodName="FieldValue.increment",new UO(t)},UO.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)};nu={Firestore:aO,GeoPoint:uA,Timestamp:Km,Blob:iO,Transaction:fO,WriteBatch:pO,DocumentReference:mO,DocumentSnapshot:SO,Query:NO,QueryDocumentSnapshot:CO,QuerySnapshot:AO,CollectionReference:RO,FieldPath:Gn,FieldValue:lt=UO,setLogLevel:function(t){Am.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(ft=jl).INTERNAL.registerComponent(new va("firestore",function(t){var e=t.getProvider("app").getImmediate();return t=t.getProvider("auth-internal"),new aO(e,new $k(e,t),new oO)},"PUBLIC").setServiceProps(Object.assign({},nu))),ft.registerVersion("@firebase/firestore","2.2.5"),aO.prototype.loadBundle=function(t){return e=this._delegate,a=t,n=eA(e=Rk(e,$k)),t=new Jk,function(n,t,r){var e,i=this,o=(e=a,t=oC(t),e=function(t){if(t instanceof Uint8Array)return KN(t,void 0);if(t instanceof ArrayBuffer)return KN(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new HN(e,t));n.asyncQueue.enqueueAndForget(function(){return vo(i,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=PN,[4,sk(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(n,e._databaseId,t),t;var e,a,n},aO.prototype.namedQuery=function(t){var e=this,n=this._delegate,t=t;return function(n,r){var t=this;return n.asyncQueue.enqueue(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Qe.getNamedQuery(t,e)})},[4,ok(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(eA(n=Rk(n,$k)),t).then(function(t){return t?new Mk(n,null,t.query):null}).then(function(t){return t?new NO(e,t):null})};var qO,VO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},BO=(po(KO,qO=Error),KO);function KO(t,e,n){return e=qO.call(this,e)||this,Object.setPrototypeOf(e,KO.prototype),e.code=t,e.details=n,e}var WO=(HO.prototype.getAuthToken=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},HO.prototype.getInstanceIdToken=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},HO.prototype.getContext=function(){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},HO);function HO(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function GO(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var zO=(QO.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return GO(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},QO.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?GO(t,function(t){return e.decode(t)}):t},QO);function QO(){}var YO,XO=(Object.defineProperty(JO.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),JO.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},JO.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},JO.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},JO.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},JO.prototype.postJSON=function(r,i,o){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},JO.prototype.call=function(c,h,l){return vo(this,void 0,void 0,function(){var i,o,a,s,u;return yo(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},a={},[4,this.contextProvider.getContext()];case 1:return(s=t.sent()).authToken&&(a.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=s.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new BO("deadline-exceeded","deadline-exceeded"))},n)}),u=(s={timer:r,promise:e}).timer,s=s.promise,[4,Promise.race([$O(u,this.postJSON(i,o,a)),s,$O(u,this.cancelAllRequests)])];case 2:if(!(s=t.sent()))throw new BO("cancelled","Firebase Functions instance was deleted.");if(u=function(t,e,n){var r=function(){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!VO[s])return new BO("internal","internal");r=VO[s],i=s}"string"==typeof(s=a.message)&&(i=s),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new BO(r,i,o)}(s.status,s.json,this.serializer))throw u;if(!s.json)throw new BO("internal","Response is not valid JSON object.");if(void 0===(u=void 0===(u=s.json.data)?s.json.result:u))throw new BO("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},JO);function JO(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new zO,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new WO(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function $O(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}function ZO(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function tP(n,r,i){var o,t=new Promise(function(t,e){ZO(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function eP(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function nP(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return tP(this[n],t,arguments)})})}function rP(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function iP(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=tP(t,n,arguments)).then(function(t){if(t)return new aP(t,e.request)});var t,e})})}function oP(t){this._index=t}function aP(t,e){this._cursor=t,this._request=e}function sP(t){this._store=t}function uP(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function cP(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new uP(n)}function hP(t){this._db=t}function lP(t,e,n){var r=(e=tP(indexedDB,"open",[t,e])).request;return r&&(r.onupgradeneeded=function(t){n&&n(new cP(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new hP(t)})}function fP(t){return tP(indexedDB,"deleteDatabase",[t])}nu=jl,YO=fetch.bind(self),ft={Functions:XO},nu.INTERNAL.registerComponent(new va("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),e=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new XO(r,e,t,n,YO)},"PUBLIC").setServiceProps(ft).setMultipleInstances(!0)),jl.registerVersion("@firebase/functions","0.6.7"),eP(oP,"_index",["name","keyPath","multiEntry","unique"]),nP(oP,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),iP(oP,"_index",IDBIndex,["openCursor","openKeyCursor"]),eP(aP,"_cursor",["direction","key","primaryKey","value"]),nP(aP,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(aP.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),ZO(e._request).then(function(t){if(t)return new aP(t,e._request)})})})}),sP.prototype.createIndex=function(){return new oP(this._store.createIndex.apply(this._store,arguments))},sP.prototype.index=function(){return new oP(this._store.index.apply(this._store,arguments))},eP(sP,"_store",["name","keyPath","indexNames","autoIncrement"]),nP(sP,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),iP(sP,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),rP(sP,"_store",IDBObjectStore,["deleteIndex"]),uP.prototype.objectStore=function(){return new sP(this._tx.objectStore.apply(this._tx,arguments))},eP(uP,"_tx",["objectStoreNames","mode"]),rP(uP,"_tx",IDBTransaction,["abort"]),cP.prototype.createObjectStore=function(){return new sP(this._db.createObjectStore.apply(this._db,arguments))},eP(cP,"_db",["name","version","objectStoreNames"]),rP(cP,"_db",IDBDatabase,["deleteObjectStore","close"]),hP.prototype.transaction=function(){return new uP(this._db.transaction.apply(this._db,arguments))},eP(hP,"_db",["name","version","objectStoreNames"]),rP(hP,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[sP,oP].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[oP,sP].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var pP=1e4,dP="w:0.4.25",gP="FIS_v2",vP="https://firebaseinstallations.googleapis.com/v1",yP=36e5,lt=((Gn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Gn["not-registered"]="Firebase Installation is not registered.",Gn["installation-not-found"]="Firebase Installation not found.",Gn["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Gn["app-offline"]="Could not process request. Application offline.",Gn["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Gn),mP=new Ko("installations","Installations",lt);function bP(t){return t instanceof Vo&&t.code.includes("request-failed")}function _P(t){return t=t.projectId,vP+"/projects/"+t+"/installations"}function wP(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function IP(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent().error,[2,mP.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function TP(t){return t=t.apiKey,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function EP(t,e){return e=e.refreshToken,(t=TP(t)).append("Authorization",gP+" "+e),t}function SP(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function CP(e){return new Promise(function(t){setTimeout(t,e)})}var NP=/^[cdef][\w-]{21}$/,kP="";function AP(t){return t.appName+"!"+t.appId}var RP=new Map;function OP(t,e){var n;PP(t=AP(t),e),n=t,t=e,(e=xP())&&e.postMessage({key:n,fid:t}),LP()}function PP(t,e){var n,r,i=RP.get(t);if(i)try{for(var o=mo(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var DP=null;function xP(){return!DP&&"BroadcastChannel"in self&&((DP=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){PP(t.data.key,t.data.fid)}),DP}function LP(){0===RP.size&&DP&&(DP.close(),DP=null)}var MP="firebase-installations-database",FP=1,UP="firebase-installations-store",jP=null;function qP(){return jP=jP||lP(MP,FP,function(t){0===t.oldVersion&&t.createObjectStore(UP)})}function VP(o,a){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return e=AP(o),[4,qP()];case 1:return r=t.sent(),[4,(r=(n=r.transaction(UP,"readwrite")).objectStore(UP)).get(e)];case 2:return i=t.sent(),[4,r.put(a,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===a.fid||OP(o,a.fid),[2,a]}})})}function BP(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=AP(r),[4,qP()];case 1:return[4,(n=(n=t.sent()).transaction(UP,"readwrite")).objectStore(UP).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function KP(a,s){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:return e=AP(a),[4,qP()];case 1:return r=t.sent(),[4,(r=(n=r.transaction(UP,"readwrite")).objectStore(UP)).get(e)];case 2:return i=t.sent(),void 0!==(o=s(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||OP(a,o.fid),[2,o]}})})}function WP(i){return vo(this,void 0,void 0,function(){var r,e,n;return yo(this,function(t){switch(t.label){case 0:return[4,KP(i,function(t){var e,n;return t=GP(t||{fid:function(){try{var t=new Uint8Array(17);return(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16,t=btoa(String.fromCharCode.apply(String,_o([],bo(t)))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22),NP.test(t)?t:kP}catch(t){return kP}}(),registrationStatus:0}),e=i,t=0!==(n=t).registrationStatus?1===n.registrationStatus?{installationEntry:n,registrationPromise:function(i){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return[4,HP(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,CP(100)];case 3:return t.sent(),[4,HP(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,WP(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(e)}:{installationEntry:n}:navigator.onLine?{installationEntry:n={fid:n.fid,registrationStatus:1,registrationTime:Date.now()},registrationPromise:e=function(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a){var s=i.fid;return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:return e=_P(a),n=TP(a),o={fid:s,authVersion:gP,appId:a.appId,sdkVersion:dP},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,SP(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return[2,{fid:(o=t.sent()).fid||s,registrationStatus:2,refreshToken:o.refreshToken,authToken:wP(o.authToken)}];case 3:return[4,IP("Create Installation",i)];case 4:throw t.sent()}})})}(r)];case 1:return e=t.sent(),[2,VP(r,e)];case 2:return bP(n=t.sent())&&409===n.customData.serverCode?[4,BP(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,VP(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(e,n)}:{installationEntry:n,registrationPromise:Promise.reject(mP.create("app-offline"))},r=t.registrationPromise,t.installationEntry})];case 1:return(e=t.sent()).fid!==kP?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function HP(t){return KP(t,function(t){if(!t)throw mP.create("installation-not-found");return GP(t)})}function GP(t){return 1===t.registrationStatus&&t.registrationTime+pP<Date.now()?{fid:t.fid,registrationStatus:0}:t}function zP(t,s){var u=t.appConfig,c=t.platformLoggerProvider;return vo(this,void 0,void 0,function(){var n,r,i,o,a;return yo(this,function(t){switch(t.label){case 0:return e=(e=s).fid,n=_P(u)+"/"+e+"/authTokens:generate",r=EP(u,s),(a=c.getImmediate({optional:!0}))&&r.append("x-firebase-client",a.getPlatformInfoString()),a={installation:{sdkVersion:dP}},i={method:"POST",headers:r,body:JSON.stringify(a)},[4,SP(function(){return fetch(n,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,wP(a=t.sent())];case 3:return[4,IP("Generate Auth Token",o)];case 4:throw t.sent()}var e})})}function QP(a,s){return void 0===s&&(s=!1),vo(this,void 0,void 0,function(){var o,e,n;return yo(this,function(t){switch(t.label){case 0:return[4,KP(a.appConfig,function(t){if(!XP(t))throw mP.create("not-registered");var e,n,r,i=t.authToken;if(s||2!==(e=i).requestStatus||(n=e,(r=Date.now())<n.creationTime||n.creationTime+n.expiresIn<r+yP)){if(1===i.requestStatus)return o=function(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,YP(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,CP(100)];case 3:return t.sent(),[4,YP(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,QP(n,r)]:[2,e]}})})}(a,s),t;if(!navigator.onLine)throw mP.create("app-offline");return e=t,i={requestStatus:1,requestTime:Date.now()},i=go(go({},e),{authToken:i}),o=function(i,o){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,zP(i,o)];case 1:return e=t.sent(),r=go(go({},o),{authToken:e}),[4,VP(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!bP(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,BP(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=go(go({},o),{authToken:{requestStatus:0}}),[4,VP(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(a,i),i}return t})];case 1:return e=t.sent(),o?[4,o]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function YP(t){return KP(t,function(t){if(!XP(t))throw mP.create("not-registered");var e=t.authToken;return 1===e.requestStatus&&e.requestTime+pP<Date.now()?go(go({},t),{authToken:{requestStatus:0}}):t})}function XP(t){return void 0!==t&&2===t.registrationStatus}function JP(o,a){return vo(this,void 0,void 0,function(){var n,r,i;return yo(this,function(t){switch(t.label){case 0:return e=(e=a).fid,n=_P(o)+"/"+e,i=EP(o,a),r={method:"DELETE",headers:i},[4,SP(function(){return fetch(n,r)})];case 1:return(i=t.sent()).ok?[3,3]:[4,IP("Delete Installation",i)];case 2:throw t.sent();case 3:return[2]}var e})})}function $P(t){return mP.create("missing-app-config-values",{valueName:t})}(nu=jl).INTERNAL.registerComponent(new va("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw $P("App Configuration");if(!t.name)throw $P("App Name");try{for(var r=mo(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw $P(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,WP(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||QP(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(e,n){return void 0===n&&(n=!1),vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,WP(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,QP(e,n)];case 2:return[2,t.sent().token]}})})}(n,t)},delete:function(){return function(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,KP(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw mP.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw mP.create("app-offline");case 3:return[4,JP(e,n)];case 4:return t.sent(),[4,BP(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){xP();var n=AP(t);(t=RP.get(n))||(t=new Set,RP.set(n,t)),t.add(e)}(i=n.appConfig,r=t),function(){var t,e=r,n=AP(t=i);(t=RP.get(n))&&(t.delete(e),0===t.size&&RP.delete(n),LP())};var r,i}}},"PUBLIC")),nu.registerVersion("@firebase/installations","0.4.25");var ZP,lt=((Gn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Gn["only-available-in-window"]="This method is available in a Window context.",Gn["only-available-in-sw"]="This method is available in a service worker context.",Gn["permission-default"]="The notification permission was not granted and dismissed instead.",Gn["permission-blocked"]="The notification permission was not granted and blocked instead.",Gn["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Gn["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Gn["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Gn["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Gn["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Gn["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Gn["token-update-no-token"]="FCM returned no token when updating the user to push.",Gn["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Gn["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Gn["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Gn["invalid-vapid-key"]="The public VAPID key must be a string.",Gn["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Gn),tD=new Ko("messaging","Messaging",lt),eD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nD="https://fcmregistrations.googleapis.com/v1",rD="FCM_MSG",iD="google.c.a.c_id";function oD(t){return t=new Uint8Array(t),btoa(String.fromCharCode.apply(String,_o([],bo(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(Gn=ZP={}).PUSH_RECEIVED="push-received",Gn.NOTIFICATION_CLICKED="notification-clicked";var aD="fcm_token_details_db",sD=5,uD="fcm_token_object_Store";var cD="firebase-messaging-database",hD=1,lD="firebase-messaging-store",fD=null;function pD(){return fD=fD||lP(cD,hD,function(t){0===t.oldVersion&&t.createObjectStore(lD)})}function dD(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=vD(r),[4,pD()];case 1:return[4,t.sent().transaction(lD).objectStore(lD).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,function(a){return vo(this,void 0,void 0,function(){var o,e=this;return yo(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!t.sent().map(function(t){return t.name}).includes(aD))return[2,null];t.label=2;case 2:return o=null,[4,lP(aD,sD,function(i){return vo(e,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return!(i.oldVersion<2)&&i.objectStoreNames.contains(uD)?[4,(r=i.transaction.objectStore(uD)).index("fcmSenderId").get(a)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:oD(n.vapidKey)}}}else 3!==i.oldVersion&&4!==i.oldVersion||(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:oD(n.auth),p256dh:oD(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:oD(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,fP(aD)];case 4:return t.sent(),[4,fP("fcm_vapid_details_db")];case 5:return t.sent(),[4,fP("undefined")];case 6:return t.sent(),[2,function(t){if(t&&t.subscriptionOptions){var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}}(o)?o:null]}})})}(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,gD(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function gD(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=vD(r),[4,pD()];case 1:return[4,(n=(n=t.sent()).transaction(lD,"readwrite")).objectStore(lD).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function vD(t){return t.appConfig.appId}function yD(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,bD(r)];case 1:e={method:"DELETE",headers:e=t.sent()},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(mD(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,tD.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),tD.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function mD(t){return t=t.projectId,nD+"/projects/"+t+"/registrations"}function bD(t){var n=t.appConfig,r=t.installations;return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function _D(t){var e=t.p256dh,n=t.auth,e={web:{endpoint:t.endpoint,auth:n,p256dh:e}};return(t=t.vapidKey)!==eD&&(e.web.applicationPubKey=t),e}function wD(u,c,h){return vo(this,void 0,void 0,function(){var o,a,s;return yo(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw tD.create("permission-blocked");return[4,function(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(c,h)];case 1:return s=t.sent(),[4,dD(u)];case 2:return o=t.sent(),a={vapidKey:h,swScope:c.scope,endpoint:s.endpoint,auth:oD(s.getKey("auth")),p256dh:oD(s.getKey("p256dh"))},o?[3,3]:[2,TD(u,a)];case 3:if(e=o.subscriptionOptions,n=a.vapidKey===e.vapidKey,r=a.endpoint===e.endpoint,i=a.auth===e.auth,e=a.p256dh===e.p256dh,n&&r&&i&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,yD(u,o.token)];case 5:return t.sent(),[3,7];case 6:return s=t.sent(),console.warn(s),[3,7];case 7:return[2,TD(u,a)];case 8:return Date.now()>=o.createTime+6048e5?[2,function(i,o,a){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,a){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return[4,bD(o)];case 1:e=t.sent(),n=_D(a.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(mD(o.appConfig)+"/"+a.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),tD.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,tD.create("token-update-failed",{errorInfo:i});if(!r.token)throw tD.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=go(go({},i),{token:e,createTime:Date.now()}),[4,gD(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,ID(o,a)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:o.token,createTime:Date.now(),subscriptionOptions:a},u,c)]:[2,o.token];case 9:return[2]}var e,n,r,i})})}function ID(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,dD(n)];case 1:return(e=t.sent())?[4,yD(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=vD(r),[4,pD()];case 1:return[4,(n=(n=t.sent()).transaction(lD,"readwrite")).objectStore(lD).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function TD(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,function(o,a){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return[4,bD(o)];case 1:e=t.sent(),n=_D(a),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(mD(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),tD.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,tD.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw tD.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e={token:e=t.sent(),createTime:Date.now(),subscriptionOptions:r},[4,gD(n,e)];case 2:return t.sent(),[2,e.token]}})})}function ED(t){return"object"==typeof t&&t&&iD in t}function SD(e){return new Promise(function(t){setTimeout(t,e)})}var CD=(Object.defineProperty(ND.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),ND.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw tD.create("invalid-bg-handler");this.bgMessageHandler=t},ND.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},ND.prototype.getToken=function(){var n;return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,dD(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:eD,t.label=2;case 2:return[2,wD(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},ND.prototype.deleteToken=function(){return ID(this.firebaseDependencies,self.registration)},ND.prototype.requestPermission=function(){throw tD.create("only-available-in-window")},ND.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw tD.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw tD.create("invalid-vapid-key");this.vapidKey=t},ND.prototype.useServiceWorker=function(){throw tD.create("only-available-in-window")},ND.prototype.onMessage=function(){throw tD.create("only-available-in-window")},ND.prototype.onTokenRefresh=function(){throw tD.create("only-available-in-window")},ND.prototype.onPush=function(c){return vo(this,void 0,void 0,function(){var a,s,u;return yo(this,function(t){switch(t.label){case 0:return(u=function(){var t=c.data;if(!t)return null;try{return t.json()}catch(t){return null}}())?[4,kD()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(a=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=ZP.PUSH_RECEIVED;try{for(var i=mo(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(a,u)]:(s=!1,u.notification?[4,((o=go({},(r=u).notification)).data=((i={})[rD]=r,i),n=(e=o).actions,r=Notification.maxActions,n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(r=e.title)&&void 0!==r?r:"",e))]:[3,3]);case 2:t.sent(),s=!0,t.label=3;case 3:return!0===s&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o={from:(i=u).from,collapseKey:i.collapse_key},n=o,(r=i).notification&&(n.notification={},(e=r.notification.title)&&(n.notification.title=e),(e=r.notification.body)&&(n.notification.body=e),(r=r.notification.image)&&(n.notification.image=r)),i.data&&(o.data=i.data),n=o,(r=i).fcmOptions&&(n.fcmOptions={},(i=r.fcmOptions.link)&&(n.fcmOptions.link=i),(r=r.fcmOptions.analytics_label)&&(n.fcmOptions.analyticsLabel=r)),u=o,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(u):this.bgMessageHandler.next(u)),[4,SD(1e3)]);case 4:return t.sent(),[2]}var e,n,r,i,o})})},ND.prototype.onSubChange=function(n){var r;return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,ID(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,dD(this.firebaseDependencies)];case 3:return e=t.sent(),[4,ID(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,wD(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:eD)];case 5:return t.sent(),[2]}})})},ND.prototype.onNotificationClick=function(u){var c;return vo(this,void 0,void 0,function(){var r,i,o,a,s;return yo(this,function(t){switch(t.label){case 0:return!(r=null===(c=null===(c=u.notification)||void 0===c?void 0:c.data)||void 0===c?void 0:c[rD])||u.action?[2]:(u.stopImmediatePropagation(),u.notification.close(),n=null!==(e=null===(e=r.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=r.notification)||void 0===n?void 0:n.click_action,(i=n||(ED(r.data)?self.location.origin:null))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,function(u){return vo(this,void 0,void 0,function(){var e,n,r,i,o,a,s;return yo(this,function(t){switch(t.label){case 0:return[4,kD()];case 1:e=t.sent();try{for(n=mo(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}(o)]):[2]);case 1:return(s=t.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=t.sent(),[4,SD(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=t.sent(),t.label=6;case 6:return s?(r.messageType=ZP.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}var e,n})})},ND);function ND(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function kD(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var AD=(Object.defineProperty(RD.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),RD.prototype.messageEventListener=function(i){return vo(this,void 0,void 0,function(){var n,r;return yo(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===ZP.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),ED(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},RD.prototype.getVapidKey=function(){return this.vapidKey},RD.prototype.getSwReg=function(){return this.swRegistration},RD.prototype.getToken=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw tD.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,wD(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},RD.prototype.updateVapidKey=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=eD),[2]})})},RD.prototype.updateSwReg=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw tD.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},RD.prototype.registerDefaultSw=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),tD.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},RD.prototype.deleteToken=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,ID(this.firebaseDependencies,this.swRegistration)]}})})},RD.prototype.requestPermission=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?tD.create("permission-blocked"):tD.create("permission-default")}})})},RD.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw tD.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw tD.create("invalid-vapid-key");this.vapidKey=t},RD.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw tD.create("invalid-sw-registration");if(this.swRegistration)throw tD.create("use-sw-after-get-token");this.swRegistration=t},RD.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},RD.prototype.setBackgroundMessageHandler=function(){throw tD.create("only-available-in-sw")},RD.prototype.onBackgroundMessage=function(){throw tD.create("only-available-in-sw")},RD.prototype.onTokenRefresh=function(){return function(){}},RD.prototype.logEvent=function(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(){switch(n){case ZP.NOTIFICATION_CLICKED:return"notification_open";case ZP.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[iD],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},RD);function RD(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function OD(t){return tD.create("missing-app-config-values",{valueName:t})}function PD(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}lt={isSupported:PD},jl.INTERNAL.registerComponent(new va("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw OD("App Configuration Object");if(!t.name)throw OD("App Name");var r=t.options;try{for(var i=mo(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw OD(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!PD())throw tD.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?CD:AD)(t)},"PUBLIC").setServiceProps(lt));var DD,xD="firebasestorage.googleapis.com",LD="storageBucket",MD=(po(FD,DD=Vo),FD.prototype._codeEquals=function(t){return UD(t)===this.code},Object.defineProperty(FD.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),FD);function FD(t,e){return(t=DD.call(this,UD(t),"Firebase Storage: "+e+" ("+UD(t)+")")||this).customData={serverResponse:null},t._baseMessage=t.message,Object.setPrototypeOf(t,FD.prototype),t}function UD(t){return"storage/"+t}function jD(){return new MD("unknown","An unknown error occurred, please check the error payload for server response.")}function qD(){return new MD("canceled","User canceled the upload/download.")}function VD(){return new MD("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function BD(t){return new MD("invalid-argument",t)}function KD(){return new MD("app-deleted","The Firebase app was deleted.")}function WD(t){return new MD("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function HD(t,e){return new MD("invalid-format","String does not match format '"+t+"': "+e)}function GD(t){throw new MD("internal-error","Internal error: "+t)}function zD(t,e){this.data=t,this.contentType=e||null}var QD={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function YD(t,e){switch(t){case QD.RAW:return new zD(XD(e));case QD.BASE64:case QD.BASE64URL:return new zD(JD(t,e));case QD.DATA_URL:return new zD((t=new $D(t=e)).base64?JD(QD.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw HD(QD.DATA_URL,"Malformed data URL.")}return XD(e)}(t.rest),new $D(e).contentType)}throw jD()}function XD(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function JD(t,e){switch(t){case QD.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw HD(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case QD.BASE64URL:if(r=-1!==e.indexOf("+"),n=-1!==e.indexOf("/"),r||n)throw HD(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(e)}catch(e){throw HD(t,"Invalid character found")}for(var o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return o}function $D(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw HD(QD.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}var ZD,tx={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ex(t){switch(t){case"running":case"pausing":case"canceling":return tx.RUNNING;case"paused":return tx.PAUSED;case"success":return tx.SUCCESS;case"canceled":return tx.CANCELED;case"error":default:return tx.ERROR}}(Gn=ZD={})[Gn.NO_ERROR=0]="NO_ERROR",Gn[Gn.NETWORK_ERROR=1]="NETWORK_ERROR",Gn[Gn.ABORT=2]="ABORT";var nx=(rx.prototype.send=function(t,e,n,r){if(this.sent_)throw GD("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},rx.prototype.getErrorCode=function(){if(!this.sent_)throw GD("cannot .getErrorCode() before sending");return this.errorCode_},rx.prototype.getStatus=function(){if(!this.sent_)throw GD("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},rx.prototype.getResponseText=function(){if(!this.sent_)throw GD("cannot .getResponseText() before sending");return this.xhr_.responseText},rx.prototype.abort=function(){this.xhr_.abort()},rx.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},rx.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},rx.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},rx);function rx(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ZD.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=ZD.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=ZD.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var ix=(ox.prototype.createXhrIo=function(){return new nx},ox);function ox(){}var ax=(Object.defineProperty(sx.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(sx.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),sx.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},sx.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},sx.makeFromBucketSpec=function(t,e){var n;try{n=sx.makeFromUrl(t,e)}catch(e){return new sx(t,"")}if(""===n.path)return n;throw new MD("invalid-default-bucket","Invalid default bucket '"+t+"'.")},sx.makeFromUrl=function(t,e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=e.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+(e===xD?"(?:storage.googleapis.com|storage.cloud.google.com)":e)+"/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],h=c.regex.exec(t);if(h){n=new sx(h[c.indices.bucket],h[c.indices.path]||""),c.postModify(n);break}}if(null==n)throw new MD("invalid-url","Invalid URL '"+t+"'.");return n},sx);function sx(t,e){this.bucket=t,this.path_=e}var ux=(cx.prototype.getPromise=function(){return this.promise_},cx.prototype.cancel=function(t){},cx);function cx(t){this.promise_=Promise.reject(t)}function hx(t){return"string"==typeof t||t instanceof String}function lx(t){return fx()&&t instanceof Blob}function fx(){return"undefined"!=typeof Blob}function px(t,e,n,r){if(r<e)throw BD("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw BD("Invalid value for '"+t+"'. Expected "+n+" or less.")}function dx(t,e){var n=e.match(/^(\w+):\/\/.+/);return(null==(null==n?void 0:n[1])?"https://"+e:e)+"/v0"+t}function gx(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&");return r.slice(0,-1)}var vx=(yx.prototype.start_=function(){var e,n,t,r,i,o,a,s,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var a=c.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(t){i(t)}else null!==o?((n=jD()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?KD:qD)()):i(n=new MD("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function l(){return 2===a}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s||(s=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];s||(t||l()||o?f.call.apply(f,_o([null,t],e)):(r<64&&(r*=2),p(1===a?(a=2,0):1e3*(r+Math.random()))))}function g(t){u||(u=!0,s||(null!==i?(t||(a=2),clearTimeout(i),p(0)):t||(a=1)))}this.canceled_?h(0,new mx(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new mx(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===ZD.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new mx(n,t))):(t=t.getErrorCode()===ZD.ABORT,r(!1,new mx(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=s=o=!(r=1),p(a=0),setTimeout(function(){g(o=!0)},t),g)},yx.prototype.getPromise=function(){return this.promise_},yx.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},yx.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},yx);function yx(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var mx=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};var bx=(_x.prototype.size=function(){return this.size_},_x.prototype.type=function(){return this.type_},_x.prototype.slice=function(t,e){if(lx(this.data_)){var n=this.data_;return null===(i=(r=t,i=e,n.webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null))?null:new _x(i)}var r,i;return new _x(new Uint8Array(this.data_.buffer,t,e-t),!0)},_x.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(fx()){var n=t.map(function(t){return t instanceof _x?t.data_:t});return new _x(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(fx())return new Blob(t);throw new MD("unsupported-environment","This browser doesn't seem to support creating Blobs")}.apply(null,n))}var n=t.map(function(t){return hx(t)?YD(QD.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new _x(i,!0)},_x.prototype.uploadData=function(){return this.data_},_x);function _x(t,e){var n=0,r="";lx(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}function wx(t){var e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof e||Array.isArray(e)?null:e}function Ix(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Tx(t,e){return e}var Ex=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Tx},Sx=null;function Cx(){if(Sx)return Sx;var t=[];t.push(new Ex("bucket")),t.push(new Ex("generation")),t.push(new Ex("metageneration")),t.push(new Ex("name","fullPath",!0));var e=new Ex("name");return e.xform=function(t,e){return!hx(e)||e.length<2?e:Ix(e)},t.push(e),(e=new Ex("size")).xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new Ex("timeCreated")),t.push(new Ex("updated")),t.push(new Ex("md5Hash",null,!0)),t.push(new Ex("cacheControl",null,!0)),t.push(new Ex("contentDisposition",null,!0)),t.push(new Ex("contentEncoding",null,!0)),t.push(new Ex("contentLanguage",null,!0)),t.push(new Ex("contentType",null,!0)),t.push(new Ex("metadata","customMetadata",!0)),Sx=t}function Nx(t,e,n){return null===(e=wx(e))?null:function(t,e,n){for(var r,i,o={type:"file"},a=n.length,s=0;s<a;s++){var u=n[s];o[u.local]=u.xform(o,e[u.server])}return r=o,i=t,Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,e=new ax(t,e);return i._makeStorageReference(e)}}),o}(t,e,n)}function kx(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Ax="prefixes",Rx="items";var Ox=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Px(t){if(!t)throw jD()}function Dx(n,r){return function(t,e){return Px(null!==(e=Nx(n,e,r))),e}}function xx(o,a){return function(t,e){return Px(null!==(n=o,r=a,e=null===(i=wx(i=e))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Ax])for(var i=0,o=n[Ax];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new ax(e,a));r.prefixes.push(s)}if(n[Rx])for(var u=0,c=n[Rx];u<c.length;u++){var h=c[u],s=t._makeStorageReference(new ax(e,h.name));r.items.push(s)}return r}(n,r,i))),e;var n,r,i}}function Lx(i){return function(t,e){var n,r=401===t.getStatus()?new MD("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new MD("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new MD("unauthorized","User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function Mx(r){var i=Lx(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new MD("object-not-found","Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function Fx(t,e,n){var r=dx(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime;return(i=new Ox(r,"GET",Dx(t,n),i)).errorHandler=Mx(e),i}function Ux(t,e,n){return(n=Object.assign({},n)).fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function jx(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}function qx(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Px(!1)}return Px(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Vx(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(this.next=t.next,this.error=t.error,this.complete=t.complete)}function Bx(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var Kx=(Wx.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},Wx.prototype._shouldDoResumable=function(t){return 262144<t.size()},Wx.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},Wx.prototype._resolveToken=function(e){var n=this;this._ref.storage._getAuthToken().then(function(t){switch(n._state){case"running":e(t);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused")}})},Wx.prototype._createResumable=function(){var u=this;this._resolveToken(function(t){var e,n,r,i,o,a,s,e=(e=u._ref.storage,n=u._ref._location,r=u._mappings,i=u._blob,o=u._metadata,a=n.bucketOnlyServerUrl(),s=Ux(n,i,o),o={name:s.fullPath},a=dx(a,e.host),i={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},r=kx(s,r),e=e.maxUploadRetryTime,(e=new Ox(a,"POST",function(t){var e;qx(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Px(!1)}return Px(hx(e)),e},e)).urlParams=o,e.headers=i,e.body=r,e.errorHandler=Lx(n),e),t=u._ref.storage._makeRequest(e,t);(u._request=t).getPromise().then(function(t){u._request=void 0,u._uploadUrl=t,u._needToFetchStatus=!1,u.completeTransitions_()},u._errorHandler)})},Wx.prototype._fetchStatus=function(){var o=this,a=this._uploadUrl;this._resolveToken(function(t){var e,n,r,i,e=(e=o._ref.storage,n=o._ref._location,r=a,i=o._blob,e=e.maxUploadRetryTime,(e=new Ox(r,"POST",function(t){var e=qx(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Px(!1)}n||Px(!1);var r=Number(n);return Px(!isNaN(r)),new jx(r,i.size(),"final"===e)},e)).headers={"X-Goog-Upload-Command":"query"},e.errorHandler=Lx(n),e),t=o._ref.storage._makeRequest(e,t);(o._request=t).getPromise().then(function(t){o._request=void 0,o._updateProgress(t.current),o._needToFetchStatus=!1,t.finalized&&(o._needToFetchMetadata=!0),o.completeTransitions_()},o._errorHandler)})},Wx.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new jx(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=function(t,o,e,a,n,s,r,i){var u=new jx(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=a.size()),a.size()!==u.total)throw new MD("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;if(0<n&&(h=Math.min(h,n)),n=(r=u.current)+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},null===(r=a.slice(r,n)))throw VD();return n=o.maxUploadRetryTime,(n=new Ox(e,"POST",function(t,e){var n=qx(t,["active","final"]),r=u.current+h,i=a.size(),e="final"===n?Dx(o,s)(t,e):null;return new jx(r,i,"final"===n,e)},n)).headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=Lx(t),n}(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition("error")}t=n._ref.storage._makeRequest(e,t),(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition("success")):n.completeTransitions_()},n._errorHandler)})},Wx.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},Wx.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=Fx(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition("success")},n._metadataErrorHandler)})},Wx.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Ux(e,r,i),i="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+kx(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",s="\r\n--"+s+"--";if(null===(r=bx.getBlob(i,r,s)))throw VD();return s={name:u.fullPath},u=dx(o,t.host),o=t.maxUploadRetryTime,(o=new Ox(u,"POST",Dx(t,n),o)).urlParams=s,o.headers=a,o.body=r.uploadData(),o.errorHandler=Lx(e),o}(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition("success")},n._errorHandler)})},Wx.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},Wx.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=qD(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},Wx.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(Wx.prototype,"snapshot",{get:function(){var t=ex(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),Wx.prototype.on=function(t,e,n,r){var i=this,o=new Vx(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},Wx.prototype.then=function(t,e){return this._promise.then(t,e)},Wx.prototype.catch=function(t){return this.then(null,t)},Wx.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},Wx.prototype._removeObserver=function(t){-1!==(t=this._observers.indexOf(t))&&this._observers.splice(t,1)},Wx.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},Wx.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(ex(this._state)){case tx.SUCCESS:Bx(this._resolve.bind(null,this.snapshot))();break;case tx.CANCELED:case tx.ERROR:Bx(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},Wx.prototype._notifyObserver=function(t){switch(ex(this._state)){case tx.RUNNING:case tx.PAUSED:t.next&&Bx(t.next.bind(t,this.snapshot))();break;case tx.SUCCESS:t.complete&&Bx(t.complete.bind(t))();break;case tx.CANCELED:case tx.ERROR:t.error&&Bx(t.error.bind(t,this._error))();break;default:t.error&&Bx(t.error.bind(t,this._error))()}},Wx.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},Wx.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},Wx.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},Wx);function Wx(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Cx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var Hx=(Gx.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},Gx.prototype._newRef=function(t,e){return new Gx(t,e)},Object.defineProperty(Gx.prototype,"root",{get:function(){var t=new ax(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(Gx.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Gx.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(Gx.prototype,"name",{get:function(){return Ix(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(Gx.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(Gx.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);return null===t?null:(t=new ax(this._location.bucket,t),new Gx(this._service,t))},enumerable:!1,configurable:!0}),Gx.prototype._throwIfRoot=function(t){if(""===this._location.path)throw WD(t)},Gx);function Gx(t,e){this._service=t,this._location=e instanceof ax?e:ax.makeFromUrl(e,t.host)}function zx(s,u){return vo(this,void 0,void 0,function(){var o,a;return yo(this,function(t){switch(t.label){case 0:return null!=u&&"number"==typeof u.maxResults&&px("options.maxResults",1,1e3,u.maxResults),[4,s.storage._getAuthToken()];case 1:return o=t.sent(),a=u||{},e=s.storage,n=s._location,r=a.pageToken,i=a.maxResults,t={},n.isRoot?t.prefix="":t.prefix=n.path+"/",0<"/".length&&(t.delimiter="/"),r&&(t.pageToken=r),i&&(t.maxResults=i),r=dx(n.bucketOnlyServerUrl(),e.host),i=e.maxOperationRetryTime,(i=new Ox(r,"GET",xx(e,n.bucket),i)).urlParams=t,i.errorHandler=Lx(n),[2,s.storage._makeRequest(i,o).getPromise()]}var e,n,r,i})})}function Qx(u){return vo(this,void 0,void 0,function(){var s;return yo(this,function(t){switch(t.label){case 0:return u._throwIfRoot("getDownloadURL"),[4,u.storage._getAuthToken()];case 1:return s=t.sent(),e=u.storage,n=u._location,o=Cx(),a=dx(n.fullServerUrl(),e.host),t=e.maxOperationRetryTime,(t=new Ox(a,"GET",(r=e,i=o,function(t,e){var n=Nx(r,e,i);return Px(null!==n),function(r,t,i){if(null===(t=wx(t)))return null;if(!hx(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var o=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return dx("/b/"+o(e)+"/o/"+o(n),i)+gx({alt:"media",token:t})})[0]}(n,e,r.host)}),t)).errorHandler=Mx(n),[2,u.storage._makeRequest(t,s).getPromise().then(function(t){if(null===t)throw new MD("no-download-url","The given file does not have any download URLs.");return t})]}var r,i,e,n,o,a})})}function Yx(t,e){var n,e=(n=t._location.path,e=e.split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new ax(t._location.bucket,e);return new Hx(t.storage,e)}function Xx(t){return/^[A-Za-z]+:\/\//.test(t)}function Jx(t,e){if(e&&Xx(e)){if(t instanceof Zx)return new Hx(t,e);throw BD("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof Zx){var r=e;if(null==r._bucket)throw new MD("no-default-bucket","No default bucket found. Did you set the '"+LD+"' property when initializing the app?");return r=new Hx(r,r._bucket),null!=n?t(r,n):r}if(void 0===n)return e;if(n.includes(".."))throw BD('`path` param cannot contain ".."');return Yx(e,n)}(t,e)}function $x(t,e){return null==(e=null==e?void 0:e[LD])?null:ax.makeFromBucketSpec(e,t)}var Zx=(Object.defineProperty(tL.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=ax.makeFromBucketSpec(this._url,t):this._bucket=$x(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(tL.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){px("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(tL.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){px("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),tL.prototype._getAuthToken=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},tL.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},tL.prototype._makeStorageReference=function(t){return new Hx(this,t)},tL.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new ux(KD());var r,i,o,a,s,u,c=(r=t,i=this._appId,o=e,a=this._pool,s=this._firebaseVersion,u=gx(r.urlParams),t=r.url+u,u=e=Object.assign({},r.headers),i&&(u["X-Firebase-GMPID"]=i),i=e,null!==o&&0<o.length&&(i.Authorization="Firebase "+o),e["X-Firebase-Storage-Version"]="webjs/"+(null!=s?s:"AppManager"),new vx(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a));return this._requests.add(c),c.getPromise().then(function(){return n._requests.delete(c)},function(){return n._requests.delete(c)}),c},tL);function tL(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=xD,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ax.makeFromBucketSpec(r,this._host):$x(this._host,this.app.options)}function eL(t,e){return Jx(t=ga(t),e)}var nL=(Object.defineProperty(rL.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),rL);function rL(t,e,n){this._delegate=t,this.task=e,this.ref=n}var iL=(Object.defineProperty(oL.prototype,"snapshot",{get:function(){return new nL(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),oL.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new nL(t,n,n._ref))},t)},oL.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new nL(t,i,i._ref))}:{next:e.next?function(t){return e.next(new nL(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},oL);function oL(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var aL=(Object.defineProperty(sL.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new uL(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(sL.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new uL(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(sL.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),sL);function sL(t,e){this._delegate=t,this._service=e}var uL=(Object.defineProperty(cL.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(cL.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(cL.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),cL.prototype.toString=function(){return this._delegate.toString()},cL.prototype.child=function(t){return new cL(Yx(this._delegate,t),this.storage)},Object.defineProperty(cL.prototype,"root",{get:function(){return new cL(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(cL.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new cL(t,this.storage)},enumerable:!1,configurable:!0}),cL.prototype.put=function(t,e){return this._throwIfRoot("put"),new iL((n=this._delegate,t=t,e=e,(n=ga(n))._throwIfRoot("uploadBytesResumable"),new Kx(n,new bx(t),e)),this);var n},cL.prototype.putString=function(t,e,n){return void 0===e&&(e=QD.RAW),this._throwIfRoot("putString"),t=YD(e,t),null==(n=go({},n)).contentType&&null!=t.contentType&&(n.contentType=t.contentType),new iL(new Kx(this._delegate,new bx(t.data,!0),n),this)},cL.prototype.listAll=function(){var t,e=this;return function r(i,o,a){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,zx(i,{pageToken:a})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(ga(this._delegate),t={prefixes:[],items:[]}).then(function(){return t}).then(function(t){return new aL(t,e.storage)})},cL.prototype.list=function(t){var e=this;return t=t||void 0,zx(ga(this._delegate),t).then(function(t){return new aL(t,e.storage)})},cL.prototype.getMetadata=function(){return function(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage._getAuthToken()];case 1:return e=t.sent(),n=Fx(r.storage,r._location,Cx()),[2,r.storage._makeRequest(n,e).getPromise()]}})})}(ga(this._delegate))},cL.prototype.updateMetadata=function(t){return function(s,u){return vo(this,void 0,void 0,function(){var a;return yo(this,function(t){switch(t.label){case 0:return s._throwIfRoot("updateMetadata"),[4,s.storage._getAuthToken()];case 1:return a=t.sent(),e=s.storage,n=s._location,r=u,i=Cx(),o=dx(n.fullServerUrl(),e.host),t=kx(r,i),r=e.maxOperationRetryTime,(r=new Ox(o,"PATCH",Dx(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=t,r.errorHandler=Mx(n),[2,s.storage._makeRequest(r,a).getPromise()]}var e,n,r,i,o})})}(ga(this._delegate),t)},cL.prototype.getDownloadURL=function(){return Qx(ga(this._delegate))},cL.prototype.delete=function(){return this._throwIfRoot("delete"),function(i){return vo(this,void 0,void 0,function(){var r;return yo(this,function(t){switch(t.label){case 0:return i._throwIfRoot("deleteObject"),[4,i.storage._getAuthToken()];case 1:return r=t.sent(),e=i.storage,t=dx((n=i._location).fullServerUrl(),e.host),e=e.maxOperationRetryTime,(e=new Ox(t,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=Mx(n),[2,i.storage._makeRequest(e,r).getPromise()]}var e,n})})}(ga(this._delegate))},cL.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw WD(t)},cL);function cL(t,e){this._delegate=t,this.storage=e}var hL=(Object.defineProperty(lL.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(lL.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),lL.prototype.ref=function(t){if(Xx(t))throw BD("ref() expected a child path but got a URL, use refFromURL instead.");return new uL(eL(this._delegate,t),this)},lL.prototype.refFromURL=function(t){if(!Xx(t))throw BD("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ax.makeFromUrl(t,this._delegate.host)}catch(t){throw BD("refFromUrl() expected a valid full URL but got an invalid one.")}return new uL(eL(this._delegate,t),this)},lL.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},lL.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},lL.prototype.useEmulator=function(t,e){this._delegate.host="http://"+t+":"+e},lL);function lL(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}ft={TaskState:tx,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:QD,Storage:Zx,Reference:uL},(nu=jl).INTERNAL.registerComponent(new va("storage",function(t,e){var n=e.instanceIdentifier,e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new hL(e,new Zx(e,t,new ix,n,jl.SDK_VERSION))},"PUBLIC").setServiceProps(ft).setMultipleInstances(!0)),nu.registerVersion("@firebase/storage","0.5.1");var fL,pL,dL="0.4.11",gL="FB-PERF-TRACE-MEASURE",vL="@firebase/performance/config",yL="@firebase/performance/configexpire",lt="Performance",Gn=((Gn={})["trace started"]="Trace {$traceName} was started before.",Gn["trace stopped"]="Trace {$traceName} is not running.",Gn["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Gn["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Gn["no window"]="Window is not available.",Gn["no app id"]="App id is not available.",Gn["no project id"]="Project id is not available.",Gn["no api key"]="Api key is not available.",Gn["invalid cc log"]="Attempted to queue invalid cc event",Gn["FB not default"]="Performance can only start when Firebase app instance is the default one.",Gn["RC response not ok"]="RC response is not ok",Gn["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Gn["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Gn["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Gn["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Gn),mL=new Ko("performance",lt,Gn),bL=new Aa(lt);bL.logLevel=Ta.INFO;var _L,wL=(IL.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},IL.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},IL.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},IL.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},IL.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},IL.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},IL.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Mo()||(bL.info("IndexedDB is not supported by current browswer"),!1):(bL.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},IL.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},IL.getInstance=function(){return fL=void 0===fL?new IL(pL):fL},IL);function IL(t){if(!(this.window=t))throw mL.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function TL(t,e){var n=t.length-e.length;if(n<0||1<n)throw mL.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var EL,SL,CL=(NL.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw mL.create("no app id");return t},NL.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw mL.create("no project id");return t},NL.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw mL.create("no api key");return t},NL.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},NL.getInstance=function(){return _L=void 0===_L?new NL:_L},NL);function NL(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=TL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=TL("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(lt=SL=SL||{})[lt.UNKNOWN=0]="UNKNOWN",lt[lt.VISIBLE=1]="VISIBLE",lt[lt.HIDDEN=2]="HIDDEN";var kL=["firebase_","google_","ga_"],AL=new RegExp("^[a-zA-Z]\\w*$");function RL(){switch(wL.getInstance().document.visibilityState){case"visible":return SL.VISIBLE;case"hidden":return SL.HIDDEN;default:return SL.UNKNOWN}}var OL="0.0.1",PL={loggingEnabled:!0},DL="FIREBASE_INSTALLATIONS_AUTH";function xL(t){var n,e=function(){var t=wL.getInstance().localStorage;if(t){var e=t.getItem(yL);if(e&&Number(e)>Date.now()){var n=t.getItem(vL);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return e?(ML(e),Promise.resolve()):(n=t,(t=CL.getInstance().installationsService.getToken()).then(function(t){}),t.then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+CL.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+CL.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:DL+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:CL.getInstance().getAppId(),app_version:dL,sdk_version:OL})});return fetch(t).then(function(t){if(t.ok)return t.json();throw mL.create("RC response not ok")})}).catch(function(){bL.info(LL)}).then(ML).then(function(t){var e=wL.getInstance().localStorage;t&&e&&(e.setItem(vL,JSON.stringify(t)),e.setItem(yL,String(Date.now()+60*CL.getInstance().configTimeToLive*60*1e3)))},function(){}))}var LL="Could not fetch config, will use default configs";function ML(t){if(!t)return t;var e=CL.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):PL.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=FL(e.tracesSamplingRate),e.logNetworkAfterSampling=FL(e.networkRequestsSamplingRate),t}function FL(t){return Math.random()<=t}var UL,jL=1;function qL(){return jL=2,UL=UL||(n=wL.getInstance().document,new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()}).then(function(){return(t=CL.getInstance().installationsService.getId()).then(function(t){EL=t}),t;var t}).then(xL).then(VL,VL));var n}function VL(){jL=3}var BL,KL=1e4,WL=3,HL=1e3,GL=WL,zL=[],QL=!1;function YL(t){setTimeout(function(){var t,e,r,n;if(0!==GL)return zL.length?(n=(t=zL.splice(0,HL)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),e={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:CL.getInstance().logSource,log_event:n},r=t,n=e,e=CL.getInstance().getFlTransportFullUrl(),void fetch(e,{method:"POST",body:JSON.stringify(n)}).then(function(t){return t.ok||bL.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=KL;isNaN(e)||(n=Math.max(e,n)),t=t.logResponseDetails,Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(zL=_o(_o([],r),zL),bL.info("Retry transport request later.")),GL=WL,YL(n)}).catch(function(){zL=_o(_o([],t),zL),GL--,bL.info("Tries left: "+GL+"."),YL(KL)})):YL(KL)},t)}function XL(t,e){var n;(BL=BL||(n=ZL,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw mL.create("invalid cc log");zL=_o(_o([],zL),[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}))(t,e)}function JL(t){var e=CL.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&wL.getInstance().requiredApisAvailable()&&(t.isAuto&&RL()!==SL.VISIBLE||(3===jL?$L(t):qL().then(function(){return $L(t)},function(){return $L(t)})))}function $L(t){var e;!EL||(e=CL.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return XL(t,1)},0)}function ZL(t,e){return(0===e?function(t){return t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:tM(),network_request_metric:t},JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};return 0!==Object.keys(t.counters).length&&(e.counters=t.counters),t=t.getAttributes(),0!==Object.keys(t).length&&(e.custom_attributes=t),e={application_info:tM(),trace_metric:e},JSON.stringify(e)})(t)}function tM(){return{google_app_id:CL.getInstance().getAppId(),app_instance_id:EL,web_app_info:{sdk_version:dL,page_url:wL.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=wL.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:RL(),effective_connection_type:function(){var t=wL.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var eM=["_fp","_fcp","_fid"],nM=(rM.prototype.start=function(){if(1!==this.state)throw mL.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},rM.prototype.stop=function(){if(2!==this.state)throw mL.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),JL(this)},rM.prototype.record=function(t,e,n){if(t<=0)throw mL.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw mL.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=go({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}JL(this)},rM.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},rM.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<eM.indexOf(n))&&n.startsWith("_"))throw mL.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&bL.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},rM.prototype.getMetric=function(t){return this.counters[t]||0},rM.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length||kL.some(function(t){return n.startsWith(t)})||!n.match(AL)),i=0!==(i=e).length&&i.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw mL.create("invalid attribute name",{attributeName:t});if(!i)throw mL.create("invalid attribute value",{attributeValue:e})}},rM.prototype.getAttribute=function(t){return this.customAttributes[t]},rM.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},rM.prototype.getAttributes=function(){return go({},this.customAttributes)},rM.prototype.setStartTime=function(t){this.startTimeUs=t},rM.prototype.setDuration=function(t){this.durationUs=t},rM.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure);(t=t&&t[0])&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},rM.createOobTrace=function(t,e,n){var r,i=wL.getInstance().getUrl();i&&(r=new rM("_wt_"+i,!0),i=Math.floor(1e3*wL.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),JL(r))},rM.createUserTimingTrace=function(t){JL(new rM(t,!1,t))},rM);function rM(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=wL.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||gL+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function iM(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=wL.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=CL.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return XL(e,0)},0)))}var oM=5e3;function aM(){EL&&(setTimeout(function(){var e,t=wL.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");t.onFirstInputDelay?(e=setTimeout(function(){nM.createOobTrace(n,r),e=void 0},oM),t.onFirstInputDelay(function(t){e&&(clearTimeout(e),nM.createOobTrace(n,r,t))})):nM.createOobTrace(n,r)},0),setTimeout(function(){for(var t=wL.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)iM(n[e]);t.setupObserver("resource",iM)},0),setTimeout(function(){for(var t=wL.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)sM(n[e]);t.setupObserver("measure",sM)},0))}function sM(t){(t=t.name).substring(0,gL.length)!==gL&&nM.createUserTimingTrace(t)}var uM=(cM.prototype.trace=function(t){return new nM(t)},Object.defineProperty(cM.prototype,"instrumentationEnabled",{get:function(){return CL.getInstance().instrumentationEnabled},set:function(t){CL.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(cM.prototype,"dataCollectionEnabled",{get:function(){return CL.getInstance().dataCollectionEnabled},set:function(t){CL.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),cM);function cM(t){this.app=t,wL.getInstance().requiredApisAvailable()&&Fo().then(function(t){t&&(QL||(YL(5500),QL=!0),qL().then(aM,aM))}).catch(function(t){bL.info("Environment doesn't support IndexedDB: "+t)})}(nu=jl).INTERNAL.registerComponent(new va("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw mL.create("FB not default");if("undefined"==typeof window)throw mL.create("no window");return pL=window,CL.getInstance().firebaseAppInstance=t,CL.getInstance().installationsService=e,new uM(t)}(t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate())},"PUBLIC")),nu.registerVersion("@firebase/performance","0.4.11");var hM,lM="firebase_id",fM="origin",pM=6e4,dM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",gM="https://www.googletagmanager.com/gtag/js";(lt=hM=hM||{}).EVENT="event",lt.SET="set",lt.CONFIG="config",(lt=Gn={}).ADD_SHIPPING_INFO="add_shipping_info",lt.ADD_PAYMENT_INFO="add_payment_info",lt.ADD_TO_CART="add_to_cart",lt.ADD_TO_WISHLIST="add_to_wishlist",lt.BEGIN_CHECKOUT="begin_checkout",lt.CHECKOUT_PROGRESS="checkout_progress",lt.EXCEPTION="exception",lt.GENERATE_LEAD="generate_lead",lt.LOGIN="login",lt.PAGE_VIEW="page_view",lt.PURCHASE="purchase",lt.REFUND="refund",lt.REMOVE_FROM_CART="remove_from_cart",lt.SCREEN_VIEW="screen_view",lt.SEARCH="search",lt.SELECT_CONTENT="select_content",lt.SELECT_ITEM="select_item",lt.SELECT_PROMOTION="select_promotion",lt.SET_CHECKOUT_OPTION="set_checkout_option",lt.SHARE="share",lt.SIGN_UP="sign_up",lt.TIMING_COMPLETE="timing_complete",lt.VIEW_CART="view_cart",lt.VIEW_ITEM="view_item",lt.VIEW_ITEM_LIST="view_item_list",lt.VIEW_PROMOTION="view_promotion",lt.VIEW_SEARCH_RESULTS="view_search_results";var vM=new Aa("@firebase/analytics");var lt=((lt={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",lt["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",lt["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",lt["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",lt["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",lt["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",lt["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",lt["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',lt["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',lt),yM=new Ko("analytics","Analytics",lt),mM=30;function bM(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var _M=(bM.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},bM.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},bM.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},new bM);function wM(s,u,c){return void 0===u&&(u=_M),vo(this,void 0,void 0,function(){var e,n,r,i,o,a=this;return yo(this,function(t){if(i=s.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw yM.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new IM,setTimeout(function(){return vo(a,void 0,void 0,function(){return yo(this,function(t){return o.abort(),[2]})})},void 0!==c?c:pM),[2,function u(c,t,h,l){var f=t.throttleEndTimeMillis,p=t.backoffCount;return void 0===l&&(l=_M),vo(this,void 0,void 0,function(){var e,n,r,a,s;return yo(this,function(t){switch(t.label){case 0:e=c.appId,n=c.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=h,o=f,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(yM.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(a=t.sent(),n)return vM.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:n}];throw a;case 4:return t.trys.push([4,6,,7]),[4,function(o){var a;return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=dM.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(a=i.error)&&void 0!==a&&a.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw yM.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}(c)];case 5:return s=t.sent(),l.deleteThrottleMetadata(e),[2,s];case 6:if(function(t){if(t instanceof Vo&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}(r=t.sent()))return a=503===Number(r.customData.httpStatus)?da(p,l.intervalMillis,mM):da(p,l.intervalMillis),s={throttleEndTimeMillis:Date.now()+a,backoffCount:p+1},l.setThrottleMetadata(e,s),vM.debug("Calling attemptFetch again in "+a+" millis"),[2,u(c,s,h,l)];if(l.deleteThrottleMetadata(e),n)return vM.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}var i,o})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw yM.create("no-api-key")})})}var IM=(TM.prototype.addEventListener=function(t){this.listeners.push(t)},TM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},TM);function TM(){this.listeners=[]}var EM,SM,CM={},NM=[],kM={},AM="dataLayer",RM="gtag",OM=!1;function PM(t,e){n=[],Do()&&n.push("This is a browser extension environment."),Uo()||n.push("Cookies are not available."),0<n.length&&(n=n.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=yM.create("invalid-analytics-context",{errorInfo:n}),vM.warn(n.message));var n,r,i,o,a,s,u,c,h=t.options.appId;if(!h)throw yM.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw yM.create("no-api-key");vM.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=CM[h])throw yM.create("already-exists",{id:h});return OM||(i=AM,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,n=kM,r=AM,i=RM,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)},window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=(a=o,s=CM,u=NM,c=n,function(n,r,i){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==hM.EVENT?[3,2]:[4,function(u,c,h,l,f){return vo(this,void 0,void 0,function(){var n,r,e,i,o,a,s;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),n=[],f&&f.send_to?(s=f.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e});if(!(t=t&&c[t.appId]))return n=[],"break";n.push(t)},i=0,o=s;i<o.length&&(a=o[i],"break"!==e(a));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(hM.EVENT,l,f||{}),[3,5];case 4:return s=t.sent(),vM.error(s),[3,5];case 5:return[2]}})})}(a,s,u,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==hM.CONFIG?[3,4]:[4,function(r,i,o,a,s,u){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:e=a[s],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return(n=(n=t.sent()).find(function(t){return t.measurementId===s}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),vM.error(n),[3,8];case 8:return r(hM.CONFIG,s,u),[2]}})})}(a,s,u,c,r,i)];case 3:return t.sent(),[3,5];case 4:a(hM.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),vM.error(e),[3,7];case 7:return[2]}})})}),i={gtagCore:o,wrappedGtag:window[i]},SM=i.wrappedGtag,EM=i.gtagCore,OM=!0),CM[h]=function(a,s,u,c,h,l){return vo(this,void 0,void 0,function(){var r,i,o;return yo(this,function(t){switch(t.label){case 0:return(r=wM(a)).then(function(t){u[t.measurementId]=t.appId,a.options.measurementId&&t.measurementId!==a.options.measurementId&&vM.warn("The measurement ID in the local Firebase config ("+a.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return vM.error(t)}),s.push(r),i=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return Mo()?[3,1]:(vM.warn(yM.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Fo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),vM.warn(yM.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){if(t)return c.getId()}),[4,Promise.all([r,i])];case 1:return o=t.sent(),r=o[0],i=o[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(gM))return r}}()||(e=l,n=r.measurementId,(t=document.createElement("script")).src=gM+"?l="+e+"&id="+n,t.async=!0,document.head.appendChild(t)),h("js",new Date),(o={})[fM]="firebase",o.update=!0,null!=i&&(o[lM]=i),h(hM.CONFIG,r.measurementId,o),[2,r.measurementId]}var e,n})})}(t,NM,kM,e,EM,AM),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,a){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return a&&a.global?(n(hM.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=go(go({},o),{send_to:e}),n(hM.EVENT,i,e),t.label=3;case 3:return[2]}})})})(SM,CM[h],t,e,n).catch(function(t){return vM.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(hM.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(hM.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(SM,CM[h],t,e).catch(function(t){return vM.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(hM.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(hM.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(SM,CM[h],t,e).catch(function(t){return vM.error(t)})},setUserProperties:function(t,e){(function(a,s,u,c){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return a(hM.SET,e),[2,Promise.resolve()];case 1:return[4,s];case 2:o=t.sent(),a(hM.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(SM,CM[h],t,e).catch(function(t){return vM.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(CM[h],t).catch(function(t){return vM.error(t)})},INTERNAL:{delete:function(){return delete CM[h],Promise.resolve()}}}}var DM="analytics";(nu=jl).INTERNAL.registerComponent(new va(DM,function(t){return PM(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:function(t){if(OM)throw yM.create("already-initialized");t.dataLayerName&&(AM=t.dataLayerName),t.gtagName&&(RM=t.gtagName)},EventName:Gn,isSupported:function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:if(Do())return[2,!1];if(!Uo())return[2,!1];if(!Mo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Fo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}})),nu.INTERNAL.registerComponent(new va("analytics-internal",function(t){try{return{logEvent:t.getProvider(DM).getImmediate().logEvent}}catch(t){throw yM.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),nu.registerVersion("@firebase/analytics","0.6.9");var xM=(LM.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},LM.prototype.fetch=function(i){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e)?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},LM);function LM(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var lt=((lt={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",lt["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",lt["registration-api-key"]="Undefined API key. Check Firebase app initialization.",lt["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",lt["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",lt["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",lt["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",lt["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",lt["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",lt["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',lt["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',lt["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",lt["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",lt),MM=new Ko("remoteconfig","Remote Config",lt),FM=(UM.prototype.fetch=function(f){return vo(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,h,l;return yo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(e=void 0===e?navigator:e).languages&&e.languages[0]||e.language},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),MM.create(o,{originalErrorMessage:i.message});case 6:if(a=l.status,s=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),MM.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?a=500:"NO_CHANGE"===c?a=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==a&&200!==a)throw MM.create("fetch-status",{httpStatus:a});return[2,{status:a,eTag:s,config:u}]}var e})})},UM);function UM(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var jM=(qM.prototype.addEventListener=function(t){this.listeners.push(t)},qM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},qM);function qM(){this.listeners=[]}var VM=["1","true","t","yes","y","on"],BM=(KM.prototype.asString=function(){return this._value},KM.prototype.asBoolean=function(){return"static"!==this._source&&0<=VM.indexOf(this._value.toLowerCase())},KM.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)?0:t},KM.prototype.getSource=function(){return this._source},KM);function KM(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var WM=(HM.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ta.DEBUG;break;case"silent":this._logger.logLevel=Ta.SILENT;break;default:this._logger.logLevel=Ta.ERROR}},Object.defineProperty(HM.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(HM.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),HM.prototype.activate=function(){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},HM.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},HM.prototype.fetch=function(){return vo(this,void 0,void 0,function(){var e,n,r,i=this;return yo(this,function(t){switch(t.label){case 0:e=new jM,setTimeout(function(){return vo(i,void 0,void 0,function(){return yo(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return n=t.sent(),r=n instanceof Vo&&-1!==n.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw t.sent(),n;case 6:return[2]}})})},HM.prototype.fetchAndActivate=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},HM.prototype.getAll=function(){var t,e,n=this;return t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(go(go({},t),e)).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},HM.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},HM.prototype.getNumber=function(t){return this.getValue(t).asNumber()},HM.prototype.getString=function(t){return this.getValue(t).asString()},HM.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new BM("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new BM("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new BM("static"))},HM);function HM(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function GM(t,e){return t=t.target.error||void 0,MM.create(e,{originalErrorMessage:t&&t.message})}var zM="app_namespace_store",QM=(YM.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},YM.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},YM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},YM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},YM.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},YM.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},YM.prototype.getActiveConfig=function(){return this.get("active_config")},YM.prototype.setActiveConfig=function(t){return this.set("active_config",t)},YM.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},YM.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},YM.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},YM.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},YM.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},YM.prototype.get=function(s){return vo(this,void 0,void 0,function(){var o,a=this;return yo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([zM],"readonly").objectStore(zM),r=a.createCompositeKey(s);try{var i=t.get(r);i.onerror=function(t){n(GM(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result,e(t?t.value:void 0)}}catch(t){n(MM.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},YM.prototype.set=function(s,u){return vo(this,void 0,void 0,function(){var o,a=this;return yo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([zM],"readwrite").objectStore(zM),r=a.createCompositeKey(s);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(GM(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(MM.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},YM.prototype.delete=function(s){return vo(this,void 0,void 0,function(){var o,a=this;return yo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([zM],"readwrite").objectStore(zM),r=a.createCompositeKey(s);try{var i=n.delete(r);i.onerror=function(t){e(GM(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(MM.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},YM.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},YM);function YM(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open("firebase_remote_config",1);t.onerror=function(t){n(GM(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(zM,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var XM=(JM.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},JM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},JM.prototype.getActiveConfig=function(){return this.activeConfig},JM.prototype.loadFromStorage=function(){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},JM.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},JM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},JM.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},JM);function JM(t){this.storage=t}var $M=(ZM.prototype.fetch=function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},ZM.prototype.attemptFetch=function(a,t){var s=t.throttleEndTimeMillis,u=t.backoffCount;return vo(this,void 0,void 0,function(){var n,r;return yo(this,function(t){switch(t.label){case 0:return[4,(i=a.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(MM.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(a)];case 3:return n=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,n];case 5:if(!((e=r=t.sent())instanceof Vo&&e.customData)||429!==(e=Number(e.customData.httpStatus))&&500!==e&&503!==e&&504!==e)throw r;return r={throttleEndTimeMillis:Date.now()+da(u),backoffCount:u+1},[4,this.storage.setThrottleMetadata(r)];case 6:return t.sent(),[2,this.attemptFetch(a,r)];case 7:return[2]}var e,i,o})})},ZM);function ZM(t,e){this.client=t,this.storage=e}var tF,eF="@firebase/remote-config";return(tF=jl).INTERNAL.registerComponent(new va("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw MM.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw MM.create("registration-project-id");if(!s)throw MM.create("registration-api-key");if(!u)throw MM.create("registration-app-id");return n=n||"firebase",e=new QM(u,r.name,n),t=new XM(e),(o=new Aa(eF)).logLevel=Ta.ERROR,u=new FM(i,tF.SDK_VERSION,n,a,s,u),u=new $M(u,e),u=new xM(u,e,t,o),(o=new WM(r,u,t,e,o)).ensureInitialized(),o},"PUBLIC").setMultipleInstances(!0)),tF.registerVersion(eF,"0.1.36"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),jl.registerVersion("firebase","8.4.2","cdn"),jl});